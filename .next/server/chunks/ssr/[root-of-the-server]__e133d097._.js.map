{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = 'https://zusheijhebsmjiyyeiqq.supabase.co';\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp1c2hlaWpoZWJzbWppeXllaXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MjI0NDAsImV4cCI6MjA2NzM5ODQ0MH0.iwGPaOJPa6OvwX_iA1xvRt5cM72DWfd8Br1pwRTemRc';\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\nexport const signInWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n  return { data, error };\n};\n\nexport const signUpWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n    },\n  });\n  return { data, error };\n};\n\n// Function to create admin user without email confirmation\nexport const createAdminUser = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n      data: {\n        email_confirm: true,\n      },\n    },\n  });\n  return { data, error };\n};\n\nexport const signOut = async () => {\n  await supabase.auth.signOut();\n};\n\nexport const getCurrentUser = async () => {\n  const { data: { user } } = await supabase.auth.getUser();\n  return user;\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAE3C,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;QAC5D;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAGO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;YAC1D,MAAM;gBACJ,eAAe;YACjB;QACF;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,UAAU;IACrB,MAAM,SAAS,IAAI,CAAC,OAAO;AAC7B;AAEO,MAAM,iBAAiB;IAC5B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/doctorService.ts"],"sourcesContent":["import { supabase } from './supabase';\n\n// Types for doctor management\nexport interface DoctorRegistrationData {\n  doctorId: string;\n  licenseNumber: string;\n  specialization: string;\n  department: string;\n  qualification: string;\n  experienceYears: number;\n  consultationFee: number;\n  \n  // User information\n  name: string;\n  email: string;\n  phone: string;\n  address: string;\n  \n  // Schedule information\n  workingHoursStart: string;\n  workingHoursEnd: string;\n  workingDays: number[];\n  \n  // Room information\n  roomNumber: string;\n  floorNumber: number;\n  \n  // Status\n  emergencyAvailable: boolean;\n}\n\nexport interface Doctor {\n  id: string;\n  user_id: string;\n  doctor_id: string;\n  license_number: string;\n  specialization: string;\n  department: string;\n  qualification: string;\n  experience_years: number;\n  consultation_fee: number;\n  working_hours_start: string;\n  working_hours_end: string;\n  working_days: number[];\n  room_number: string;\n  floor_number: number;\n  availability_status: string;\n  emergency_available: boolean;\n  status: string;\n  created_at: string;\n  updated_at: string;\n  user?: {\n    id: string;\n    name: string;\n    email: string;\n    phone: string;\n    address: string;\n  };\n}\n\n/**\n * Generate a unique doctor ID\n * Format: DR{Year}{Month}{Sequential}\n * Example: DR2025010001\n */\nexport async function generateDoctorId(): Promise<string> {\n  const now = new Date();\n  const year = now.getFullYear().toString().slice(-2);\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  \n  try {\n    // Get count of existing doctors for this month\n    const { count, error } = await supabase\n      .from('doctors')\n      .select('id', { count: 'exact', head: true })\n      .like('doctor_id', `DR${year}${month}%`);\n    \n    if (error) {\n      console.error('Error getting doctor count:', error);\n      throw new Error('Failed to generate doctor ID');\n    }\n    \n    const sequence = ((count || 0) + 1).toString().padStart(4, '0');\n    return `DR${year}${month}${sequence}`;\n  } catch (error) {\n    console.error('Error generating doctor ID:', error);\n    throw error;\n  }\n}\n\n/**\n * Create a new doctor record\n */\nexport async function createDoctor(doctorData: DoctorRegistrationData): Promise<Doctor> {\n  try {\n    // First, create user account\n    const { data: authUser, error: authError } = await supabase.auth.signUp({\n      email: doctorData.email,\n      password: 'password', // Default password, should be changed on first login\n      options: {\n        emailRedirectTo: `${window.location.origin}/auth/callback`,\n        data: {\n          role: 'doctor',\n          name: doctorData.name,\n          email_confirm: true\n        }\n      }\n    });\n\n    if (authError) {\n      console.error('Error creating doctor auth user:', authError);\n      throw new Error(`Failed to create doctor authentication: ${authError.message}`);\n    }\n\n    // Create user record\n    const userData = {\n      auth_id: authUser.user?.id,\n      employee_id: doctorData.doctorId,\n      name: doctorData.name,\n      email: doctorData.email,\n      phone: doctorData.phone,\n      address: doctorData.address,\n      role: 'doctor',\n      status: 'active',\n      permissions: {\n        view_patients: true,\n        create_appointments: true,\n        update_medical_records: true,\n        prescribe_medications: true\n      }\n    };\n\n    const { data: user, error: userError } = await supabase\n      .from('users')\n      .insert([userData])\n      .select()\n      .single();\n\n    if (userError) {\n      console.error('Error creating user record:', userError);\n      throw new Error(`Failed to create user record: ${userError.message}`);\n    }\n\n    // Create doctor record\n    const doctorRecord = {\n      user_id: user.id,\n      doctor_id: doctorData.doctorId,\n      license_number: doctorData.licenseNumber,\n      specialization: doctorData.specialization,\n      department: doctorData.department,\n      qualification: doctorData.qualification,\n      experience_years: doctorData.experienceYears,\n      consultation_fee: doctorData.consultationFee,\n      working_hours_start: doctorData.workingHoursStart,\n      working_hours_end: doctorData.workingHoursEnd,\n      working_days: doctorData.workingDays,\n      room_number: doctorData.roomNumber,\n      floor_number: doctorData.floorNumber,\n      availability_status: 'available',\n      emergency_available: doctorData.emergencyAvailable,\n      status: 'active'\n    };\n\n    const { data: doctor, error: doctorError } = await supabase\n      .from('doctors')\n      .insert([doctorRecord])\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .single();\n\n    if (doctorError) {\n      console.error('Error creating doctor record:', doctorError);\n      throw new Error(`Failed to create doctor record: ${doctorError.message}`);\n    }\n\n    return doctor;\n  } catch (error) {\n    console.error('Error creating doctor:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all doctors with pagination and filtering\n */\nexport async function getAllDoctors(options: {\n  page?: number;\n  limit?: number;\n  specialization?: string;\n  department?: string;\n  availabilityStatus?: string;\n  searchTerm?: string;\n} = {}): Promise<{ \n  doctors: Doctor[]; \n  total: number; \n  page: number; \n  limit: number; \n}> {\n  try {\n    const { page = 1, limit = 20, specialization, department, availabilityStatus, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (specialization) {\n      query = query.eq('specialization', specialization);\n    }\n\n    if (department) {\n      query = query.eq('department', department);\n    }\n\n    if (availabilityStatus) {\n      query = query.eq('availability_status', availabilityStatus);\n    }\n\n    if (searchTerm) {\n      query = query.or(`\n        doctor_id.ilike.%${searchTerm}%,\n        license_number.ilike.%${searchTerm}%,\n        specialization.ilike.%${searchTerm}%,\n        department.ilike.%${searchTerm}%,\n        user.name.ilike.%${searchTerm}%\n      `);\n    }\n\n    // Apply pagination\n    const { data: doctors, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching doctors:', error);\n      throw new Error(`Failed to fetch doctors: ${error.message}`);\n    }\n\n    return {\n      doctors: doctors || [],\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching doctors:', error);\n    throw error;\n  }\n}\n\n/**\n * Get doctor by ID\n */\nexport async function getDoctorById(doctorId: string): Promise<Doctor> {\n  try {\n    const { data: doctor, error } = await supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .eq('doctor_id', doctorId)\n      .single();\n\n    if (error) {\n      console.error('Error fetching doctor:', error);\n      throw new Error(`Doctor not found: ${error.message}`);\n    }\n\n    return doctor;\n  } catch (error) {\n    console.error('Error fetching doctor:', error);\n    throw error;\n  }\n}\n\n/**\n * Update doctor availability status\n */\nexport async function updateDoctorAvailability(\n  doctorId: string, \n  availabilityStatus: string\n): Promise<Doctor> {\n  try {\n    const { data: doctor, error } = await supabase\n      .from('doctors')\n      .update({ availability_status: availabilityStatus })\n      .eq('doctor_id', doctorId)\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating doctor availability:', error);\n      throw new Error(`Failed to update doctor availability: ${error.message}`);\n    }\n\n    return doctor;\n  } catch (error) {\n    console.error('Error updating doctor availability:', error);\n    throw error;\n  }\n}\n\n/**\n * Get doctors by specialization\n */\nexport async function getDoctorsBySpecialization(specialization: string): Promise<Doctor[]> {\n  try {\n    const { data: doctors, error } = await supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .eq('specialization', specialization)\n      .eq('status', 'active')\n      .order('user.name', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching doctors by specialization:', error);\n      throw new Error(`Failed to fetch doctors: ${error.message}`);\n    }\n\n    return doctors || [];\n  } catch (error) {\n    console.error('Error fetching doctors by specialization:', error);\n    throw error;\n  }\n}\n\n/**\n * Get available doctors for scheduling\n */\nexport async function getAvailableDoctors(\n  date: string,\n  time: string,\n  specialization?: string\n): Promise<Doctor[]> {\n  try {\n    let query = supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .eq('availability_status', 'available')\n      .eq('status', 'active');\n\n    if (specialization) {\n      query = query.eq('specialization', specialization);\n    }\n\n    const { data: doctors, error } = await query.order('user.name', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching available doctors:', error);\n      throw new Error(`Failed to fetch available doctors: ${error.message}`);\n    }\n\n    // Filter by working hours and days\n    const requestDate = new Date(date);\n    const dayOfWeek = requestDate.getDay();\n    const [hours, minutes] = time.split(':').map(Number);\n    const requestTimeMinutes = hours * 60 + minutes;\n\n    const availableDoctors = (doctors || []).filter(doctor => {\n      // Check if doctor works on this day\n      if (!doctor.working_days.includes(dayOfWeek)) {\n        return false;\n      }\n\n      // Check if time is within working hours\n      const startTime = doctor.working_hours_start.split(':').map(Number);\n      const endTime = doctor.working_hours_end.split(':').map(Number);\n      const startTimeMinutes = startTime[0] * 60 + startTime[1];\n      const endTimeMinutes = endTime[0] * 60 + endTime[1];\n\n      return requestTimeMinutes >= startTimeMinutes && requestTimeMinutes < endTimeMinutes;\n    });\n\n    return availableDoctors;\n  } catch (error) {\n    console.error('Error fetching available doctors:', error);\n    throw error;\n  }\n}\n\n/**\n * Get doctor statistics\n */\nexport async function getDoctorStats(doctorId?: string): Promise<{\n  totalAppointments: number;\n  todayAppointments: number;\n  completedAppointments: number;\n  pendingAppointments: number;\n}> {\n  try {\n    const today = new Date().toISOString().split('T')[0];\n    \n    let appointmentsQuery = supabase\n      .from('appointments')\n      .select('id, status, appointment_date');\n    \n    if (doctorId) {\n      appointmentsQuery = appointmentsQuery.eq('doctor_id', doctorId);\n    }\n    \n    const { data: appointments, error } = await appointmentsQuery;\n    \n    if (error) {\n      console.error('Error fetching appointment stats:', error);\n      throw new Error(`Failed to fetch appointment stats: ${error.message}`);\n    }\n    \n    const totalAppointments = appointments?.length || 0;\n    const todayAppointments = appointments?.filter(apt => apt.appointment_date === today).length || 0;\n    const completedAppointments = appointments?.filter(apt => apt.status === 'completed').length || 0;\n    const pendingAppointments = appointments?.filter(apt => \n      apt.status === 'scheduled' || apt.status === 'confirmed'\n    ).length || 0;\n    \n    return {\n      totalAppointments,\n      todayAppointments,\n      completedAppointments,\n      pendingAppointments\n    };\n  } catch (error) {\n    console.error('Error getting doctor stats:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all specializations\n */\nexport async function getAllSpecializations(): Promise<string[]> {\n  try {\n    const { data: specializations, error } = await supabase\n      .from('doctors')\n      .select('specialization')\n      .eq('status', 'active');\n\n    if (error) {\n      console.error('Error fetching specializations:', error);\n      throw new Error(`Failed to fetch specializations: ${error.message}`);\n    }\n\n    // Get unique specializations\n    const uniqueSpecializations = [...new Set(specializations?.map(s => s.specialization) || [])];\n    return uniqueSpecializations.sort();\n  } catch (error) {\n    console.error('Error fetching specializations:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all departments\n */\nexport async function getAllDepartments(): Promise<string[]> {\n  try {\n    const { data: departments, error } = await supabase\n      .from('doctors')\n      .select('department')\n      .eq('status', 'active');\n\n    if (error) {\n      console.error('Error fetching departments:', error);\n      throw new Error(`Failed to fetch departments: ${error.message}`);\n    }\n\n    // Get unique departments\n    const uniqueDepartments = [...new Set(departments?.map(d => d.department) || [])];\n    return uniqueDepartments.sort();\n  } catch (error) {\n    console.error('Error fetching departments:', error);\n    throw error;\n  }\n}\n\n/**\n * Update doctor information\n */\nexport async function updateDoctor(\n  doctorId: string,\n  updates: Partial<DoctorRegistrationData>\n): Promise<Doctor> {\n  try {\n    const { data: doctor, error } = await supabase\n      .from('doctors')\n      .update(updates)\n      .eq('doctor_id', doctorId)\n      .select(`\n        *,\n        user:users(id, name, email, phone, address)\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating doctor:', error);\n      throw new Error(`Failed to update doctor: ${error.message}`);\n    }\n\n    return doctor;\n  } catch (error) {\n    console.error('Error updating doctor:', error);\n    throw error;\n  }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/appointmentService.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { Doctor } from './doctorService';\n\n// Types for appointment management\nexport interface AppointmentData {\n  patientId: string;\n  doctorId: string;\n  appointmentDate: string;\n  appointmentTime: string;\n  durationMinutes?: number;\n  type: 'new_patient' | 'follow_up' | 'emergency' | 'routine_checkup' | 'consultation';\n  symptoms?: string;\n  chiefComplaint?: string;\n  notes?: string;\n}\n\nexport interface Appointment {\n  id: string;\n  appointment_id: string;\n  patient_id: string;\n  doctor_id: string;\n  appointment_date: string;\n  appointment_time: string;\n  duration_minutes: number;\n  type: string;\n  status: 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'rescheduled';\n  symptoms?: string;\n  chief_complaint?: string;\n  diagnosis?: string;\n  treatment_plan?: string;\n  prescriptions?: any[];\n  next_appointment_date?: string;\n  follow_up_instructions?: string;\n  notes?: string;\n  created_by?: string;\n  created_at: string;\n  updated_at: string;\n  \n  // Related data\n  patient?: any;\n  doctor?: any;\n}\n\nexport interface AppointmentSlot {\n  date: string;\n  time: string;\n  available: boolean;\n  doctorId: string;\n  doctorName: string;\n  specialization: string;\n}\n\n/**\n * Generate a unique appointment ID\n * Format: APT{Year}{Month}{Day}{Sequential}\n * Example: APT202501150001\n */\nexport async function generateAppointmentId(): Promise<string> {\n  const now = new Date();\n  const year = now.getFullYear().toString();\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  const day = now.getDate().toString().padStart(2, '0');\n  const datePrefix = `${year}${month}${day}`;\n  \n  try {\n    // Get count of existing appointments for today\n    const { count, error } = await supabase\n      .from('appointments')\n      .select('id', { count: 'exact', head: true })\n      .like('appointment_id', `APT${datePrefix}%`);\n    \n    if (error) {\n      console.error('Error getting appointment count:', error);\n      throw new Error('Failed to generate appointment ID');\n    }\n    \n    const sequence = ((count || 0) + 1).toString().padStart(4, '0');\n    return `APT${datePrefix}${sequence}`;\n  } catch (error) {\n    console.error('Error generating appointment ID:', error);\n    throw error;\n  }\n}\n\n/**\n * Create a new appointment\n */\nexport async function createAppointment(\n  appointmentData: AppointmentData,\n  createdBy?: string\n): Promise<Appointment> {\n  try {\n    const appointmentId = await generateAppointmentId();\n    \n    const appointmentRecord = {\n      appointment_id: appointmentId,\n      patient_id: appointmentData.patientId,\n      doctor_id: appointmentData.doctorId,\n      appointment_date: appointmentData.appointmentDate,\n      appointment_time: appointmentData.appointmentTime,\n      duration_minutes: appointmentData.durationMinutes || 30,\n      type: appointmentData.type,\n      status: 'scheduled',\n      symptoms: appointmentData.symptoms || null,\n      chief_complaint: appointmentData.chiefComplaint || null,\n      notes: appointmentData.notes || null,\n      created_by: createdBy || null,\n      prescriptions: []\n    };\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .insert([appointmentRecord])\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error creating appointment:', error);\n      throw new Error(`Failed to create appointment: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error creating appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Get appointments with filtering and pagination\n */\nexport async function getAppointments(options: {\n  page?: number;\n  limit?: number;\n  patientId?: string;\n  doctorId?: string;\n  date?: string;\n  status?: string;\n  type?: string;\n  searchTerm?: string;\n} = {}): Promise<{\n  appointments: Appointment[];\n  total: number;\n  page: number;\n  limit: number;\n}> {\n  try {\n    const { page = 1, limit = 20, patientId, doctorId, date, status, type, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (patientId) {\n      query = query.eq('patient_id', patientId);\n    }\n\n    if (doctorId) {\n      query = query.eq('doctor_id', doctorId);\n    }\n\n    if (date) {\n      query = query.eq('appointment_date', date);\n    }\n\n    if (status) {\n      query = query.eq('status', status);\n    }\n\n    if (type) {\n      query = query.eq('type', type);\n    }\n\n    if (searchTerm) {\n      query = query.or(`\n        appointment_id.ilike.%${searchTerm}%,\n        symptoms.ilike.%${searchTerm}%,\n        chief_complaint.ilike.%${searchTerm}%,\n        diagnosis.ilike.%${searchTerm}%\n      `);\n    }\n\n    // Apply pagination and ordering\n    const { data: appointments, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('appointment_date', { ascending: false })\n      .order('appointment_time', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching appointments:', error);\n      throw new Error(`Failed to fetch appointments: ${error.message}`);\n    }\n\n    return {\n      appointments: appointments || [],\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching appointments:', error);\n    throw error;\n  }\n}\n\n/**\n * Get appointment by ID\n */\nexport async function getAppointmentById(appointmentId: string): Promise<Appointment> {\n  try {\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email, date_of_birth, gender, address),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          qualification,\n          user:users(name, phone, email)\n        )\n      `)\n      .eq('appointment_id', appointmentId)\n      .single();\n\n    if (error) {\n      console.error('Error fetching appointment:', error);\n      throw new Error(`Appointment not found: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error fetching appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Update appointment status\n */\nexport async function updateAppointmentStatus(\n  appointmentId: string,\n  status: 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'rescheduled'\n): Promise<Appointment> {\n  try {\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update({ status })\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating appointment status:', error);\n      throw new Error(`Failed to update appointment status: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error updating appointment status:', error);\n    throw error;\n  }\n}\n\n/**\n * Update appointment with medical information\n */\nexport async function updateAppointmentMedicalInfo(\n  appointmentId: string,\n  medicalInfo: {\n    diagnosis?: string;\n    treatmentPlan?: string;\n    prescriptions?: any[];\n    followUpInstructions?: string;\n    nextAppointmentDate?: string;\n  }\n): Promise<Appointment> {\n  try {\n    const updateData: any = {};\n    \n    if (medicalInfo.diagnosis) updateData.diagnosis = medicalInfo.diagnosis;\n    if (medicalInfo.treatmentPlan) updateData.treatment_plan = medicalInfo.treatmentPlan;\n    if (medicalInfo.prescriptions) updateData.prescriptions = medicalInfo.prescriptions;\n    if (medicalInfo.followUpInstructions) updateData.follow_up_instructions = medicalInfo.followUpInstructions;\n    if (medicalInfo.nextAppointmentDate) updateData.next_appointment_date = medicalInfo.nextAppointmentDate;\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update(updateData)\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error updating appointment medical info:', error);\n      throw new Error(`Failed to update appointment medical info: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error updating appointment medical info:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient appointment history\n */\nexport async function getPatientAppointmentHistory(\n  patientId: string,\n  limit: number = 10\n): Promise<Appointment[]> {\n  try {\n    const { data: appointments, error } = await supabase\n      .from('appointments')\n      .select(`\n        *,\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .eq('patient_id', patientId)\n      .order('appointment_date', { ascending: false })\n      .order('appointment_time', { ascending: false })\n      .limit(limit);\n\n    if (error) {\n      console.error('Error fetching patient appointment history:', error);\n      throw new Error(`Failed to fetch appointment history: ${error.message}`);\n    }\n\n    return appointments || [];\n  } catch (error) {\n    console.error('Error fetching patient appointment history:', error);\n    throw error;\n  }\n}\n\n/**\n * Get doctor appointment schedule\n */\nexport async function getDoctorAppointmentSchedule(\n  doctorId: string,\n  date: string\n): Promise<Appointment[]> {\n  try {\n    const { data: appointments, error } = await supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email)\n      `)\n      .eq('doctor_id', doctorId)\n      .eq('appointment_date', date)\n      .in('status', ['scheduled', 'confirmed', 'in_progress'])\n      .order('appointment_time', { ascending: true });\n\n    if (error) {\n      console.error('Error fetching doctor schedule:', error);\n      throw new Error(`Failed to fetch doctor schedule: ${error.message}`);\n    }\n\n    return appointments || [];\n  } catch (error) {\n    console.error('Error fetching doctor schedule:', error);\n    throw error;\n  }\n}\n\n/**\n * Get available appointment slots for a doctor\n */\nexport async function getAvailableSlots(\n  doctorId: string,\n  date: string\n): Promise<AppointmentSlot[]> {\n  try {\n    // Get doctor information\n    const { data: doctor, error: doctorError } = await supabase\n      .from('doctors')\n      .select(`\n        *,\n        user:users(name)\n      `)\n      .eq('doctor_id', doctorId)\n      .single();\n\n    if (doctorError) {\n      console.error('Error fetching doctor:', doctorError);\n      throw new Error(`Doctor not found: ${doctorError.message}`);\n    }\n\n    // Get existing appointments for the date\n    const { data: existingAppointments, error: appointmentsError } = await supabase\n      .from('appointments')\n      .select('appointment_time, duration_minutes')\n      .eq('doctor_id', doctorId)\n      .eq('appointment_date', date)\n      .in('status', ['scheduled', 'confirmed', 'in_progress']);\n\n    if (appointmentsError) {\n      console.error('Error fetching existing appointments:', appointmentsError);\n      throw new Error(`Failed to fetch existing appointments: ${appointmentsError.message}`);\n    }\n\n    // Generate time slots based on doctor's working hours\n    const slots: AppointmentSlot[] = [];\n    const workingStartHour = parseInt(doctor.working_hours_start.split(':')[0]);\n    const workingEndHour = parseInt(doctor.working_hours_end.split(':')[0]);\n    const slotDuration = 30; // 30 minutes per slot\n\n    for (let hour = workingStartHour; hour < workingEndHour; hour++) {\n      for (let minute = 0; minute < 60; minute += slotDuration) {\n        const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\n        \n        // Check if slot is available\n        const isBooked = existingAppointments?.some(apt => {\n          const aptTime = apt.appointment_time;\n          const aptDuration = apt.duration_minutes || 30;\n          const aptEndTime = new Date(`2000-01-01T${aptTime}`);\n          aptEndTime.setMinutes(aptEndTime.getMinutes() + aptDuration);\n          \n          const slotTime = new Date(`2000-01-01T${timeString}`);\n          const slotEndTime = new Date(slotTime);\n          slotEndTime.setMinutes(slotEndTime.getMinutes() + slotDuration);\n          \n          return (slotTime < aptEndTime && slotEndTime > new Date(`2000-01-01T${aptTime}`));\n        });\n\n        slots.push({\n          date,\n          time: timeString,\n          available: !isBooked,\n          doctorId,\n          doctorName: doctor.user?.name || 'Unknown',\n          specialization: doctor.specialization\n        });\n      }\n    }\n\n    return slots;\n  } catch (error) {\n    console.error('Error generating available slots:', error);\n    throw error;\n  }\n}\n\n/**\n * Reschedule appointment\n */\nexport async function rescheduleAppointment(\n  appointmentId: string,\n  newDate: string,\n  newTime: string\n): Promise<Appointment> {\n  try {\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update({\n        appointment_date: newDate,\n        appointment_time: newTime,\n        status: 'rescheduled'\n      })\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error rescheduling appointment:', error);\n      throw new Error(`Failed to reschedule appointment: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error rescheduling appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Cancel appointment\n */\nexport async function cancelAppointment(\n  appointmentId: string,\n  reason?: string\n): Promise<Appointment> {\n  try {\n    const updateData: any = { status: 'cancelled' };\n    if (reason) {\n      updateData.notes = reason;\n    }\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .update(updateData)\n      .eq('appointment_id', appointmentId)\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .single();\n\n    if (error) {\n      console.error('Error cancelling appointment:', error);\n      throw new Error(`Failed to cancel appointment: ${error.message}`);\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error cancelling appointment:', error);\n    throw error;\n  }\n}\n\n/**\n * Get appointment statistics\n */\nexport async function getAppointmentStats(\n  doctorId?: string,\n  patientId?: string,\n  dateRange?: { start: string; end: string }\n): Promise<{\n  total: number;\n  scheduled: number;\n  completed: number;\n  cancelled: number;\n  todayCount: number;\n  upcomingCount: number;\n}> {\n  try {\n    let query = supabase\n      .from('appointments')\n      .select('id, status, appointment_date');\n\n    if (doctorId) {\n      query = query.eq('doctor_id', doctorId);\n    }\n\n    if (patientId) {\n      query = query.eq('patient_id', patientId);\n    }\n\n    if (dateRange) {\n      query = query.gte('appointment_date', dateRange.start)\n                   .lte('appointment_date', dateRange.end);\n    }\n\n    const { data: appointments, error } = await query;\n\n    if (error) {\n      console.error('Error fetching appointment stats:', error);\n      throw new Error(`Failed to fetch appointment stats: ${error.message}`);\n    }\n\n    const today = new Date().toISOString().split('T')[0];\n    const total = appointments?.length || 0;\n    const scheduled = appointments?.filter(apt => apt.status === 'scheduled').length || 0;\n    const completed = appointments?.filter(apt => apt.status === 'completed').length || 0;\n    const cancelled = appointments?.filter(apt => apt.status === 'cancelled').length || 0;\n    const todayCount = appointments?.filter(apt => apt.appointment_date === today).length || 0;\n    const upcomingCount = appointments?.filter(apt => \n      new Date(apt.appointment_date) > new Date(today) && \n      ['scheduled', 'confirmed'].includes(apt.status)\n    ).length || 0;\n\n    return {\n      total,\n      scheduled,\n      completed,\n      cancelled,\n      todayCount,\n      upcomingCount\n    };\n  } catch (error) {\n    console.error('Error getting appointment stats:', error);\n    throw error;\n  }\n}\n\n/**\n * Get upcoming appointments\n */\nexport async function getUpcomingAppointments(\n  doctorId?: string,\n  patientId?: string,\n  limit: number = 10\n): Promise<Appointment[]> {\n  try {\n    const today = new Date().toISOString().split('T')[0];\n    \n    let query = supabase\n      .from('appointments')\n      .select(`\n        *,\n        patient:patients(id, patient_id, name, phone, email),\n        doctor:doctors(\n          id, \n          doctor_id, \n          specialization, \n          department,\n          user:users(name, phone, email)\n        )\n      `)\n      .gte('appointment_date', today)\n      .in('status', ['scheduled', 'confirmed'])\n      .order('appointment_date', { ascending: true })\n      .order('appointment_time', { ascending: true })\n      .limit(limit);\n\n    if (doctorId) {\n      query = query.eq('doctor_id', doctorId);\n    }\n\n    if (patientId) {\n      query = query.eq('patient_id', patientId);\n    }\n\n    const { data: appointments, error } = await query;\n\n    if (error) {\n      console.error('Error fetching upcoming appointments:', error);\n      throw new Error(`Failed to fetch upcoming appointments: ${error.message}`);\n    }\n\n    return appointments || [];\n  } catch (error) {\n    console.error('Error fetching upcoming appointments:', error);\n    throw error;\n  }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 961, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/barcodeUtils.ts"],"sourcesContent":["import { supabase } from './supabase';\n\n/**\n * Generate a barcode ID for a patient\n * Format: BARS{Year}{Month}{RandomDigits}\n * Example: BARS2025010001\n */\nexport function generateBarcodeId(uhid: string): string {\n  const now = new Date();\n  const year = now.getFullYear().toString();\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  \n  // Use UHID as base and add timestamp for uniqueness\n  const timestamp = now.getTime().toString().slice(-4); // Last 4 digits of timestamp\n  \n  return `BARS${year}${month}${timestamp}`;\n}\n\n/**\n * Generate SVG barcode using Code-128 format\n * This is a simplified implementation - in production, you'd use a proper barcode library\n */\nexport function generateBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const barWidth = 2;\n  const barsCount = barcodeId.length * 6; // Approximate for Code-128\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate bars pattern (simplified)\n  let x = 10;\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create alternating pattern based on character\n    for (let j = 0; j < 6; j++) {\n      if ((charCode + j) % 2 === 0) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n    }\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Generate a more realistic barcode pattern\n * This creates a pattern that looks more like a real barcode\n */\nexport function generateRealisticBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const minBarWidth = 1;\n  const maxBarWidth = 4;\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate more realistic bar pattern\n  let x = 20;\n  let isBlack = true;\n  \n  // Start and end patterns\n  const startPattern = [1, 1, 1, 1, 1, 1];\n  const endPattern = [1, 1, 1, 1, 1, 1];\n  \n  // Draw start pattern\n  for (const barWidth of startPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Draw data pattern\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create pattern based on character\n    const pattern = [];\n    for (let j = 0; j < 6; j++) {\n      const width = minBarWidth + ((charCode + j) % (maxBarWidth - minBarWidth + 1));\n      pattern.push(width);\n    }\n    \n    for (const barWidth of pattern) {\n      if (isBlack) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n      isBlack = !isBlack;\n    }\n  }\n  \n  // Draw end pattern\n  for (const barWidth of endPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Update patient with barcode ID\n */\nexport async function updatePatientWithBarcode(patientId: string, barcodeId: string): Promise<void> {\n  try {\n    const { error } = await supabase\n      .from('patients')\n      .update({ barcode_id: barcodeId })\n      .eq('patient_id', patientId);\n    \n    if (error) {\n      console.error('Error updating patient with barcode:', error);\n      throw new Error(`Failed to update patient with barcode: ${error.message}`);\n    }\n  } catch (error) {\n    console.error('Error updating patient with barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by barcode ID\n */\nexport async function getPatientByBarcodeId(barcodeId: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('barcode_id', barcodeId)\n      .single();\n    \n    if (error) {\n      console.error('Error fetching patient by barcode:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Generate printable barcode data\n */\nexport function generatePrintableBarcodeData(uhid: string, barcodeId: string, patientName: string): string {\n  const svg = generateRealisticBarcodeSVG(barcodeId);\n  \n  return `\n    <div style=\"width: 4in; height: 2in; padding: 0.2in; font-family: Arial, sans-serif; border: 1px solid #ccc; margin: 0.1in;\">\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        <h3 style=\"margin: 0; font-size: 14px; color: #333;\">ANNAM HOSPITAL</h3>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">Patient ID Card</p>\n      </div>\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        ${svg}\n      </div>\n      <div style=\"text-align: center; font-size: 12px;\">\n        <p style=\"margin: 0; font-weight: bold;\">${patientName}</p>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">UHID: ${uhid}</p>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Validate barcode ID format\n */\nexport function validateBarcodeId(barcodeId: string): boolean {\n  // Check if it matches the format: BARS{Year}{Month}{4digits}\n  const barcodeRegex = /^BARS\\d{4}(0[1-9]|1[0-2])\\d{4}$/;\n  return barcodeRegex.test(barcodeId);\n}\n\n/**\n * Extract information from barcode ID\n */\nexport function extractBarcodeInfo(barcodeId: string): {\n  year: string;\n  month: string;\n  sequence: string;\n} | null {\n  if (!validateBarcodeId(barcodeId)) {\n    return null;\n  }\n  \n  const year = barcodeId.substring(4, 8);\n  const month = barcodeId.substring(8, 10);\n  const sequence = barcodeId.substring(10, 14);\n  \n  return { year, month, sequence };\n}\n\n/**\n * Generate barcode for existing patient\n */\nexport async function generateBarcodeForPatient(patientId: string): Promise<string> {\n  try {\n    // Check if patient already has a barcode\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('barcode_id, patient_id')\n      .eq('patient_id', patientId)\n      .single();\n    \n    if (error) {\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    // If patient already has a barcode, return it\n    if (patient.barcode_id && patient.barcode_id.trim() !== '') {\n      return patient.barcode_id;\n    }\n    \n    // Generate new barcode\n    const barcodeId = generateBarcodeId(patientId);\n    \n    // Update patient with barcode\n    await updatePatientWithBarcode(patientId, barcodeId);\n    \n    return barcodeId;\n  } catch (error) {\n    console.error('Error generating barcode for patient:', error);\n    throw error;\n  }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1165, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/patientService.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { generateBarcodeId, updatePatientWithBarcode } from './barcodeUtils';\n\n// Types - Updated to match comprehensive registration form\nexport interface PatientRegistrationData {\n  // Personal Information (Mandatory)\n  firstName: string;\n  lastName: string;\n  dateOfBirth: string;\n  gender: string;\n  maritalStatus?: string; // single, married, divorced, widowed, separated\n  phone: string;\n  email?: string;\n  address: string;\n  \n  // Medical & Admission Information \n  bloodGroup: string;\n  allergies: string;\n  medicalHistory: string;\n  currentMedications: string;\n  chronicConditions: string;\n  previousSurgeries: string;\n  \n  // Admission Details\n  admissionDate?: string;\n  admissionTime?: string;\n  primaryComplaint: string;\n  admissionType: string; // emergency, elective, referred\n  referringDoctorFacility?: string;\n  consultingDoctorId?: string;\n  consultingDoctorName?: string;\n  departmentWard?: string;\n  roomNumber?: string;\n  \n  // Guardian/Attendant Details (Optional)\n  guardianName?: string;\n  guardianRelationship?: string;\n  guardianPhone?: string;\n  guardianAddress?: string;\n  \n  // Emergency Contact (Optional)\n  emergencyContactName?: string;\n  emergencyContactPhone?: string;\n  emergencyContactRelationship?: string;\n  \n  // Insurance Information (Optional)\n  insuranceProvider?: string;\n  insuranceNumber?: string;\n  \n  // Initial Visit Information\n  initialSymptoms?: string;\n  referredBy?: string;\n}\n\nexport interface PatientResponse {\n  success: boolean;\n  patient?: any;\n  uhid?: string;\n  credentials?: {\n    email: string;\n    password: string;\n  };\n  error?: string;\n}\n\n/**\n * Generate a unique UHID (Unique Hospital ID) for a new patient\n * Format: UHID + current year + 6-digit sequential number\n * Example: UHID2025000001\n */\nexport async function generateUHID(): Promise<string> {\n  const now = new Date();\n  const yearTwoDigits = now.getFullYear().toString().slice(-2); // Last two digits of year\n  const month = (now.getMonth() + 1).toString().padStart(2, '0'); // Month with leading zero\n  \n  try {\n    // Generate a unique 4-digit random number\n    let uhid: string = '';\n    let isUnique = false;\n    let attempts = 0;\n    const maxAttempts = 1000;\n    \n    while (!isUnique && attempts < maxAttempts) {\n      // Generate 4-digit random number\n      const randomNumber = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\n      uhid = `AH${yearTwoDigits}${month}${randomNumber}`;\n      \n      // Check if this UHID already exists\n      const { data: existing, error } = await supabase\n        .from('patients')\n        .select('patient_id')\n        .eq('patient_id', uhid)\n        .single();\n      \n      if (error && error.code === 'PGRST116') {\n        // No record found, UHID is unique\n        isUnique = true;\n      } else if (error) {\n        console.error('Error checking UHID uniqueness:', error);\n        throw new Error('Failed to generate UHID');\n      }\n      \n      attempts++;\n    }\n    \n    if (!isUnique) {\n      throw new Error('Failed to generate unique UHID after maximum attempts');\n    }\n    \n    return uhid;\n  } catch (error) {\n    console.error('Error generating UHID:', error);\n    throw new Error('Failed to generate UHID');\n  }\n}\n\n/**\n * Create authentication credentials for a new patient\n * Email format: UHID@annam.com\n * Password: \"password\" (as specified in requirements)\n */\nexport async function createPatientAuthCredentials(uhid: string): Promise<{ \n  authUser: any; \n  credentials: { email: string; password: string } \n}> {\n  const email = `${uhid}@annam.com`;\n  const password = 'password';\n\n  try {\n    // Create auth user using Supabase Admin API\n    const { data: authUser, error: authError } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo: `${window.location.origin}/auth/callback`,\n        data: {\n          role: 'patient',\n          uhid: uhid,\n          email_confirm: true\n        }\n      }\n    });\n\n    if (authError) {\n      console.error('Error creating auth user:', authError);\n      throw new Error(`Failed to create authentication: ${authError.message}`);\n    }\n\n    return {\n      authUser: authUser.user,\n      credentials: { email, password }\n    };\n  } catch (error) {\n    console.error('Error creating patient auth credentials:', error);\n    throw error;\n  }\n}\n\n/**\n * Insert comprehensive patient record into the patients table with all new fields\n */\nexport async function insertPatientRecord(\n  uhid: string, \n  registrationData: PatientRegistrationData,\n  userId?: string\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    // Generate barcode ID\n    const barcodeId = generateBarcodeId(uhid);\n    \n    // Prepare admission date and time\n    let admissionDateTime = null;\n    if (registrationData.admissionDate) {\n      if (registrationData.admissionTime) {\n        admissionDateTime = `${registrationData.admissionDate}T${registrationData.admissionTime}`;\n      } else {\n        admissionDateTime = `${registrationData.admissionDate}T00:00:00`;\n      }\n    }\n    \n    const patientData = {\n      // Basic Information\n      patient_id: uhid,\n      barcode_id: barcodeId, // Add barcode ID\n      name: fullName,\n      date_of_birth: registrationData.dateOfBirth,\n      gender: registrationData.gender.toLowerCase(),\n      marital_status: registrationData.maritalStatus || null,\n      phone: registrationData.phone,\n      email: registrationData.email || `${uhid}@annam.com`,\n      address: registrationData.address,\n      \n      // Medical Information\n      blood_group: registrationData.bloodGroup || null,\n      allergies: registrationData.allergies || null,\n      medical_history: registrationData.medicalHistory || null,\n      current_medications: registrationData.currentMedications || null,\n      chronic_conditions: registrationData.chronicConditions || null,\n      previous_surgeries: registrationData.previousSurgeries || null,\n      \n      // New Admission Information\n      admission_date: admissionDateTime,\n      admission_time: registrationData.admissionTime || null,\n      primary_complaint: registrationData.primaryComplaint,\n      admission_type: registrationData.admissionType,\n      referring_doctor_facility: registrationData.referringDoctorFacility || null,\n      department_ward: registrationData.departmentWard || null,\n      room_number: registrationData.roomNumber || null,\n      \n      // Guardian/Attendant Details (Optional)\n      guardian_name: registrationData.guardianName || null,\n      guardian_relationship: registrationData.guardianRelationship || null,\n      guardian_phone: registrationData.guardianPhone || null,\n      guardian_address: registrationData.guardianAddress || null,\n      \n      // Emergency Contact (Optional)\n      emergency_contact_name: registrationData.emergencyContactName || null,\n      emergency_contact_phone: registrationData.emergencyContactPhone || null,\n      emergency_contact_relationship: registrationData.emergencyContactRelationship || null,\n      \n      // Insurance Information\n      insurance_number: registrationData.insuranceNumber || null,\n      insurance_provider: registrationData.insuranceProvider || null,\n      \n      // Additional fields\n      initial_symptoms: registrationData.initialSymptoms || null,\n      referred_by: registrationData.referredBy || null,\n      \n      // Link to users table\n      user_id: userId || null,\n      \n      // System fields\n      status: 'active'\n    };\n\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .insert([patientData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error inserting patient record:', error);\n      throw new Error(`Failed to create patient record: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error inserting patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Link the Supabase auth user to the users table for role management\n */\nexport async function linkAuthUserToPatient(\n  authUserId: string, \n  uhid: string, \n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    const userData = {\n      auth_id: authUserId,\n      employee_id: uhid, // Using UHID as employee_id for patients\n      name: fullName,\n      email: registrationData.email || `${uhid}@annam.com`,\n      role: 'patient',\n      phone: registrationData.phone,\n      address: registrationData.address,\n      status: 'active',\n      permissions: {\n        patient_portal: true,\n        view_own_records: true,\n        book_appointments: true\n      }\n    };\n\n    const { data: user, error } = await supabase\n      .from('users')\n      .insert([userData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error linking auth user to patient:', error);\n      throw new Error(`Failed to create user record: ${error.message}`);\n    }\n\n    return user;\n  } catch (error) {\n    console.error('Error linking auth user to patient:', error);\n    throw error;\n  }\n}\n\n/**\n * Create an initial appointment if symptoms are provided\n */\nexport async function createInitialAppointment(\n  patientId: string,\n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    if (!registrationData.initialSymptoms?.trim() && !registrationData.primaryComplaint?.trim()) {\n      return null; // No appointment needed if no symptoms\n    }\n\n    // Generate appointment ID\n    const appointmentId = `APT${Date.now()}`;\n    \n    // Use tomorrow as default appointment date\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    \n    const appointmentData = {\n      appointment_id: appointmentId,\n      patient_id: patientId,\n      appointment_date: tomorrow.toISOString().split('T')[0],\n      appointment_time: '09:00:00',\n      type: 'consultation',\n      status: 'scheduled',\n      symptoms: registrationData.initialSymptoms || registrationData.primaryComplaint,\n      notes: `Initial consultation for newly registered patient. Primary complaint: ${registrationData.primaryComplaint}`\n    };\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .insert([appointmentData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error creating initial appointment:', error);\n      // Don't throw error for appointment creation failure\n      return null;\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error creating initial appointment:', error);\n    // Don't throw error for appointment creation failure\n    return null;\n  }\n}\n\n/**\n * Main function to register a new patient with complete workflow\n */\nexport async function registerNewPatient(\n  registrationData: PatientRegistrationData,\n  preGeneratedUHID?: string\n): Promise<PatientResponse> {\n  try {\n    // Step 1: Use pre-generated UHID or generate new one\n    const uhid = preGeneratedUHID || await generateUHID();\n    console.log('Using UHID:', uhid);\n\n    // Step 2: Create authentication credentials\n    const { authUser, credentials } = await createPatientAuthCredentials(uhid);\n    console.log('Created auth user:', authUser?.id);\n\n    // Step 3: Create user record in users table\n    const userRecord = await linkAuthUserToPatient(authUser.id, uhid, registrationData);\n    console.log('Created user record:', userRecord.id);\n\n    // Step 4: Insert patient record with user_id link\n    const patient = await insertPatientRecord(uhid, registrationData, userRecord.id);\n    console.log('Created patient record:', patient.id);\n\n    // Step 5: Create initial appointment if symptoms provided\n    if (registrationData.initialSymptoms?.trim() || registrationData.primaryComplaint?.trim()) {\n      const appointment = await createInitialAppointment(patient.id, registrationData);\n      if (appointment) {\n        console.log('Created initial appointment:', appointment.id);\n      }\n    }\n\n    return {\n      success: true,\n      patient,\n      uhid,\n      credentials,\n    };\n\n  } catch (error) {\n    console.error('Error registering new patient:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    };\n  }\n}\n\n/**\n * Validate that UHID is unique\n */\nexport async function validateUHIDUnique(uhid: string): Promise<boolean> {\n  try {\n    const { data: existingPatient, error } = await supabase\n      .from('patients')\n      .select('patient_id')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error && error.code !== 'PGRST116') {\n      console.error('Error validating UHID uniqueness:', error);\n      throw new Error('Failed to validate UHID');\n    }\n\n    return !existingPatient; // Return true if no existing patient found\n  } catch (error) {\n    console.error('Error validating UHID uniqueness:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by UHID with comprehensive data\n */\nexport async function getPatientByUHID(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient by UHID:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by UHID:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient with related data (appointments, bills, etc.)\n */\nexport async function getPatientWithRelatedData(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        ),\n        appointments:appointments(\n          id,\n          appointment_id,\n          appointment_date,\n          appointment_time,\n          type,\n          status,\n          symptoms,\n          diagnosis,\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        ),\n        bed_allocations:bed_allocations(\n          id,\n          admission_date,\n          discharge_date,\n          admission_type,\n          status,\n          bed:beds(bed_number, room_number, bed_type),\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        )\n      `)\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient with related data:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient with related data:', error);\n    throw error;\n  }\n}\n\n/**\n * Update patient information\n */\nexport async function updatePatientRecord(\n  uhid: string, \n  updateData: any\n): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .update(updateData)\n      .eq('patient_id', uhid)\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error updating patient record:', error);\n      throw new Error(`Failed to update patient: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error updating patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all patients with pagination and filtering\n */\nexport async function getAllPatients(\n  options: {\n    page?: number;\n    limit?: number;\n    status?: string;\n    searchTerm?: string;\n  } = {}\n): Promise<{ patients: any[]; total: number; page: number; limit: number }> {\n  try {\n    const { page = 1, limit = 20, status, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        )\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (status) {\n      query = query.eq('status', status);\n    }\n\n    if (searchTerm) {\n      query = query.or(`name.ilike.%${searchTerm}%,patient_id.ilike.%${searchTerm}%,phone.ilike.%${searchTerm}%`);\n    }\n\n    // Apply pagination\n    const { data: patients, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching patients:', error);\n      throw new Error(`Failed to fetch patients: ${error.message}`);\n    }\n\n    return {\n      patients: patients || [],\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching patients:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1560, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/components/AppointmentBookingForm.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport {\n  Calendar,\n  Clock,\n  User,\n  Stethoscope,\n  MapPin,\n  DollarSign,\n  Save,\n  X,\n  Search,\n  ChevronDown,\n  CheckCircle,\n  AlertCircle,\n  Loader2\n} from 'lucide-react';\nimport { getAllDoctors, getAllSpecializations, Doctor } from '../src/lib/doctorService';\nimport { createAppointment, getAvailableSlots, AppointmentData } from '../src/lib/appointmentService';\nimport { getAllPatients } from '../src/lib/patientService';\n\ninterface Patient {\n  id: string;\n  patient_id: string;\n  first_name: string;\n  last_name: string;\n  phone: string;\n  email?: string;\n}\n\ninterface TimeSlot {\n  time: string;\n  available: boolean;\n  appointment_id?: string;\n}\n\ninterface AppointmentBookingFormProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: (appointment: any) => void;\n  patientId?: string;\n  doctorId?: string;\n}\n\nconst AppointmentBookingForm: React.FC<AppointmentBookingFormProps> = ({\n  isOpen,\n  onClose,\n  onSuccess,\n  patientId,\n  doctorId\n}) => {\n  const [step, setStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Form data\n  const [formData, setFormData] = useState<AppointmentData>({\n    patientId: patientId || '',\n    doctorId: doctorId || '',\n    appointmentDate: '',\n    appointmentTime: '',\n    durationMinutes: 30,\n    type: 'consultation',\n    symptoms: '',\n    notes: ''\n  });\n\n  // Data states\n  const [patients, setPatients] = useState<Patient[]>([]);\n  const [doctors, setDoctors] = useState<Doctor[]>([]);\n  const [specializations, setSpecializations] = useState<string[]>([]);\n  const [selectedSpecialization, setSelectedSpecialization] = useState('');\n  const [availableSlots, setAvailableSlots] = useState<TimeSlot[]>([]);\n  const [selectedDoctor, setSelectedDoctor] = useState<Doctor | null>(null);\n  const [selectedPatient, setSelectedPatient] = useState<Patient | null>(null);\n\n  // Search states\n  const [patientSearch, setPatientSearch] = useState('');\n  const [doctorSearch, setDoctorSearch] = useState('');\n\n  useEffect(() => {\n    if (isOpen) {\n      loadInitialData();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (formData.doctorId && formData.appointmentDate) {\n      loadAvailableSlots();\n    }\n  }, [formData.doctorId, formData.appointmentDate]);\n\n  const loadInitialData = async () => {\n    try {\n      setLoading(true);\n      const [patientsData, doctorsData, specializationsData] = await Promise.all([\n        getAllPatients({ limit: 100 }),\n        getAllDoctors(),\n        getAllSpecializations()\n      ]);\n\n      setPatients(patientsData.patients || []);\n      setDoctors(doctorsData.doctors || []);\n      setSpecializations(specializationsData || []);\n\n      // Pre-select patient if provided\n      if (patientId) {\n        const patient = patientsData.patients?.find(p => p.id === patientId);\n        if (patient) {\n          setSelectedPatient(patient);\n        }\n      }\n\n      // Pre-select doctor if provided\n      if (doctorId) {\n        const doctor = doctorsData.doctors?.find((d: Doctor) => d.id === doctorId);\n        if (doctor) {\n          setSelectedDoctor(doctor);\n          setSelectedSpecialization(doctor.specialization);\n        }\n      }\n    } catch (err) {\n      console.error('Error loading initial data:', err);\n      setError('Failed to load data. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadAvailableSlots = async () => {\n    try {\n      const slots = await getAvailableSlots(\n        formData.doctorId,\n        formData.appointmentDate\n      );\n      setAvailableSlots(slots.map((slot: any) => ({\n        time: slot.time,\n        available: slot.available\n      })));\n    } catch (err) {\n      console.error('Error loading available slots:', err);\n      setError('Failed to load available time slots.');\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!formData.patientId || !formData.doctorId || !formData.appointmentDate || !formData.appointmentTime) {\n      setError('Please fill in all required fields.');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError('');\n      \n      const appointment = await createAppointment(formData);\n      setSuccess('Appointment booked successfully!');\n      \n      setTimeout(() => {\n        onSuccess?.(appointment);\n        handleClose();\n      }, 1500);\n    } catch (err: any) {\n      console.error('Error creating appointment:', err);\n      setError(err.message || 'Failed to book appointment. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    setStep(1);\n    setFormData({\n      patientId: '',\n      doctorId: '',\n      appointmentDate: '',\n      appointmentTime: '',\n      durationMinutes: 30,\n      type: 'consultation',\n      symptoms: '',\n      notes: ''\n    });\n    setError('');\n    setSuccess('');\n    setSelectedPatient(null);\n    setSelectedDoctor(null);\n    setSelectedSpecialization('');\n    setPatientSearch('');\n    setDoctorSearch('');\n    onClose();\n  };\n\n  const filteredPatients = patients.filter((patient: any) =>\n    `${patient.first_name} ${patient.last_name}`.toLowerCase().includes(patientSearch.toLowerCase()) ||\n    patient.patient_id.toLowerCase().includes(patientSearch.toLowerCase()) ||\n    patient.phone.includes(patientSearch)\n  );\n\n  const filteredDoctors = doctors.filter((doctor: Doctor) => {\n    const matchesSearch = doctor.user?.name?.toLowerCase().includes(doctorSearch.toLowerCase()) ||\n      doctor.license_number.toLowerCase().includes(doctorSearch.toLowerCase());\n    const matchesSpecialization = !selectedSpecialization || doctor.specialization === selectedSpecialization;\n    return matchesSearch && matchesSpecialization;\n  });\n\n  const getMinDate = () => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  };\n\n  const getMaxDate = () => {\n    const maxDate = new Date();\n    maxDate.setMonth(maxDate.getMonth() + 3); // 3 months ahead\n    return maxDate.toISOString().split('T')[0];\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 backdrop-blur-sm\">\n      <div className=\"flex min-h-screen items-center justify-center p-4\">\n        <div className=\"w-full max-w-4xl bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden\">\n          {/* Header */}\n          <div className=\"bg-gradient-to-r from-orange-500 to-orange-600 px-8 py-6 text-white\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h2 className=\"text-2xl font-bold\">Book New Appointment</h2>\n                <p className=\"text-orange-100 mt-1\">Schedule a consultation with our doctors</p>\n              </div>\n              <button\n                onClick={handleClose}\n                className=\"p-2 hover:bg-white hover:bg-opacity-20 rounded-xl transition-colors\"\n              >\n                <X size={24} />\n              </button>\n            </div>\n\n            {/* Progress Steps */}\n            <div className=\"flex items-center mt-6 space-x-4\">\n              {[1, 2, 3, 4].map((stepNumber) => (\n                <div key={stepNumber} className=\"flex items-center\">\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${\n                    step >= stepNumber \n                      ? 'bg-white text-orange-600' \n                      : 'bg-orange-400 text-white'\n                  }`}>\n                    {step > stepNumber ? <CheckCircle size={16} /> : stepNumber}\n                  </div>\n                  {stepNumber < 4 && (\n                    <div className={`w-12 h-0.5 mx-2 ${\n                      step > stepNumber ? 'bg-white' : 'bg-orange-400'\n                    }`} />\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-8\">\n            {error && (\n              <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center\">\n                <AlertCircle className=\"text-red-500 mr-3\" size={20} />\n                <span className=\"text-red-700\">{error}</span>\n              </div>\n            )}\n\n            {success && (\n              <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center\">\n                <CheckCircle className=\"text-green-500 mr-3\" size={20} />\n                <span className=\"text-green-700\">{success}</span>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {/* Step 1: Select Patient */}\n              {step === 1 && (\n                <div className=\"space-y-6\">\n                  <div className=\"text-center\">\n                    <User className=\"mx-auto h-12 w-12 text-orange-500 mb-4\" />\n                    <h3 className=\"text-xl font-semibold text-gray-900\">Select Patient</h3>\n                    <p className=\"text-gray-500 mt-2\">Choose the patient for this appointment</p>\n                  </div>\n\n                  <div className=\"relative\">\n                    <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400\" size={20} />\n                    <input\n                      type=\"text\"\n                      placeholder=\"Search by name, patient ID, or phone...\"\n                      value={patientSearch}\n                      onChange={(e) => setPatientSearch(e.target.value)}\n                      className=\"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                    />\n                  </div>\n\n                  <div className=\"max-h-64 overflow-y-auto space-y-2\">\n                    {filteredPatients.map((patient) => (\n                      <div\n                        key={patient.id}\n                        onClick={() => {\n                          setSelectedPatient(patient);\n                          setFormData(prev => ({ ...prev, patientId: patient.id }));\n                        }}\n                        className={`p-4 border rounded-xl cursor-pointer transition-all ${\n                          selectedPatient?.id === patient.id\n                            ? 'border-orange-500 bg-orange-50'\n                            : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div>\n                            <h4 className=\"font-medium text-gray-900\">\n                              {patient.first_name} {patient.last_name}\n                            </h4>\n                            <p className=\"text-sm text-gray-500\">ID: {patient.patient_id}</p>\n                            <p className=\"text-sm text-gray-500\">Phone: {patient.phone}</p>\n                          </div>\n                          {selectedPatient?.id === patient.id && (\n                            <CheckCircle className=\"text-orange-500\" size={20} />\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"flex justify-end\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(2)}\n                      disabled={!selectedPatient}\n                      className=\"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    >\n                      Next: Select Doctor\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Step 2: Select Doctor */}\n              {step === 2 && (\n                <div className=\"space-y-6\">\n                  <div className=\"text-center\">\n                    <Stethoscope className=\"mx-auto h-12 w-12 text-orange-500 mb-4\" />\n                    <h3 className=\"text-xl font-semibold text-gray-900\">Select Doctor</h3>\n                    <p className=\"text-gray-500 mt-2\">Choose a doctor for the consultation</p>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"relative\">\n                      <Search className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400\" size={20} />\n                      <input\n                        type=\"text\"\n                        placeholder=\"Search doctors...\"\n                        value={doctorSearch}\n                        onChange={(e) => setDoctorSearch(e.target.value)}\n                        className=\"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                      />\n                    </div>\n\n                    <select\n                      value={selectedSpecialization}\n                      onChange={(e) => setSelectedSpecialization(e.target.value)}\n                      className=\"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                    >\n                      <option value=\"\">All Specializations</option>\n                      {specializations.map((spec) => (\n                        <option key={spec} value={spec}>{spec}</option>\n                      ))}\n                    </select>\n                  </div>\n\n                  <div className=\"max-h-64 overflow-y-auto space-y-3\">\n                    {filteredDoctors.map((doctor) => (\n                      <div\n                        key={doctor.id}\n                        onClick={() => {\n                          setSelectedDoctor(doctor);\n                          setFormData(prev => ({ ...prev, doctorId: doctor.id }));\n                        }}\n                        className={`p-4 border rounded-xl cursor-pointer transition-all ${\n                          selectedDoctor?.id === doctor.id\n                            ? 'border-orange-500 bg-orange-50'\n                            : 'border-gray-200 hover:border-gray-300 hover:bg-gray-50'\n                        }`}\n                      >\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex-1\">\n                            <h4 className=\"font-medium text-gray-900\">{doctor.user?.name || 'Unknown Doctor'}</h4>\n                            <p className=\"text-sm text-gray-600\">{doctor.specialization}</p>\n                            <p className=\"text-sm text-gray-500\">{doctor.qualification}</p>\n                            <div className=\"flex items-center mt-2 space-x-4\">\n                              <div className=\"flex items-center text-sm text-gray-500\">\n                                <MapPin size={14} className=\"mr-1\" />\n                                {doctor.room_number}\n                              </div>\n                              <div className=\"flex items-center text-sm text-gray-500\">\n                                <DollarSign size={14} className=\"mr-1\" />\n                                {doctor.consultation_fee}\n                              </div>\n                            </div>\n                          </div>\n                          {selectedDoctor?.id === doctor.id && (\n                            <CheckCircle className=\"text-orange-500\" size={20} />\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n\n                  <div className=\"flex justify-between\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(1)}\n                      className=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors\"\n                    >\n                      Back\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(3)}\n                      disabled={!selectedDoctor}\n                      className=\"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    >\n                      Next: Select Date & Time\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Step 3: Select Date & Time */}\n              {step === 3 && (\n                <div className=\"space-y-6\">\n                  <div className=\"text-center\">\n                    <Calendar className=\"mx-auto h-12 w-12 text-orange-500 mb-4\" />\n                    <h3 className=\"text-xl font-semibold text-gray-900\">Select Date & Time</h3>\n                    <p className=\"text-gray-500 mt-2\">Choose your preferred appointment slot</p>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Appointment Date\n                      </label>\n                      <input\n                        type=\"date\"\n                        min={getMinDate()}\n                        max={getMaxDate()}\n                        value={formData.appointmentDate}\n                        onChange={(e) => setFormData(prev => ({ ...prev, appointmentDate: e.target.value }))}\n                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                        required\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Appointment Type\n                      </label>\n                      <select\n                        value={formData.type}\n                        onChange={(e) => setFormData(prev => ({ ...prev, type: e.target.value as any }))}\n                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                      >\n                        <option value=\"consultation\">Consultation</option>\n                        <option value=\"follow_up\">Follow-up</option>\n                        <option value=\"routine_checkup\">Routine Checkup</option>\n                        <option value=\"emergency\">Emergency</option>\n                      </select>\n                    </div>\n                  </div>\n\n                  {formData.appointmentDate && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                        Available Time Slots\n                      </label>\n                      <div className=\"grid grid-cols-3 md:grid-cols-4 gap-3\">\n                        {availableSlots.map((slot) => (\n                          <button\n                            key={slot.time}\n                            type=\"button\"\n                            disabled={!slot.available}\n                            onClick={() => setFormData(prev => ({ ...prev, appointmentTime: slot.time }))}\n                            className={`p-3 text-sm font-medium rounded-xl transition-all ${\n                              formData.appointmentTime === slot.time\n                                ? 'bg-orange-500 text-white'\n                                : slot.available\n                                ? 'bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200'\n                                : 'bg-gray-100 text-gray-400 cursor-not-allowed'\n                            }`}\n                          >\n                            <Clock size={14} className=\"inline mr-1\" />\n                            {slot.time}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"flex justify-between\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(2)}\n                      className=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors\"\n                    >\n                      Back\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(4)}\n                      disabled={!formData.appointmentDate || !formData.appointmentTime}\n                      className=\"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    >\n                      Next: Additional Details\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Step 4: Additional Details */}\n              {step === 4 && (\n                <div className=\"space-y-6\">\n                  <div className=\"text-center\">\n                    <CheckCircle className=\"mx-auto h-12 w-12 text-orange-500 mb-4\" />\n                    <h3 className=\"text-xl font-semibold text-gray-900\">Additional Details</h3>\n                    <p className=\"text-gray-500 mt-2\">Provide any additional information</p>\n                  </div>\n\n                  <div className=\"space-y-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Symptoms or Chief Complaint\n                      </label>\n                      <textarea\n                        value={formData.symptoms}\n                        onChange={(e) => setFormData(prev => ({ ...prev, symptoms: e.target.value }))}\n                        rows={3}\n                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                        placeholder=\"Describe the main symptoms or reason for visit...\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Additional Notes\n                      </label>\n                      <textarea\n                        value={formData.notes}\n                        onChange={(e) => setFormData(prev => ({ ...prev, notes: e.target.value }))}\n                        rows={2}\n                        className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                        placeholder=\"Any additional information or special requests...\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Appointment Summary */}\n                  <div className=\"bg-gray-50 p-6 rounded-xl\">\n                    <h4 className=\"font-medium text-gray-900 mb-4\">Appointment Summary</h4>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Patient:</span>\n                        <span className=\"font-medium\">\n                          {selectedPatient?.first_name} {selectedPatient?.last_name}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Doctor:</span>\n                        <span className=\"font-medium\">{selectedDoctor?.user?.name || 'Unknown Doctor'}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Specialization:</span>\n                        <span className=\"font-medium\">{selectedDoctor?.specialization}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Date & Time:</span>\n                        <span className=\"font-medium\">\n                          {new Date(formData.appointmentDate).toLocaleDateString()} at {formData.appointmentTime}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Type:</span>\n                        <span className=\"font-medium capitalize\">{formData.type.replace('_', ' ')}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600\">Consultation Fee:</span>\n                        <span className=\"font-medium\">{selectedDoctor?.consultation_fee}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-between\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setStep(3)}\n                      className=\"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors\"\n                    >\n                      Back\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={loading}\n                      className=\"px-8 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\n                    >\n                      {loading ? (\n                        <>\n                          <Loader2 className=\"animate-spin mr-2\" size={20} />\n                          Booking...\n                        </>\n                      ) : (\n                        <>\n                          <Save className=\"mr-2\" size={20} />\n                          Book Appointment\n                        </>\n                      )}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AppointmentBookingForm;"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AAnBA;;;;;;;AA4CA,MAAM,yBAAgE,CAAC,EACrE,MAAM,EACN,OAAO,EACP,SAAS,EACT,SAAS,EACT,QAAQ,EACT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,YAAY;IACZ,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAmB;QACxD,WAAW,aAAa;QACxB,UAAU,YAAY;QACtB,iBAAiB;QACjB,iBAAiB;QACjB,iBAAiB;QACjB,MAAM;QACN,UAAU;QACV,OAAO;IACT;IAEA,cAAc;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IACnE,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAc,EAAE;IACnE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACpE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB;IAEvE,gBAAgB;IAChB,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ;YACV;QACF;IACF,GAAG;QAAC;KAAO;IAEX,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,SAAS,QAAQ,IAAI,SAAS,eAAe,EAAE;YACjD;QACF;IACF,GAAG;QAAC,SAAS,QAAQ;QAAE,SAAS,eAAe;KAAC;IAEhD,MAAM,kBAAkB;QACtB,IAAI;YACF,WAAW;YACX,MAAM,CAAC,cAAc,aAAa,oBAAoB,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACzE,CAAA,GAAA,4HAAA,CAAA,iBAAc,AAAD,EAAE;oBAAE,OAAO;gBAAI;gBAC5B,CAAA,GAAA,2HAAA,CAAA,gBAAa,AAAD;gBACZ,CAAA,GAAA,2HAAA,CAAA,wBAAqB,AAAD;aACrB;YAED,YAAY,aAAa,QAAQ,IAAI,EAAE;YACvC,WAAW,YAAY,OAAO,IAAI,EAAE;YACpC,mBAAmB,uBAAuB,EAAE;YAE5C,iCAAiC;YACjC,IAAI,WAAW;gBACb,MAAM,UAAU,aAAa,QAAQ,EAAE,KAAK,CAAA,IAAK,EAAE,EAAE,KAAK;gBAC1D,IAAI,SAAS;oBACX,mBAAmB;gBACrB;YACF;YAEA,gCAAgC;YAChC,IAAI,UAAU;gBACZ,MAAM,SAAS,YAAY,OAAO,EAAE,KAAK,CAAC,IAAc,EAAE,EAAE,KAAK;gBACjE,IAAI,QAAQ;oBACV,kBAAkB;oBAClB,0BAA0B,OAAO,cAAc;gBACjD;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,qBAAqB;QACzB,IAAI;YACF,MAAM,QAAQ,MAAM,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAClC,SAAS,QAAQ,EACjB,SAAS,eAAe;YAE1B,kBAAkB,MAAM,GAAG,CAAC,CAAC,OAAc,CAAC;oBAC1C,MAAM,KAAK,IAAI;oBACf,WAAW,KAAK,SAAS;gBAC3B,CAAC;QACH,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,kCAAkC;YAChD,SAAS;QACX;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,SAAS,SAAS,IAAI,CAAC,SAAS,QAAQ,IAAI,CAAC,SAAS,eAAe,IAAI,CAAC,SAAS,eAAe,EAAE;YACvG,SAAS;YACT;QACF;QAEA,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,cAAc,MAAM,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE;YAC5C,WAAW;YAEX,WAAW;gBACT,YAAY;gBACZ;YACF,GAAG;QACL,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,cAAc;QAClB,QAAQ;QACR,YAAY;YACV,WAAW;YACX,UAAU;YACV,iBAAiB;YACjB,iBAAiB;YACjB,iBAAiB;YACjB,MAAM;YACN,UAAU;YACV,OAAO;QACT;QACA,SAAS;QACT,WAAW;QACX,mBAAmB;QACnB,kBAAkB;QAClB,0BAA0B;QAC1B,iBAAiB;QACjB,gBAAgB;QAChB;IACF;IAEA,MAAM,mBAAmB,SAAS,MAAM,CAAC,CAAC,UACxC,GAAG,QAAQ,UAAU,CAAC,CAAC,EAAE,QAAQ,SAAS,EAAE,CAAC,WAAW,GAAG,QAAQ,CAAC,cAAc,WAAW,OAC7F,QAAQ,UAAU,CAAC,WAAW,GAAG,QAAQ,CAAC,cAAc,WAAW,OACnE,QAAQ,KAAK,CAAC,QAAQ,CAAC;IAGzB,MAAM,kBAAkB,QAAQ,MAAM,CAAC,CAAC;QACtC,MAAM,gBAAgB,OAAO,IAAI,EAAE,MAAM,cAAc,SAAS,aAAa,WAAW,OACtF,OAAO,cAAc,CAAC,WAAW,GAAG,QAAQ,CAAC,aAAa,WAAW;QACvE,MAAM,wBAAwB,CAAC,0BAA0B,OAAO,cAAc,KAAK;QACnF,OAAO,iBAAiB;IAC1B;IAEA,MAAM,aAAa;QACjB,MAAM,QAAQ,IAAI;QAClB,OAAO,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAC1C;IAEA,MAAM,aAAa;QACjB,MAAM,UAAU,IAAI;QACpB,QAAQ,QAAQ,CAAC,QAAQ,QAAQ,KAAK,IAAI,iBAAiB;QAC3D,OAAO,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;IAC5C;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAqB;;;;;;0DACnC,8OAAC;gDAAE,WAAU;0DAAuB;;;;;;;;;;;;kDAEtC,8OAAC;wCACC,SAAS;wCACT,WAAU;kDAEV,cAAA,8OAAC,4LAAA,CAAA,IAAC;4CAAC,MAAM;;;;;;;;;;;;;;;;;0CAKb,8OAAC;gCAAI,WAAU;0CACZ;oCAAC;oCAAG;oCAAG;oCAAG;iCAAE,CAAC,GAAG,CAAC,CAAC,2BACjB,8OAAC;wCAAqB,WAAU;;0DAC9B,8OAAC;gDAAI,WAAW,CAAC,0EAA0E,EACzF,QAAQ,aACJ,6BACA,4BACJ;0DACC,OAAO,2BAAa,8OAAC,2NAAA,CAAA,cAAW;oDAAC,MAAM;;;;;2DAAS;;;;;;4CAElD,aAAa,mBACZ,8OAAC;gDAAI,WAAW,CAAC,gBAAgB,EAC/B,OAAO,aAAa,aAAa,iBACjC;;;;;;;uCAXI;;;;;;;;;;;;;;;;kCAmBhB,8OAAC;wBAAI,WAAU;;4BACZ,uBACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,oNAAA,CAAA,cAAW;wCAAC,WAAU;wCAAoB,MAAM;;;;;;kDACjD,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;;4BAInC,yBACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,2NAAA,CAAA,cAAW;wCAAC,WAAU;wCAAsB,MAAM;;;;;;kDACnD,8OAAC;wCAAK,WAAU;kDAAkB;;;;;;;;;;;;0CAItC,8OAAC;gCAAK,UAAU;gCAAc,WAAU;;oCAErC,SAAS,mBACR,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,kMAAA,CAAA,OAAI;wDAAC,WAAU;;;;;;kEAChB,8OAAC;wDAAG,WAAU;kEAAsC;;;;;;kEACpD,8OAAC;wDAAE,WAAU;kEAAqB;;;;;;;;;;;;0DAGpC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,sMAAA,CAAA,SAAM;wDAAC,WAAU;wDAAmE,MAAM;;;;;;kEAC3F,8OAAC;wDACC,MAAK;wDACL,aAAY;wDACZ,OAAO;wDACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;wDAChD,WAAU;;;;;;;;;;;;0DAId,8OAAC;gDAAI,WAAU;0DACZ,iBAAiB,GAAG,CAAC,CAAC,wBACrB,8OAAC;wDAEC,SAAS;4DACP,mBAAmB;4DACnB,YAAY,CAAA,OAAQ,CAAC;oEAAE,GAAG,IAAI;oEAAE,WAAW,QAAQ,EAAE;gEAAC,CAAC;wDACzD;wDACA,WAAW,CAAC,oDAAoD,EAC9D,iBAAiB,OAAO,QAAQ,EAAE,GAC9B,mCACA,0DACJ;kEAEF,cAAA,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;;sFACC,8OAAC;4EAAG,WAAU;;gFACX,QAAQ,UAAU;gFAAC;gFAAE,QAAQ,SAAS;;;;;;;sFAEzC,8OAAC;4EAAE,WAAU;;gFAAwB;gFAAK,QAAQ,UAAU;;;;;;;sFAC5D,8OAAC;4EAAE,WAAU;;gFAAwB;gFAAQ,QAAQ,KAAK;;;;;;;;;;;;;gEAE3D,iBAAiB,OAAO,QAAQ,EAAE,kBACjC,8OAAC,2NAAA,CAAA,cAAW;oEAAC,WAAU;oEAAkB,MAAM;;;;;;;;;;;;uDApB9C,QAAQ,EAAE;;;;;;;;;;0DA2BrB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,QAAQ;oDACvB,UAAU,CAAC;oDACX,WAAU;8DACX;;;;;;;;;;;;;;;;;oCAQN,SAAS,mBACR,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,gNAAA,CAAA,cAAW;wDAAC,WAAU;;;;;;kEACvB,8OAAC;wDAAG,WAAU;kEAAsC;;;;;;kEACpD,8OAAC;wDAAE,WAAU;kEAAqB;;;;;;;;;;;;0DAGpC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,sMAAA,CAAA,SAAM;gEAAC,WAAU;gEAAmE,MAAM;;;;;;0EAC3F,8OAAC;gEACC,MAAK;gEACL,aAAY;gEACZ,OAAO;gEACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;gEAC/C,WAAU;;;;;;;;;;;;kEAId,8OAAC;wDACC,OAAO;wDACP,UAAU,CAAC,IAAM,0BAA0B,EAAE,MAAM,CAAC,KAAK;wDACzD,WAAU;;0EAEV,8OAAC;gEAAO,OAAM;0EAAG;;;;;;4DAChB,gBAAgB,GAAG,CAAC,CAAC,qBACpB,8OAAC;oEAAkB,OAAO;8EAAO;mEAApB;;;;;;;;;;;;;;;;;0DAKnB,8OAAC;gDAAI,WAAU;0DACZ,gBAAgB,GAAG,CAAC,CAAC,uBACpB,8OAAC;wDAEC,SAAS;4DACP,kBAAkB;4DAClB,YAAY,CAAA,OAAQ,CAAC;oEAAE,GAAG,IAAI;oEAAE,UAAU,OAAO,EAAE;gEAAC,CAAC;wDACvD;wDACA,WAAW,CAAC,oDAAoD,EAC9D,gBAAgB,OAAO,OAAO,EAAE,GAC5B,mCACA,0DACJ;kEAEF,cAAA,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAI,WAAU;;sFACb,8OAAC;4EAAG,WAAU;sFAA6B,OAAO,IAAI,EAAE,QAAQ;;;;;;sFAChE,8OAAC;4EAAE,WAAU;sFAAyB,OAAO,cAAc;;;;;;sFAC3D,8OAAC;4EAAE,WAAU;sFAAyB,OAAO,aAAa;;;;;;sFAC1D,8OAAC;4EAAI,WAAU;;8FACb,8OAAC;oFAAI,WAAU;;sGACb,8OAAC,0MAAA,CAAA,SAAM;4FAAC,MAAM;4FAAI,WAAU;;;;;;wFAC3B,OAAO,WAAW;;;;;;;8FAErB,8OAAC;oFAAI,WAAU;;sGACb,8OAAC,kNAAA,CAAA,aAAU;4FAAC,MAAM;4FAAI,WAAU;;;;;;wFAAS;wFACvC,OAAO,gBAAgB;;;;;;;;;;;;;;;;;;;gEAI9B,gBAAgB,OAAO,OAAO,EAAE,kBAC/B,8OAAC,2NAAA,CAAA,cAAW;oEAAC,WAAU;oEAAkB,MAAM;;;;;;;;;;;;uDA5B9C,OAAO,EAAE;;;;;;;;;;0DAmCpB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDACC,MAAK;wDACL,SAAS,IAAM,QAAQ;wDACvB,WAAU;kEACX;;;;;;kEAGD,8OAAC;wDACC,MAAK;wDACL,SAAS,IAAM,QAAQ;wDACvB,UAAU,CAAC;wDACX,WAAU;kEACX;;;;;;;;;;;;;;;;;;oCAQN,SAAS,mBACR,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,0MAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;;kEACpB,8OAAC;wDAAG,WAAU;kEAAsC;;;;;;kEACpD,8OAAC;wDAAE,WAAU;kEAAqB;;;;;;;;;;;;0DAGpC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;;0EACC,8OAAC;gEAAM,WAAU;0EAA+C;;;;;;0EAGhE,8OAAC;gEACC,MAAK;gEACL,KAAK;gEACL,KAAK;gEACL,OAAO,SAAS,eAAe;gEAC/B,UAAU,CAAC,IAAM,YAAY,CAAA,OAAQ,CAAC;4EAAE,GAAG,IAAI;4EAAE,iBAAiB,EAAE,MAAM,CAAC,KAAK;wEAAC,CAAC;gEAClF,WAAU;gEACV,QAAQ;;;;;;;;;;;;kEAIZ,8OAAC;;0EACC,8OAAC;gEAAM,WAAU;0EAA+C;;;;;;0EAGhE,8OAAC;gEACC,OAAO,SAAS,IAAI;gEACpB,UAAU,CAAC,IAAM,YAAY,CAAA,OAAQ,CAAC;4EAAE,GAAG,IAAI;4EAAE,MAAM,EAAE,MAAM,CAAC,KAAK;wEAAQ,CAAC;gEAC9E,WAAU;;kFAEV,8OAAC;wEAAO,OAAM;kFAAe;;;;;;kFAC7B,8OAAC;wEAAO,OAAM;kFAAY;;;;;;kFAC1B,8OAAC;wEAAO,OAAM;kFAAkB;;;;;;kFAChC,8OAAC;wEAAO,OAAM;kFAAY;;;;;;;;;;;;;;;;;;;;;;;;4CAK/B,SAAS,eAAe,kBACvB,8OAAC;;kEACC,8OAAC;wDAAM,WAAU;kEAA+C;;;;;;kEAGhE,8OAAC;wDAAI,WAAU;kEACZ,eAAe,GAAG,CAAC,CAAC,qBACnB,8OAAC;gEAEC,MAAK;gEACL,UAAU,CAAC,KAAK,SAAS;gEACzB,SAAS,IAAM,YAAY,CAAA,OAAQ,CAAC;4EAAE,GAAG,IAAI;4EAAE,iBAAiB,KAAK,IAAI;wEAAC,CAAC;gEAC3E,WAAW,CAAC,kDAAkD,EAC5D,SAAS,eAAe,KAAK,KAAK,IAAI,GAClC,6BACA,KAAK,SAAS,GACd,sEACA,gDACJ;;kFAEF,8OAAC,oMAAA,CAAA,QAAK;wEAAC,MAAM;wEAAI,WAAU;;;;;;oEAC1B,KAAK,IAAI;;+DAbL,KAAK,IAAI;;;;;;;;;;;;;;;;0DAoBxB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDACC,MAAK;wDACL,SAAS,IAAM,QAAQ;wDACvB,WAAU;kEACX;;;;;;kEAGD,8OAAC;wDACC,MAAK;wDACL,SAAS,IAAM,QAAQ;wDACvB,UAAU,CAAC,SAAS,eAAe,IAAI,CAAC,SAAS,eAAe;wDAChE,WAAU;kEACX;;;;;;;;;;;;;;;;;;oCAQN,SAAS,mBACR,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,2NAAA,CAAA,cAAW;wDAAC,WAAU;;;;;;kEACvB,8OAAC;wDAAG,WAAU;kEAAsC;;;;;;kEACpD,8OAAC;wDAAE,WAAU;kEAAqB;;;;;;;;;;;;0DAGpC,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;;0EACC,8OAAC;gEAAM,WAAU;0EAA+C;;;;;;0EAGhE,8OAAC;gEACC,OAAO,SAAS,QAAQ;gEACxB,UAAU,CAAC,IAAM,YAAY,CAAA,OAAQ,CAAC;4EAAE,GAAG,IAAI;4EAAE,UAAU,EAAE,MAAM,CAAC,KAAK;wEAAC,CAAC;gEAC3E,MAAM;gEACN,WAAU;gEACV,aAAY;;;;;;;;;;;;kEAIhB,8OAAC;;0EACC,8OAAC;gEAAM,WAAU;0EAA+C;;;;;;0EAGhE,8OAAC;gEACC,OAAO,SAAS,KAAK;gEACrB,UAAU,CAAC,IAAM,YAAY,CAAA,OAAQ,CAAC;4EAAE,GAAG,IAAI;4EAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wEAAC,CAAC;gEACxE,MAAM;gEACN,WAAU;gEACV,aAAY;;;;;;;;;;;;;;;;;;0DAMlB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAG,WAAU;kEAAiC;;;;;;kEAC/C,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAK,WAAU;kFAAgB;;;;;;kFAChC,8OAAC;wEAAK,WAAU;;4EACb,iBAAiB;4EAAW;4EAAE,iBAAiB;;;;;;;;;;;;;0EAGpD,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAK,WAAU;kFAAgB;;;;;;kFAChC,8OAAC;wEAAK,WAAU;kFAAe,gBAAgB,MAAM,QAAQ;;;;;;;;;;;;0EAE/D,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAK,WAAU;kFAAgB;;;;;;kFAChC,8OAAC;wEAAK,WAAU;kFAAe,gBAAgB;;;;;;;;;;;;0EAEjD,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAK,WAAU;kFAAgB;;;;;;kFAChC,8OAAC;wEAAK,WAAU;;4EACb,IAAI,KAAK,SAAS,eAAe,EAAE,kBAAkB;4EAAG;4EAAK,SAAS,eAAe;;;;;;;;;;;;;0EAG1F,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAK,WAAU;kFAAgB;;;;;;kFAChC,8OAAC;wEAAK,WAAU;kFAA0B,SAAS,IAAI,CAAC,OAAO,CAAC,KAAK;;;;;;;;;;;;0EAEvE,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAK,WAAU;kFAAgB;;;;;;kFAChC,8OAAC;wEAAK,WAAU;;4EAAc;4EAAE,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;0DAKtD,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDACC,MAAK;wDACL,SAAS,IAAM,QAAQ;wDACvB,WAAU;kEACX;;;;;;kEAGD,8OAAC;wDACC,MAAK;wDACL,UAAU;wDACV,WAAU;kEAET,wBACC;;8EACE,8OAAC,iNAAA,CAAA,UAAO;oEAAC,WAAU;oEAAoB,MAAM;;;;;;gEAAM;;yFAIrD;;8EACE,8OAAC,kMAAA,CAAA,OAAI;oEAAC,WAAU;oEAAO,MAAM;;;;;;gEAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAc7D;uCAEe","debugId":null}},
    {"offset": {"line": 2924, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/components/AppointmentManagement.tsx"],"sourcesContent":["'use client';\nimport React, { useState, useEffect } from 'react';\nimport {\n  Calendar,\n  Clock,\n  User,\n  Search,\n  Filter,\n  Plus,\n  Eye,\n  Edit,\n  Trash2,\n  CheckCircle,\n  XCircle,\n  AlertCircle,\n  Phone,\n  Mail,\n  MapPin,\n  Stethoscope,\n  FileText,\n  MoreVertical,\n  RefreshCw,\n  Download,\n  ChevronLeft,\n  ChevronRight\n} from 'lucide-react';\nimport AppointmentBookingForm from './AppointmentBookingForm';\nimport { getAppointments, updateAppointmentStatus, cancelAppointment, Appointment } from '../src/lib/appointmentService';\nimport { getAllDoctors } from '../src/lib/doctorService';\nimport { getAllPatients } from '../src/lib/patientService';\n\n// Using Appointment interface from appointmentService\n\nconst AppointmentManagement: React.FC = () => {\n  const [appointments, setAppointments] = useState<Appointment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [showBookingForm, setShowBookingForm] = useState(false);\n  \n  // Filters and search\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [dateFilter, setDateFilter] = useState('today');\n  const [doctorFilter, setDoctorFilter] = useState('');\n  \n  // Pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage] = useState(10);\n  const [totalItems, setTotalItems] = useState(0);\n  \n  // Data for filters\n  const [doctors, setDoctors] = useState<any[]>([]);\n  \n  // Selected appointment for actions\n  const [selectedAppointment, setSelectedAppointment] = useState<Appointment | null>(null);\n  const [showActionMenu, setShowActionMenu] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadAppointments();\n    loadDoctors();\n  }, [currentPage, statusFilter, dateFilter, doctorFilter, searchTerm]);\n\n  const loadAppointments = async () => {\n    try {\n      setLoading(true);\n      setError('');\n      \n      const filters: any = {\n        page: currentPage,\n        limit: itemsPerPage\n      };\n      \n      if (statusFilter !== 'all') {\n        filters.status = statusFilter;\n      }\n      \n      if (doctorFilter) {\n        filters.doctorId = doctorFilter;\n      }\n      \n      if (searchTerm) {\n        filters.searchTerm = searchTerm;\n      }\n      \n      // Date filter logic\n      const today = new Date();\n      if (dateFilter === 'today') {\n        filters.date = today.toISOString().split('T')[0];\n      } else if (dateFilter === 'week') {\n        const weekStart = new Date(today);\n        weekStart.setDate(today.getDate() - today.getDay());\n        filters.dateFrom = weekStart.toISOString().split('T')[0];\n        \n        const weekEnd = new Date(weekStart);\n        weekEnd.setDate(weekStart.getDate() + 6);\n        filters.dateTo = weekEnd.toISOString().split('T')[0];\n      } else if (dateFilter === 'month') {\n        const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);\n        const monthEnd = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n        filters.dateFrom = monthStart.toISOString().split('T')[0];\n        filters.dateTo = monthEnd.toISOString().split('T')[0];\n      }\n      \n      const response = await getAppointments(filters);\n      setAppointments(response.appointments || []);\n      setTotalItems(response.total || 0);\n    } catch (err: any) {\n      console.error('Error loading appointments:', err);\n      setError('Failed to load appointments. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const loadDoctors = async () => {\n    try {\n      const response = await getAllDoctors();\n      setDoctors(response.doctors || []);\n    } catch (err) {\n      console.error('Error loading doctors:', err);\n    }\n  };\n\n  const handleStatusUpdate = async (appointmentId: string, newStatus: 'confirmed' | 'completed' | 'cancelled' | 'scheduled' | 'in_progress' | 'rescheduled') => {\n    try {\n      await updateAppointmentStatus(appointmentId, newStatus);\n      await loadAppointments();\n      setShowActionMenu(null);\n    } catch (err: any) {\n      console.error('Error updating appointment status:', err);\n      setError('Failed to update appointment status.');\n    }\n  };\n\n  const handleCancelAppointment = async (appointmentId: string) => {\n    if (!confirm('Are you sure you want to cancel this appointment?')) {\n      return;\n    }\n    \n    try {\n      await cancelAppointment(appointmentId, 'Cancelled by staff');\n      await loadAppointments();\n      setShowActionMenu(null);\n    } catch (err: any) {\n      console.error('Error cancelling appointment:', err);\n      setError('Failed to cancel appointment.');\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'confirmed':\n        return 'bg-blue-100 text-blue-800 border-blue-200';\n      case 'completed':\n        return 'bg-green-100 text-green-800 border-green-200';\n      case 'cancelled':\n        return 'bg-red-100 text-red-800 border-red-200';\n      case 'no_show':\n        return 'bg-gray-100 text-gray-800 border-gray-200';\n      case 'rescheduled':\n        return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n      default:\n        return 'bg-orange-100 text-orange-800 border-orange-200';\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status.toLowerCase()) {\n      case 'confirmed':\n        return <CheckCircle size={14} />;\n      case 'completed':\n        return <CheckCircle size={14} />;\n      case 'cancelled':\n        return <XCircle size={14} />;\n      case 'no_show':\n        return <AlertCircle size={14} />;\n      case 'rescheduled':\n        return <RefreshCw size={14} />;\n      default:\n        return <Clock size={14} />;\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      weekday: 'short',\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    });\n  };\n\n  const formatTime = (timeString: string) => {\n    return new Date(`2000-01-01T${timeString}`).toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    });\n  };\n\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n\n  const getAppointmentStats = () => {\n    const today = new Date().toISOString().split('T')[0];\n    const todayAppointments = appointments.filter(apt => apt.appointment_date === today);\n    \n    return {\n      total: appointments.length,\n      today: todayAppointments.length,\n      confirmed: appointments.filter(apt => apt.status === 'confirmed').length,\n      completed: appointments.filter(apt => apt.status === 'completed').length,\n      cancelled: appointments.filter(apt => apt.status === 'cancelled').length\n    };\n  };\n\n  const stats = getAppointmentStats();\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            <div className=\"flex items-center\">\n              <Calendar className=\"h-8 w-8 text-orange-500 mr-3\" />\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">Appointment Management</h1>\n                <p className=\"text-sm text-gray-500\">Manage patient appointments and schedules</p>\n              </div>\n            </div>\n            <button\n              onClick={() => setShowBookingForm(true)}\n              className=\"inline-flex items-center px-4 py-2 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors shadow-sm\"\n            >\n              <Plus size={20} className=\"mr-2\" />\n              New Appointment\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8\">\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 bg-blue-100 rounded-xl\">\n                <Calendar className=\"h-6 w-6 text-blue-600\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Total</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.total}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 bg-orange-100 rounded-xl\">\n                <Clock className=\"h-6 w-6 text-orange-600\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Today</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.today}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 bg-blue-100 rounded-xl\">\n                <CheckCircle className=\"h-6 w-6 text-blue-600\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Confirmed</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.confirmed}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 bg-green-100 rounded-xl\">\n                <CheckCircle className=\"h-6 w-6 text-green-600\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Completed</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.completed}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 bg-red-100 rounded-xl\">\n                <XCircle className=\"h-6 w-6 text-red-600\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Cancelled</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{stats.cancelled}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filters */}\n        <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={20} />\n              <input\n                type=\"text\"\n                placeholder=\"Search appointments...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n              />\n            </div>\n            \n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n            >\n              <option value=\"all\">All Status</option>\n              <option value=\"scheduled\">Scheduled</option>\n              <option value=\"confirmed\">Confirmed</option>\n              <option value=\"completed\">Completed</option>\n              <option value=\"cancelled\">Cancelled</option>\n              <option value=\"no_show\">No Show</option>\n            </select>\n            \n            <select\n              value={dateFilter}\n              onChange={(e) => setDateFilter(e.target.value)}\n              className=\"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n            >\n              <option value=\"all\">All Dates</option>\n              <option value=\"today\">Today</option>\n              <option value=\"week\">This Week</option>\n              <option value=\"month\">This Month</option>\n            </select>\n            \n            <select\n              value={doctorFilter}\n              onChange={(e) => setDoctorFilter(e.target.value)}\n              className=\"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n            >\n              <option value=\"\">All Doctors</option>\n              {doctors.map((doctor) => (\n                <option key={doctor.id} value={doctor.id}>\n                  {doctor.user?.name || 'Unknown Doctor'} - {doctor.specialization}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center\">\n            <AlertCircle className=\"text-red-500 mr-3\" size={20} />\n            <span className=\"text-red-700\">{error}</span>\n          </div>\n        )}\n\n        {/* Appointments Table */}\n        <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Patient\n                  </th>\n                  <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Doctor\n                  </th>\n                  <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Date & Time\n                  </th>\n                  <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Type\n                  </th>\n                  <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Fee\n                  </th>\n                  <th className=\"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {loading ? (\n                  <tr>\n                    <td colSpan={7} className=\"px-6 py-12 text-center\">\n                      <div className=\"flex items-center justify-center\">\n                        <RefreshCw className=\"animate-spin h-6 w-6 text-orange-500 mr-3\" />\n                        <span className=\"text-gray-500\">Loading appointments...</span>\n                      </div>\n                    </td>\n                  </tr>\n                ) : appointments.length === 0 ? (\n                  <tr>\n                    <td colSpan={7} className=\"px-6 py-12 text-center\">\n                      <Calendar className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                      <p className=\"text-gray-500\">No appointments found</p>\n                      <button\n                        onClick={() => setShowBookingForm(true)}\n                        className=\"mt-4 inline-flex items-center px-4 py-2 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors\"\n                      >\n                        <Plus size={16} className=\"mr-2\" />\n                        Book First Appointment\n                      </button>\n                    </td>\n                  </tr>\n                ) : (\n                  appointments.map((appointment) => (\n                    <tr key={appointment.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"flex items-center\">\n                          <div className=\"flex-shrink-0 h-10 w-10\">\n                            <div className=\"h-10 w-10 rounded-full bg-orange-100 flex items-center justify-center\">\n                              <User className=\"h-5 w-5 text-orange-600\" />\n                            </div>\n                          </div>\n                          <div className=\"ml-4\">\n                            <div className=\"text-sm font-medium text-gray-900\">\n                              {appointment.patient?.first_name} {appointment.patient?.last_name}\n                            </div>\n                            <div className=\"text-sm text-gray-500\">\n                              ID: {appointment.patient?.patient_id}\n                            </div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"flex items-center\">\n                          <div className=\"flex-shrink-0 h-10 w-10\">\n                            <div className=\"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center\">\n                              <Stethoscope className=\"h-5 w-5 text-blue-600\" />\n                            </div>\n                          </div>\n                          <div className=\"ml-4\">\n                            <div className=\"text-sm font-medium text-gray-900\">\n                              {appointment.doctor?.user?.name || 'Unknown Doctor'}\n                            </div>\n                            <div className=\"text-sm text-gray-500\">\n                              {appointment.doctor?.specialization}\n                            </div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-900\">\n                          {formatDate(appointment.appointment_date)}\n                        </div>\n                        <div className=\"text-sm text-gray-500\">\n                          {formatTime(appointment.appointment_time)}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize\">\n                          {appointment.type.replace('_', ' ')}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${getStatusColor(appointment.status)}`}>\n                          {getStatusIcon(appointment.status)}\n                          <span className=\"ml-1 capitalize\">{appointment.status.replace('_', ' ')}</span>\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {appointment.duration_minutes} mins\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                        <div className=\"relative\">\n                          <button\n                            onClick={() => setShowActionMenu(showActionMenu === appointment.id ? null : appointment.id)}\n                            className=\"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100\"\n                          >\n                            <MoreVertical size={16} />\n                          </button>\n                          \n                          {showActionMenu === appointment.id && (\n                            <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 z-10\">\n                              <div className=\"py-1\">\n                                <button\n                                  onClick={() => handleStatusUpdate(appointment.id, 'confirmed')}\n                                  className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                                >\n                                  <CheckCircle size={16} className=\"mr-3 text-green-500\" />\n                                  Confirm\n                                </button>\n                                <button\n                                  onClick={() => handleStatusUpdate(appointment.id, 'completed')}\n                                  className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50\"\n                                >\n                                  <CheckCircle size={16} className=\"mr-3 text-blue-500\" />\n                                  Mark Complete\n                                </button>\n                                <button\n                                  onClick={() => handleCancelAppointment(appointment.id)}\n                                  className=\"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\n                                >\n                                  <XCircle size={16} className=\"mr-3\" />\n                                  Cancel\n                                </button>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n          \n          {/* Pagination */}\n          {totalPages > 1 && (\n            <div className=\"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200\">\n              <div className=\"flex-1 flex justify-between sm:hidden\">\n                <button\n                  onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n                  disabled={currentPage === 1}\n                  className=\"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Previous\n                </button>\n                <button\n                  onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n                  disabled={currentPage === totalPages}\n                  className=\"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Next\n                </button>\n              </div>\n              <div className=\"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-700\">\n                    Showing <span className=\"font-medium\">{(currentPage - 1) * itemsPerPage + 1}</span> to{' '}\n                    <span className=\"font-medium\">\n                      {Math.min(currentPage * itemsPerPage, totalItems)}\n                    </span>{' '}\n                    of <span className=\"font-medium\">{totalItems}</span> results\n                  </p>\n                </div>\n                <div>\n                  <nav className=\"relative z-0 inline-flex rounded-md shadow-sm -space-x-px\" aria-label=\"Pagination\">\n                    <button\n                      onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n                      disabled={currentPage === 1}\n                      className=\"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      <ChevronLeft size={20} />\n                    </button>\n                    \n                    {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                      const pageNumber = Math.max(1, Math.min(totalPages - 4, currentPage - 2)) + i;\n                      return (\n                        <button\n                          key={pageNumber}\n                          onClick={() => setCurrentPage(pageNumber)}\n                          className={`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${\n                            currentPage === pageNumber\n                              ? 'z-10 bg-orange-50 border-orange-500 text-orange-600'\n                              : 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50'\n                          }`}\n                        >\n                          {pageNumber}\n                        </button>\n                      );\n                    })}\n                    \n                    <button\n                      onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n                      disabled={currentPage === totalPages}\n                      className=\"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      <ChevronRight size={20} />\n                    </button>\n                  </nav>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Appointment Booking Form Modal */}\n      <AppointmentBookingForm\n        isOpen={showBookingForm}\n        onClose={() => setShowBookingForm(false)}\n        onSuccess={() => {\n          setShowBookingForm(false);\n          loadAppointments();\n        }}\n      />\n    </div>\n  );\n};\n\nexport default AppointmentManagement;"],"names":[],"mappings":";;;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBA;AACA;AACA;AA5BA;;;;;;;AA+BA,sDAAsD;AAEtD,MAAM,wBAAkC;IACtC,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,qBAAqB;IACrB,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEjD,aAAa;IACb,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAChC,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,mBAAmB;IACnB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAS,EAAE;IAEhD,mCAAmC;IACnC,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAsB;IACnF,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAEpE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;QACA;IACF,GAAG;QAAC;QAAa;QAAc;QAAY;QAAc;KAAW;IAEpE,MAAM,mBAAmB;QACvB,IAAI;YACF,WAAW;YACX,SAAS;YAET,MAAM,UAAe;gBACnB,MAAM;gBACN,OAAO;YACT;YAEA,IAAI,iBAAiB,OAAO;gBAC1B,QAAQ,MAAM,GAAG;YACnB;YAEA,IAAI,cAAc;gBAChB,QAAQ,QAAQ,GAAG;YACrB;YAEA,IAAI,YAAY;gBACd,QAAQ,UAAU,GAAG;YACvB;YAEA,oBAAoB;YACpB,MAAM,QAAQ,IAAI;YAClB,IAAI,eAAe,SAAS;gBAC1B,QAAQ,IAAI,GAAG,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YAClD,OAAO,IAAI,eAAe,QAAQ;gBAChC,MAAM,YAAY,IAAI,KAAK;gBAC3B,UAAU,OAAO,CAAC,MAAM,OAAO,KAAK,MAAM,MAAM;gBAChD,QAAQ,QAAQ,GAAG,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBAExD,MAAM,UAAU,IAAI,KAAK;gBACzB,QAAQ,OAAO,CAAC,UAAU,OAAO,KAAK;gBACtC,QAAQ,MAAM,GAAG,QAAQ,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACtD,OAAO,IAAI,eAAe,SAAS;gBACjC,MAAM,aAAa,IAAI,KAAK,MAAM,WAAW,IAAI,MAAM,QAAQ,IAAI;gBACnE,MAAM,WAAW,IAAI,KAAK,MAAM,WAAW,IAAI,MAAM,QAAQ,KAAK,GAAG;gBACrE,QAAQ,QAAQ,GAAG,WAAW,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBACzD,QAAQ,MAAM,GAAG,SAAS,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACvD;YAEA,MAAM,WAAW,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD,EAAE;YACvC,gBAAgB,SAAS,YAAY,IAAI,EAAE;YAC3C,cAAc,SAAS,KAAK,IAAI;QAClC,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,WAAW,MAAM,CAAA,GAAA,2HAAA,CAAA,gBAAa,AAAD;YACnC,WAAW,SAAS,OAAO,IAAI,EAAE;QACnC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC1C;IACF;IAEA,MAAM,qBAAqB,OAAO,eAAuB;QACvD,IAAI;YACF,MAAM,CAAA,GAAA,gIAAA,CAAA,0BAAuB,AAAD,EAAE,eAAe;YAC7C,MAAM;YACN,kBAAkB;QACpB,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,sCAAsC;YACpD,SAAS;QACX;IACF;IAEA,MAAM,0BAA0B,OAAO;QACrC,IAAI,CAAC,QAAQ,sDAAsD;YACjE;QACF;QAEA,IAAI;YACF,MAAM,CAAA,GAAA,gIAAA,CAAA,oBAAiB,AAAD,EAAE,eAAe;YACvC,MAAM;YACN,kBAAkB;QACpB,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,iCAAiC;YAC/C,SAAS;QACX;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,OAAQ,OAAO,WAAW;YACxB,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT;gBACE,OAAO;QACX;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,OAAQ,OAAO,WAAW;YACxB,KAAK;gBACH,qBAAO,8OAAC,2NAAA,CAAA,cAAW;oBAAC,MAAM;;;;;;YAC5B,KAAK;gBACH,qBAAO,8OAAC,2NAAA,CAAA,cAAW;oBAAC,MAAM;;;;;;YAC5B,KAAK;gBACH,qBAAO,8OAAC,4MAAA,CAAA,UAAO;oBAAC,MAAM;;;;;;YACxB,KAAK;gBACH,qBAAO,8OAAC,oNAAA,CAAA,cAAW;oBAAC,MAAM;;;;;;YAC5B,KAAK;gBACH,qBAAO,8OAAC,gNAAA,CAAA,YAAS;oBAAC,MAAM;;;;;;YAC1B;gBACE,qBAAO,8OAAC,oMAAA,CAAA,QAAK;oBAAC,MAAM;;;;;;QACxB;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,KAAK,YAAY,kBAAkB,CAAC,SAAS;YACtD,SAAS;YACT,MAAM;YACN,OAAO;YACP,KAAK;QACP;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,KAAK,CAAC,WAAW,EAAE,YAAY,EAAE,kBAAkB,CAAC,SAAS;YACtE,MAAM;YACN,QAAQ;YACR,QAAQ;QACV;IACF;IAEA,MAAM,aAAa,KAAK,IAAI,CAAC,aAAa;IAE1C,MAAM,sBAAsB;QAC1B,MAAM,QAAQ,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;QACpD,MAAM,oBAAoB,aAAa,MAAM,CAAC,CAAA,MAAO,IAAI,gBAAgB,KAAK;QAE9E,OAAO;YACL,OAAO,aAAa,MAAM;YAC1B,OAAO,kBAAkB,MAAM;YAC/B,WAAW,aAAa,MAAM,CAAC,CAAA,MAAO,IAAI,MAAM,KAAK,aAAa,MAAM;YACxE,WAAW,aAAa,MAAM,CAAC,CAAA,MAAO,IAAI,MAAM,KAAK,aAAa,MAAM;YACxE,WAAW,aAAa,MAAM,CAAC,CAAA,MAAO,IAAI,MAAM,KAAK,aAAa,MAAM;QAC1E;IACF;IAEA,MAAM,QAAQ;IAEd,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0MAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAmC;;;;;;0DACjD,8OAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;;;;;;;0CAGzC,8OAAC;gCACC,SAAS,IAAM,mBAAmB;gCAClC,WAAU;;kDAEV,8OAAC,kMAAA,CAAA,OAAI;wCAAC,MAAM;wCAAI,WAAU;;;;;;oCAAS;;;;;;;;;;;;;;;;;;;;;;;0BAO3C,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,0MAAA,CAAA,WAAQ;gDAAC,WAAU;;;;;;;;;;;sDAEtB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAoC;;;;;;8DACjD,8OAAC;oDAAE,WAAU;8DAAoC,MAAM,KAAK;;;;;;;;;;;;;;;;;;;;;;;0CAKlE,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,oMAAA,CAAA,QAAK;gDAAC,WAAU;;;;;;;;;;;sDAEnB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAoC;;;;;;8DACjD,8OAAC;oDAAE,WAAU;8DAAoC,MAAM,KAAK;;;;;;;;;;;;;;;;;;;;;;;0CAKlE,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,2NAAA,CAAA,cAAW;gDAAC,WAAU;;;;;;;;;;;sDAEzB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAoC;;;;;;8DACjD,8OAAC;oDAAE,WAAU;8DAAoC,MAAM,SAAS;;;;;;;;;;;;;;;;;;;;;;;0CAKtE,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,2NAAA,CAAA,cAAW;gDAAC,WAAU;;;;;;;;;;;sDAEzB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAoC;;;;;;8DACjD,8OAAC;oDAAE,WAAU;8DAAoC,MAAM,SAAS;;;;;;;;;;;;;;;;;;;;;;;0CAKtE,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,4MAAA,CAAA,UAAO;gDAAC,WAAU;;;;;;;;;;;sDAErB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAoC;;;;;;8DACjD,8OAAC;oDAAE,WAAU;8DAAoC,MAAM,SAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOxE,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,sMAAA,CAAA,SAAM;4CAAC,WAAU;4CAAmE,MAAM;;;;;;sDAC3F,8OAAC;4CACC,MAAK;4CACL,aAAY;4CACZ,OAAO;4CACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;4CAC7C,WAAU;;;;;;;;;;;;8CAId,8OAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAC/C,WAAU;;sDAEV,8OAAC;4CAAO,OAAM;sDAAM;;;;;;sDACpB,8OAAC;4CAAO,OAAM;sDAAY;;;;;;sDAC1B,8OAAC;4CAAO,OAAM;sDAAY;;;;;;sDAC1B,8OAAC;4CAAO,OAAM;sDAAY;;;;;;sDAC1B,8OAAC;4CAAO,OAAM;sDAAY;;;;;;sDAC1B,8OAAC;4CAAO,OAAM;sDAAU;;;;;;;;;;;;8CAG1B,8OAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oCAC7C,WAAU;;sDAEV,8OAAC;4CAAO,OAAM;sDAAM;;;;;;sDACpB,8OAAC;4CAAO,OAAM;sDAAQ;;;;;;sDACtB,8OAAC;4CAAO,OAAM;sDAAO;;;;;;sDACrB,8OAAC;4CAAO,OAAM;sDAAQ;;;;;;;;;;;;8CAGxB,8OAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;oCAC/C,WAAU;;sDAEV,8OAAC;4CAAO,OAAM;sDAAG;;;;;;wCAChB,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;gDAAuB,OAAO,OAAO,EAAE;;oDACrC,OAAO,IAAI,EAAE,QAAQ;oDAAiB;oDAAI,OAAO,cAAc;;+CADrD,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;;oBAS7B,uBACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oNAAA,CAAA,cAAW;gCAAC,WAAU;gCAAoB,MAAM;;;;;;0CACjD,8OAAC;gCAAK,WAAU;0CAAgB;;;;;;;;;;;;kCAKpC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAM,WAAU;;sDACf,8OAAC;4CAAM,WAAU;sDACf,cAAA,8OAAC;;kEACC,8OAAC;wDAAG,WAAU;kEAAiF;;;;;;kEAG/F,8OAAC;wDAAG,WAAU;kEAAiF;;;;;;kEAG/F,8OAAC;wDAAG,WAAU;kEAAiF;;;;;;kEAG/F,8OAAC;wDAAG,WAAU;kEAAiF;;;;;;kEAG/F,8OAAC;wDAAG,WAAU;kEAAiF;;;;;;kEAG/F,8OAAC;wDAAG,WAAU;kEAAiF;;;;;;kEAG/F,8OAAC;wDAAG,WAAU;kEAAkF;;;;;;;;;;;;;;;;;sDAKpG,8OAAC;4CAAM,WAAU;sDACd,wBACC,8OAAC;0DACC,cAAA,8OAAC;oDAAG,SAAS;oDAAG,WAAU;8DACxB,cAAA,8OAAC;wDAAI,WAAU;;0EACb,8OAAC,gNAAA,CAAA,YAAS;gEAAC,WAAU;;;;;;0EACrB,8OAAC;gEAAK,WAAU;0EAAgB;;;;;;;;;;;;;;;;;;;;;uDAIpC,aAAa,MAAM,KAAK,kBAC1B,8OAAC;0DACC,cAAA,8OAAC;oDAAG,SAAS;oDAAG,WAAU;;sEACxB,8OAAC,0MAAA,CAAA,WAAQ;4DAAC,WAAU;;;;;;sEACpB,8OAAC;4DAAE,WAAU;sEAAgB;;;;;;sEAC7B,8OAAC;4DACC,SAAS,IAAM,mBAAmB;4DAClC,WAAU;;8EAEV,8OAAC,kMAAA,CAAA,OAAI;oEAAC,MAAM;oEAAI,WAAU;;;;;;gEAAS;;;;;;;;;;;;;;;;;uDAMzC,aAAa,GAAG,CAAC,CAAC,4BAChB,8OAAC;oDAAwB,WAAU;;sEACjC,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC;4EAAI,WAAU;sFACb,cAAA,8OAAC,kMAAA,CAAA,OAAI;gFAAC,WAAU;;;;;;;;;;;;;;;;kFAGpB,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAI,WAAU;;oFACZ,YAAY,OAAO,EAAE;oFAAW;oFAAE,YAAY,OAAO,EAAE;;;;;;;0FAE1D,8OAAC;gFAAI,WAAU;;oFAAwB;oFAChC,YAAY,OAAO,EAAE;;;;;;;;;;;;;;;;;;;;;;;;sEAKlC,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC;4EAAI,WAAU;sFACb,cAAA,8OAAC,gNAAA,CAAA,cAAW;gFAAC,WAAU;;;;;;;;;;;;;;;;kFAG3B,8OAAC;wEAAI,WAAU;;0FACb,8OAAC;gFAAI,WAAU;0FACZ,YAAY,MAAM,EAAE,MAAM,QAAQ;;;;;;0FAErC,8OAAC;gFAAI,WAAU;0FACZ,YAAY,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;sEAK7B,8OAAC;4DAAG,WAAU;;8EACZ,8OAAC;oEAAI,WAAU;8EACZ,WAAW,YAAY,gBAAgB;;;;;;8EAE1C,8OAAC;oEAAI,WAAU;8EACZ,WAAW,YAAY,gBAAgB;;;;;;;;;;;;sEAG5C,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAK,WAAU;0EACb,YAAY,IAAI,CAAC,OAAO,CAAC,KAAK;;;;;;;;;;;sEAGnC,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAK,WAAW,CAAC,+EAA+E,EAAE,eAAe,YAAY,MAAM,GAAG;;oEACpI,cAAc,YAAY,MAAM;kFACjC,8OAAC;wEAAK,WAAU;kFAAmB,YAAY,MAAM,CAAC,OAAO,CAAC,KAAK;;;;;;;;;;;;;;;;;sEAGvE,8OAAC;4DAAG,WAAU;;gEACX,YAAY,gBAAgB;gEAAC;;;;;;;sEAEhC,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEAAI,WAAU;;kFACb,8OAAC;wEACC,SAAS,IAAM,kBAAkB,mBAAmB,YAAY,EAAE,GAAG,OAAO,YAAY,EAAE;wEAC1F,WAAU;kFAEV,cAAA,8OAAC,0NAAA,CAAA,eAAY;4EAAC,MAAM;;;;;;;;;;;oEAGrB,mBAAmB,YAAY,EAAE,kBAChC,8OAAC;wEAAI,WAAU;kFACb,cAAA,8OAAC;4EAAI,WAAU;;8FACb,8OAAC;oFACC,SAAS,IAAM,mBAAmB,YAAY,EAAE,EAAE;oFAClD,WAAU;;sGAEV,8OAAC,2NAAA,CAAA,cAAW;4FAAC,MAAM;4FAAI,WAAU;;;;;;wFAAwB;;;;;;;8FAG3D,8OAAC;oFACC,SAAS,IAAM,mBAAmB,YAAY,EAAE,EAAE;oFAClD,WAAU;;sGAEV,8OAAC,2NAAA,CAAA,cAAW;4FAAC,MAAM;4FAAI,WAAU;;;;;;wFAAuB;;;;;;;8FAG1D,8OAAC;oFACC,SAAS,IAAM,wBAAwB,YAAY,EAAE;oFACrD,WAAU;;sGAEV,8OAAC,4MAAA,CAAA,UAAO;4FAAC,MAAM;4FAAI,WAAU;;;;;;wFAAS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mDAvF3C,YAAY,EAAE;;;;;;;;;;;;;;;;;;;;;4BAuGhC,aAAa,mBACZ,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACC,SAAS,IAAM,eAAe,KAAK,GAAG,CAAC,GAAG,cAAc;gDACxD,UAAU,gBAAgB;gDAC1B,WAAU;0DACX;;;;;;0DAGD,8OAAC;gDACC,SAAS,IAAM,eAAe,KAAK,GAAG,CAAC,YAAY,cAAc;gDACjE,UAAU,gBAAgB;gDAC1B,WAAU;0DACX;;;;;;;;;;;;kDAIH,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;0DACC,cAAA,8OAAC;oDAAE,WAAU;;wDAAwB;sEAC3B,8OAAC;4DAAK,WAAU;sEAAe,CAAC,cAAc,CAAC,IAAI,eAAe;;;;;;wDAAS;wDAAI;sEACvF,8OAAC;4DAAK,WAAU;sEACb,KAAK,GAAG,CAAC,cAAc,cAAc;;;;;;wDAChC;wDAAI;sEACT,8OAAC;4DAAK,WAAU;sEAAe;;;;;;wDAAkB;;;;;;;;;;;;0DAGxD,8OAAC;0DACC,cAAA,8OAAC;oDAAI,WAAU;oDAA4D,cAAW;;sEACpF,8OAAC;4DACC,SAAS,IAAM,eAAe,KAAK,GAAG,CAAC,GAAG,cAAc;4DACxD,UAAU,gBAAgB;4DAC1B,WAAU;sEAEV,cAAA,8OAAC,oNAAA,CAAA,cAAW;gEAAC,MAAM;;;;;;;;;;;wDAGpB,MAAM,IAAI,CAAC;4DAAE,QAAQ,KAAK,GAAG,CAAC,GAAG;wDAAY,GAAG,CAAC,GAAG;4DACnD,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,aAAa,GAAG,cAAc,MAAM;4DAC5E,qBACE,8OAAC;gEAEC,SAAS,IAAM,eAAe;gEAC9B,WAAW,CAAC,uEAAuE,EACjF,gBAAgB,aACZ,wDACA,2DACJ;0EAED;+DARI;;;;;wDAWX;sEAEA,8OAAC;4DACC,SAAS,IAAM,eAAe,KAAK,GAAG,CAAC,YAAY,cAAc;4DACjE,UAAU,gBAAgB;4DAC1B,WAAU;sEAEV,cAAA,8OAAC,sNAAA,CAAA,eAAY;gEAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAWpC,8OAAC,qIAAA,CAAA,UAAsB;gBACrB,QAAQ;gBACR,SAAS,IAAM,mBAAmB;gBAClC,WAAW;oBACT,mBAAmB;oBACnB;gBACF;;;;;;;;;;;;AAIR;uCAEe","debugId":null}},
    {"offset": {"line": 4422, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/app/appointment-dashboard/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { Calendar, Clock, Users, Activity, Plus, Filter } from 'lucide-react';\nimport AppointmentBookingForm from '../../components/AppointmentBookingForm';\nimport AppointmentManagement from '../../components/AppointmentManagement';\n\nconst AppointmentDashboard: React.FC = () => {\n  const [activeTab, setActiveTab] = useState<'overview' | 'book' | 'manage'>('overview');\n  const [showBookingForm, setShowBookingForm] = useState(false);\n\n  const stats = [\n    {\n      title: 'Today\\'s Appointments',\n      value: '24',\n      icon: Calendar,\n      color: 'bg-blue-500',\n      change: '+12%'\n    },\n    {\n      title: 'Pending Confirmations',\n      value: '8',\n      icon: Clock,\n      color: 'bg-yellow-500',\n      change: '+5%'\n    },\n    {\n      title: 'Active Doctors',\n      value: '15',\n      icon: Users,\n      color: 'bg-green-500',\n      change: '+2%'\n    },\n    {\n      title: 'Completed Today',\n      value: '18',\n      icon: Activity,\n      color: 'bg-purple-500',\n      change: '+8%'\n    }\n  ];\n\n  const TabButton: React.FC<{ \n    id: 'overview' | 'book' | 'manage'; \n    label: string; \n    icon: React.ElementType;\n    isActive: boolean;\n    onClick: () => void;\n  }> = ({ id, label, icon: Icon, isActive, onClick }) => (\n    <button\n      onClick={onClick}\n      className={`flex items-center px-6 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${\n        isActive\n          ? 'bg-blue-600 text-white shadow-lg'\n          : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100'\n      }`}\n    >\n      <Icon className=\"w-4 h-4 mr-2\" />\n      {label}\n    </button>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\">\n      {/* Header */}\n      <div className=\"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center py-6\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Appointment Management</h1>\n              <p className=\"text-gray-600 mt-1\">Manage patient appointments and doctor schedules</p>\n            </div>\n            <button\n              onClick={() => setShowBookingForm(true)}\n              className=\"flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n            >\n              <Plus className=\"w-5 h-5 mr-2\" />\n              New Appointment\n            </button>\n          </div>\n\n          {/* Navigation Tabs */}\n          <div className=\"flex space-x-2 pb-4\">\n            <TabButton\n              id=\"overview\"\n              label=\"Overview\"\n              icon={Activity}\n              isActive={activeTab === 'overview'}\n              onClick={() => setActiveTab('overview')}\n            />\n            <TabButton\n              id=\"book\"\n              label=\"Book Appointment\"\n              icon={Plus}\n              isActive={activeTab === 'book'}\n              onClick={() => setActiveTab('book')}\n            />\n            <TabButton\n              id=\"manage\"\n              label=\"Manage Appointments\"\n              icon={Filter}\n              isActive={activeTab === 'manage'}\n              onClick={() => setActiveTab('manage')}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {activeTab === 'overview' && (\n          <div className=\"space-y-8\">\n            {/* Stats Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {stats.map((stat, index) => {\n                const Icon = stat.icon;\n                return (\n                  <div\n                    key={index}\n                    className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 hover:shadow-lg transition-all duration-200 hover:-translate-y-1\"\n                  >\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-600\">{stat.title}</p>\n                        <p className=\"text-3xl font-bold text-gray-900 mt-2\">{stat.value}</p>\n                        <p className=\"text-sm text-green-600 mt-1\">{stat.change} from yesterday</p>\n                      </div>\n                      <div className={`${stat.color} p-3 rounded-xl`}>\n                        <Icon className=\"w-6 h-6 text-white\" />\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            {/* Quick Actions */}\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Quick Actions</h3>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <button\n                  onClick={() => setActiveTab('book')}\n                  className=\"flex items-center p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg\"\n                >\n                  <Plus className=\"w-5 h-5 mr-3\" />\n                  <div className=\"text-left\">\n                    <div className=\"font-medium\">Book New Appointment</div>\n                    <div className=\"text-sm opacity-90\">Schedule patient visit</div>\n                  </div>\n                </button>\n                <button\n                  onClick={() => setActiveTab('manage')}\n                  className=\"flex items-center p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 shadow-md hover:shadow-lg\"\n                >\n                  <Calendar className=\"w-5 h-5 mr-3\" />\n                  <div className=\"text-left\">\n                    <div className=\"font-medium\">View All Appointments</div>\n                    <div className=\"text-sm opacity-90\">Manage existing bookings</div>\n                  </div>\n                </button>\n                <button className=\"flex items-center p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg\">\n                  <Users className=\"w-5 h-5 mr-3\" />\n                  <div className=\"text-left\">\n                    <div className=\"font-medium\">Doctor Schedules</div>\n                    <div className=\"text-sm opacity-90\">Manage availability</div>\n                  </div>\n                </button>\n              </div>\n            </div>\n\n            {/* Recent Activity */}\n            <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Recent Activity</h3>\n              <div className=\"space-y-3\">\n                {[\n                  { action: 'New appointment booked', patient: 'John Doe', time: '2 minutes ago', status: 'success' },\n                  { action: 'Appointment confirmed', patient: 'Jane Smith', time: '15 minutes ago', status: 'info' },\n                  { action: 'Appointment completed', patient: 'Mike Johnson', time: '1 hour ago', status: 'success' },\n                  { action: 'Appointment cancelled', patient: 'Sarah Wilson', time: '2 hours ago', status: 'warning' }\n                ].map((activity, index) => (\n                  <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                    <div className=\"flex items-center\">\n                      <div className={`w-2 h-2 rounded-full mr-3 ${\n                        activity.status === 'success' ? 'bg-green-500' :\n                        activity.status === 'info' ? 'bg-blue-500' :\n                        activity.status === 'warning' ? 'bg-yellow-500' : 'bg-gray-500'\n                      }`} />\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900\">{activity.action}</p>\n                        <p className=\"text-xs text-gray-600\">Patient: {activity.patient}</p>\n                      </div>\n                    </div>\n                    <span className=\"text-xs text-gray-500\">{activity.time}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'book' && (\n          <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200\">\n            <AppointmentBookingForm \n              isOpen={true}\n              onClose={() => setActiveTab('overview')}\n              onSuccess={() => setActiveTab('manage')} \n            />\n          </div>\n        )}\n\n        {activeTab === 'manage' && (\n          <div className=\"bg-white/70 backdrop-blur-sm rounded-2xl border border-gray-200 overflow-hidden\">\n            <AppointmentManagement />\n          </div>\n        )}\n      </div>\n\n      {/* Booking Form Modal */}\n      {showBookingForm && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50\">\n          <div className=\"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-200\">\n              <div className=\"flex justify-between items-center\">\n                <h2 className=\"text-xl font-semibold text-gray-900\">Book New Appointment</h2>\n                <button\n                  onClick={() => setShowBookingForm(false)}\n                  className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <AppointmentBookingForm \n                isOpen={showBookingForm}\n                onClose={() => setShowBookingForm(false)}\n                onSuccess={() => {\n                  setShowBookingForm(false);\n                  setActiveTab('manage');\n                }} \n              />\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AppointmentDashboard;"],"names":[],"mappings":"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","debugId":null}}]
}