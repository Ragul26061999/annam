{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = 'https://zusheijhebsmjiyyeiqq.supabase.co';\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp1c2hlaWpoZWJzbWppeXllaXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MjI0NDAsImV4cCI6MjA2NzM5ODQ0MH0.iwGPaOJPa6OvwX_iA1xvRt5cM72DWfd8Br1pwRTemRc';\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\nexport const signInWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n  return { data, error };\n};\n\nexport const signUpWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n    },\n  });\n  return { data, error };\n};\n\n// Function to create admin user without email confirmation\nexport const createAdminUser = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n      data: {\n        email_confirm: true,\n      },\n    },\n  });\n  return { data, error };\n};\n\nexport const signOut = async () => {\n  await supabase.auth.signOut();\n};\n\nexport const getCurrentUser = async () => {\n  const { data: { user } } = await supabase.auth.getUser();\n  return user;\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,WAAW,CAAA,GAAA,uLAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAE3C,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;QAC5D;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAGO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;YAC1D,MAAM;gBACJ,eAAe;YACjB;QACF;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,UAAU;IACrB,MAAM,SAAS,IAAI,CAAC,OAAO;AAC7B;AAEO,MAAM,iBAAiB;IAC5B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/barcodeUtils.ts"],"sourcesContent":["import { supabase } from './supabase';\n\n/**\n * Generate a barcode ID for a patient\n * Format: BARS{Year}{Month}{RandomDigits}\n * Example: BARS2025010001\n */\nexport function generateBarcodeId(uhid: string): string {\n  const now = new Date();\n  const year = now.getFullYear().toString();\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  \n  // Use UHID as base and add timestamp for uniqueness\n  const timestamp = now.getTime().toString().slice(-4); // Last 4 digits of timestamp\n  \n  return `BARS${year}${month}${timestamp}`;\n}\n\n/**\n * Generate SVG barcode using Code-128 format\n * This is a simplified implementation - in production, you'd use a proper barcode library\n */\nexport function generateBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const barWidth = 2;\n  const barsCount = barcodeId.length * 6; // Approximate for Code-128\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate bars pattern (simplified)\n  let x = 10;\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create alternating pattern based on character\n    for (let j = 0; j < 6; j++) {\n      if ((charCode + j) % 2 === 0) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n    }\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Generate a more realistic barcode pattern\n * This creates a pattern that looks more like a real barcode\n */\nexport function generateRealisticBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const minBarWidth = 1;\n  const maxBarWidth = 4;\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate more realistic bar pattern\n  let x = 20;\n  let isBlack = true;\n  \n  // Start and end patterns\n  const startPattern = [1, 1, 1, 1, 1, 1];\n  const endPattern = [1, 1, 1, 1, 1, 1];\n  \n  // Draw start pattern\n  for (const barWidth of startPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Draw data pattern\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create pattern based on character\n    const pattern = [];\n    for (let j = 0; j < 6; j++) {\n      const width = minBarWidth + ((charCode + j) % (maxBarWidth - minBarWidth + 1));\n      pattern.push(width);\n    }\n    \n    for (const barWidth of pattern) {\n      if (isBlack) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n      isBlack = !isBlack;\n    }\n  }\n  \n  // Draw end pattern\n  for (const barWidth of endPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Update patient with barcode ID\n */\nexport async function updatePatientWithBarcode(patientId: string, barcodeId: string): Promise<void> {\n  try {\n    const { error } = await supabase\n      .from('patients')\n      .update({ barcode_id: barcodeId })\n      .eq('patient_id', patientId);\n    \n    if (error) {\n      console.error('Error updating patient with barcode:', error);\n      throw new Error(`Failed to update patient with barcode: ${error.message}`);\n    }\n  } catch (error) {\n    console.error('Error updating patient with barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by barcode ID\n */\nexport async function getPatientByBarcodeId(barcodeId: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('barcode_id', barcodeId)\n      .single();\n    \n    if (error) {\n      console.error('Error fetching patient by barcode:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Generate printable barcode data\n */\nexport function generatePrintableBarcodeData(uhid: string, barcodeId: string, patientName: string): string {\n  const svg = generateRealisticBarcodeSVG(barcodeId);\n  \n  return `\n    <div style=\"width: 4in; height: 2in; padding: 0.2in; font-family: Arial, sans-serif; border: 1px solid #ccc; margin: 0.1in;\">\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        <h3 style=\"margin: 0; font-size: 14px; color: #333;\">ANNAM HOSPITAL</h3>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">Patient ID Card</p>\n      </div>\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        ${svg}\n      </div>\n      <div style=\"text-align: center; font-size: 12px;\">\n        <p style=\"margin: 0; font-weight: bold;\">${patientName}</p>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">UHID: ${uhid}</p>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Validate barcode ID format\n */\nexport function validateBarcodeId(barcodeId: string): boolean {\n  // Check if it matches the format: BARS{Year}{Month}{4digits}\n  const barcodeRegex = /^BARS\\d{4}(0[1-9]|1[0-2])\\d{4}$/;\n  return barcodeRegex.test(barcodeId);\n}\n\n/**\n * Extract information from barcode ID\n */\nexport function extractBarcodeInfo(barcodeId: string): {\n  year: string;\n  month: string;\n  sequence: string;\n} | null {\n  if (!validateBarcodeId(barcodeId)) {\n    return null;\n  }\n  \n  const year = barcodeId.substring(4, 8);\n  const month = barcodeId.substring(8, 10);\n  const sequence = barcodeId.substring(10, 14);\n  \n  return { year, month, sequence };\n}\n\n/**\n * Generate barcode for existing patient\n */\nexport async function generateBarcodeForPatient(patientId: string): Promise<string> {\n  try {\n    // Check if patient already has a barcode\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('barcode_id, patient_id')\n      .eq('patient_id', patientId)\n      .single();\n    \n    if (error) {\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    // If patient already has a barcode, return it\n    if (patient.barcode_id && patient.barcode_id.trim() !== '') {\n      return patient.barcode_id;\n    }\n    \n    // Generate new barcode\n    const barcodeId = generateBarcodeId(patientId);\n    \n    // Update patient with barcode\n    await updatePatientWithBarcode(patientId, barcodeId);\n    \n    return barcodeId;\n  } catch (error) {\n    console.error('Error generating barcode for patient:', error);\n    throw error;\n  }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/patientService.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { generateBarcodeId, updatePatientWithBarcode } from './barcodeUtils';\n\n// Types - Updated to match comprehensive registration form\nexport interface PatientRegistrationData {\n  // Personal Information (Mandatory)\n  firstName: string;\n  lastName: string;\n  dateOfBirth: string;\n  gender: string;\n  maritalStatus?: string; // single, married, divorced, widowed, separated\n  phone: string;\n  email?: string;\n  address: string;\n  \n  // Medical & Admission Information \n  bloodGroup: string;\n  allergies: string;\n  medicalHistory: string;\n  currentMedications: string;\n  chronicConditions: string;\n  previousSurgeries: string;\n  \n  // Admission Details\n  admissionDate?: string;\n  admissionTime?: string;\n  primaryComplaint: string;\n  admissionType: string; // emergency, elective, referred\n  referringDoctorFacility?: string;\n  consultingDoctorId?: string;\n  consultingDoctorName?: string;\n  departmentWard?: string;\n  roomNumber?: string;\n  \n  // Guardian/Attendant Details (Optional)\n  guardianName?: string;\n  guardianRelationship?: string;\n  guardianPhone?: string;\n  guardianAddress?: string;\n  \n  // Emergency Contact (Optional)\n  emergencyContactName?: string;\n  emergencyContactPhone?: string;\n  emergencyContactRelationship?: string;\n  \n  // Insurance Information (Optional)\n  insuranceProvider?: string;\n  insuranceNumber?: string;\n  \n  // Initial Visit Information\n  initialSymptoms?: string;\n  referredBy?: string;\n}\n\nexport interface PatientResponse {\n  success: boolean;\n  patient?: any;\n  uhid?: string;\n  credentials?: {\n    email: string;\n    password: string;\n  };\n  error?: string;\n}\n\n/**\n * Generate a unique UHID (Unique Hospital ID) for a new patient\n * Format: UHID + current year + 6-digit sequential number\n * Example: UHID2025000001\n */\nexport async function generateUHID(): Promise<string> {\n  const now = new Date();\n  const yearTwoDigits = now.getFullYear().toString().slice(-2); // Last two digits of year\n  const month = (now.getMonth() + 1).toString().padStart(2, '0'); // Month with leading zero\n  \n  try {\n    // Generate a unique 4-digit random number\n    let uhid: string = '';\n    let isUnique = false;\n    let attempts = 0;\n    const maxAttempts = 1000;\n    \n    while (!isUnique && attempts < maxAttempts) {\n      // Generate 4-digit random number\n      const randomNumber = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\n      uhid = `AH${yearTwoDigits}${month}${randomNumber}`;\n      \n      // Check if this UHID already exists\n      const { data: existing, error } = await supabase\n        .from('patients')\n        .select('patient_id')\n        .eq('patient_id', uhid)\n        .single();\n      \n      if (error && error.code === 'PGRST116') {\n        // No record found, UHID is unique\n        isUnique = true;\n      } else if (error) {\n        console.error('Error checking UHID uniqueness:', error);\n        throw new Error('Failed to generate UHID');\n      }\n      \n      attempts++;\n    }\n    \n    if (!isUnique) {\n      throw new Error('Failed to generate unique UHID after maximum attempts');\n    }\n    \n    return uhid;\n  } catch (error) {\n    console.error('Error generating UHID:', error);\n    throw new Error('Failed to generate UHID');\n  }\n}\n\n/**\n * Create authentication credentials for a new patient\n * Email format: UHID@annam.com\n * Password: \"password\" (as specified in requirements)\n */\nexport async function createPatientAuthCredentials(uhid: string): Promise<{ \n  authUser: any; \n  credentials: { email: string; password: string } \n}> {\n  const email = `${uhid}@annam.com`;\n  const password = 'password';\n\n  try {\n    // Create auth user using Supabase Admin API\n    const { data: authUser, error: authError } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo: `${window.location.origin}/auth/callback`,\n        data: {\n          role: 'patient',\n          uhid: uhid,\n          email_confirm: true\n        }\n      }\n    });\n\n    if (authError) {\n      console.error('Error creating auth user:', authError);\n      throw new Error(`Failed to create authentication: ${authError.message}`);\n    }\n\n    return {\n      authUser: authUser.user,\n      credentials: { email, password }\n    };\n  } catch (error) {\n    console.error('Error creating patient auth credentials:', error);\n    throw error;\n  }\n}\n\n/**\n * Insert comprehensive patient record into the patients table with all new fields\n */\nexport async function insertPatientRecord(\n  uhid: string, \n  registrationData: PatientRegistrationData,\n  userId?: string\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    // Generate barcode ID\n    const barcodeId = generateBarcodeId(uhid);\n    \n    // Prepare admission date and time\n    let admissionDateTime = null;\n    if (registrationData.admissionDate) {\n      if (registrationData.admissionTime) {\n        admissionDateTime = `${registrationData.admissionDate}T${registrationData.admissionTime}`;\n      } else {\n        admissionDateTime = `${registrationData.admissionDate}T00:00:00`;\n      }\n    }\n    \n    const patientData = {\n      // Basic Information\n      patient_id: uhid,\n      barcode_id: barcodeId, // Add barcode ID\n      name: fullName,\n      date_of_birth: registrationData.dateOfBirth,\n      gender: registrationData.gender.toLowerCase(),\n      marital_status: registrationData.maritalStatus || null,\n      phone: registrationData.phone,\n      email: registrationData.email || `${uhid}@annam.com`,\n      address: registrationData.address,\n      \n      // Medical Information\n      blood_group: registrationData.bloodGroup || null,\n      allergies: registrationData.allergies || null,\n      medical_history: registrationData.medicalHistory || null,\n      current_medications: registrationData.currentMedications || null,\n      chronic_conditions: registrationData.chronicConditions || null,\n      previous_surgeries: registrationData.previousSurgeries || null,\n      \n      // New Admission Information\n      admission_date: admissionDateTime,\n      admission_time: registrationData.admissionTime || null,\n      primary_complaint: registrationData.primaryComplaint,\n      admission_type: registrationData.admissionType,\n      referring_doctor_facility: registrationData.referringDoctorFacility || null,\n      department_ward: registrationData.departmentWard || null,\n      room_number: registrationData.roomNumber || null,\n      \n      // Guardian/Attendant Details (Optional)\n      guardian_name: registrationData.guardianName || null,\n      guardian_relationship: registrationData.guardianRelationship || null,\n      guardian_phone: registrationData.guardianPhone || null,\n      guardian_address: registrationData.guardianAddress || null,\n      \n      // Emergency Contact (Optional)\n      emergency_contact_name: registrationData.emergencyContactName || null,\n      emergency_contact_phone: registrationData.emergencyContactPhone || null,\n      emergency_contact_relationship: registrationData.emergencyContactRelationship || null,\n      \n      // Insurance Information\n      insurance_number: registrationData.insuranceNumber || null,\n      insurance_provider: registrationData.insuranceProvider || null,\n      \n      // Additional fields\n      initial_symptoms: registrationData.initialSymptoms || null,\n      referred_by: registrationData.referredBy || null,\n      \n      // Link to users table\n      user_id: userId || null,\n      \n      // System fields\n      status: 'active'\n    };\n\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .insert([patientData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error inserting patient record:', error);\n      throw new Error(`Failed to create patient record: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error inserting patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Link the Supabase auth user to the users table for role management\n */\nexport async function linkAuthUserToPatient(\n  authUserId: string, \n  uhid: string, \n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    const userData = {\n      auth_id: authUserId,\n      employee_id: uhid, // Using UHID as employee_id for patients\n      name: fullName,\n      email: registrationData.email || `${uhid}@annam.com`,\n      role: 'patient',\n      phone: registrationData.phone,\n      address: registrationData.address,\n      status: 'active',\n      permissions: {\n        patient_portal: true,\n        view_own_records: true,\n        book_appointments: true\n      }\n    };\n\n    const { data: user, error } = await supabase\n      .from('users')\n      .insert([userData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error linking auth user to patient:', error);\n      throw new Error(`Failed to create user record: ${error.message}`);\n    }\n\n    return user;\n  } catch (error) {\n    console.error('Error linking auth user to patient:', error);\n    throw error;\n  }\n}\n\n/**\n * Create an initial appointment if symptoms are provided\n */\nexport async function createInitialAppointment(\n  patientId: string,\n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    if (!registrationData.initialSymptoms?.trim() && !registrationData.primaryComplaint?.trim()) {\n      return null; // No appointment needed if no symptoms\n    }\n\n    // Generate appointment ID\n    const appointmentId = `APT${Date.now()}`;\n    \n    // Use tomorrow as default appointment date\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    \n    const appointmentData = {\n      appointment_id: appointmentId,\n      patient_id: patientId,\n      appointment_date: tomorrow.toISOString().split('T')[0],\n      appointment_time: '09:00:00',\n      type: 'consultation',\n      status: 'scheduled',\n      symptoms: registrationData.initialSymptoms || registrationData.primaryComplaint,\n      notes: `Initial consultation for newly registered patient. Primary complaint: ${registrationData.primaryComplaint}`\n    };\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .insert([appointmentData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error creating initial appointment:', error);\n      // Don't throw error for appointment creation failure\n      return null;\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error creating initial appointment:', error);\n    // Don't throw error for appointment creation failure\n    return null;\n  }\n}\n\n/**\n * Main function to register a new patient with complete workflow\n */\nexport async function registerNewPatient(\n  registrationData: PatientRegistrationData,\n  preGeneratedUHID?: string\n): Promise<PatientResponse> {\n  try {\n    // Step 1: Use pre-generated UHID or generate new one\n    const uhid = preGeneratedUHID || await generateUHID();\n    console.log('Using UHID:', uhid);\n\n    // Step 2: Create authentication credentials\n    const { authUser, credentials } = await createPatientAuthCredentials(uhid);\n    console.log('Created auth user:', authUser?.id);\n\n    // Step 3: Create user record in users table\n    const userRecord = await linkAuthUserToPatient(authUser.id, uhid, registrationData);\n    console.log('Created user record:', userRecord.id);\n\n    // Step 4: Insert patient record with user_id link\n    const patient = await insertPatientRecord(uhid, registrationData, userRecord.id);\n    console.log('Created patient record:', patient.id);\n\n    // Step 5: Create initial appointment if symptoms provided\n    if (registrationData.initialSymptoms?.trim() || registrationData.primaryComplaint?.trim()) {\n      const appointment = await createInitialAppointment(patient.id, registrationData);\n      if (appointment) {\n        console.log('Created initial appointment:', appointment.id);\n      }\n    }\n\n    return {\n      success: true,\n      patient,\n      uhid,\n      credentials,\n    };\n\n  } catch (error) {\n    console.error('Error registering new patient:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    };\n  }\n}\n\n/**\n * Validate that UHID is unique\n */\nexport async function validateUHIDUnique(uhid: string): Promise<boolean> {\n  try {\n    const { data: existingPatient, error } = await supabase\n      .from('patients')\n      .select('patient_id')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error && error.code !== 'PGRST116') {\n      console.error('Error validating UHID uniqueness:', error);\n      throw new Error('Failed to validate UHID');\n    }\n\n    return !existingPatient; // Return true if no existing patient found\n  } catch (error) {\n    console.error('Error validating UHID uniqueness:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by UHID with comprehensive data\n */\nexport async function getPatientByUHID(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient by UHID:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by UHID:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient with related data (appointments, bills, etc.)\n */\nexport async function getPatientWithRelatedData(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        ),\n        appointments:appointments(\n          id,\n          appointment_id,\n          appointment_date,\n          appointment_time,\n          type,\n          status,\n          symptoms,\n          diagnosis,\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        ),\n        bed_allocations:bed_allocations(\n          id,\n          admission_date,\n          discharge_date,\n          admission_type,\n          status,\n          bed:beds(bed_number, room_number, bed_type),\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        )\n      `)\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient with related data:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient with related data:', error);\n    throw error;\n  }\n}\n\n/**\n * Update patient information\n */\nexport async function updatePatientRecord(\n  uhid: string, \n  updateData: any\n): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .update(updateData)\n      .eq('patient_id', uhid)\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error updating patient record:', error);\n      throw new Error(`Failed to update patient: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error updating patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all patients with pagination and filtering\n */\nexport async function getAllPatients(\n  options: {\n    page?: number;\n    limit?: number;\n    status?: string;\n    searchTerm?: string;\n  } = {}\n): Promise<{ patients: any[]; total: number; page: number; limit: number }> {\n  try {\n    const { page = 1, limit = 20, status, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        )\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (status) {\n      query = query.eq('status', status);\n    }\n\n    if (searchTerm) {\n      query = query.or(`name.ilike.%${searchTerm}%,patient_id.ilike.%${searchTerm}%,phone.ilike.%${searchTerm}%`);\n    }\n\n    // Apply pagination\n    const { data: patients, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching patients:', error);\n      throw new Error(`Failed to fetch patients: ${error.message}`);\n    }\n\n    return {\n      patients: patients || [],\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching patients:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 759, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/components/EmergencyPatientRegistrationForm.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { \n  User, \n  Phone, \n  MapPin, \n  Calendar, \n  AlertTriangle,\n  Save,\n  X,\n  UserPlus,\n  Hash,\n  CheckCircle,\n  Clock,\n  Stethoscope\n} from 'lucide-react';\nimport { generateUHID } from '../src/lib/patientService';\n\ninterface EmergencyPatientData {\n  // Essential Information Only\n  firstName: string;\n  lastName: string;\n  dateOfBirth: string;\n  gender: string;\n  phone: string;\n  address: string;\n  \n  // Critical Medical Information\n  primaryComplaint: string;\n  allergies?: string;\n  bloodGroup?: string;\n  \n  // Emergency Contact (Optional but recommended)\n  emergencyContactName?: string;\n  emergencyContactPhone?: string;\n  emergencyContactRelationship?: string;\n  \n  // Auto-filled fields\n  admissionType: string; // Always 'emergency'\n  admissionDate: string;\n  admissionTime: string;\n}\n\ninterface EmergencyPatientRegistrationFormProps {\n  onSubmit: (data: EmergencyPatientData, previewUHID?: string) => Promise<void>;\n  onCancel: () => void;\n  isLoading?: boolean;\n}\n\nexport default function EmergencyPatientRegistrationForm({ \n  onSubmit, \n  onCancel, \n  isLoading = false \n}: EmergencyPatientRegistrationFormProps) {\n  const [formData, setFormData] = useState<EmergencyPatientData>({\n    firstName: '',\n    lastName: '',\n    dateOfBirth: '',\n    gender: '',\n    phone: '',\n    address: '',\n    primaryComplaint: '',\n    allergies: '',\n    bloodGroup: '',\n    emergencyContactName: '',\n    emergencyContactPhone: '',\n    emergencyContactRelationship: '',\n    admissionType: 'emergency',\n    admissionDate: new Date().toISOString().split('T')[0],\n    admissionTime: new Date().toTimeString().slice(0, 5)\n  });\n\n  const [errors, setErrors] = useState<Partial<EmergencyPatientData>>({});\n  const [previewUHID, setPreviewUHID] = useState<string>('');\n  const [isGeneratingUHID, setIsGeneratingUHID] = useState(false);\n\n  const handleInputChange = (field: keyof EmergencyPatientData, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Partial<EmergencyPatientData> = {};\n\n    // Only First Name is mandatory\n    if (!formData.firstName.trim()) newErrors.firstName = 'First name is required';\n    // All other fields are now optional\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const generatePreviewUHID = async () => {\n    try {\n      setIsGeneratingUHID(true);\n      const uhid = await generateUHID();\n      setPreviewUHID(uhid);\n      return true;\n    } catch (error) {\n      console.error('Error generating UHID preview:', error);\n      setErrors({ firstName: 'Failed to generate UHID. Please try again.' });\n      return false;\n    } finally {\n      setIsGeneratingUHID(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (validateForm()) {\n      // Generate UHID if not already generated\n      if (!previewUHID) {\n        const uhidGenerated = await generatePreviewUHID();\n        if (!uhidGenerated) {\n          return;\n        }\n      }\n      await onSubmit(formData, previewUHID);\n    }\n  };\n\n  // Auto-generate UHID when first name is filled (only mandatory field)\n  React.useEffect(() => {\n    if (formData.firstName && !previewUHID && !isGeneratingUHID) {\n      generatePreviewUHID();\n    }\n  }, [formData.firstName, previewUHID, isGeneratingUHID]);\n\n  return (\n    <div className=\"max-w-4xl mx-auto bg-white rounded-xl shadow-lg border border-gray-200\">\n      {/* Emergency Header */}\n      <div className=\"p-6 border-b border-gray-200 bg-red-50\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"p-2 bg-red-100 rounded-lg\">\n            <AlertTriangle className=\"h-6 w-6 text-red-600\" />\n          </div>\n          <div className=\"flex-1\">\n            <h2 className=\"text-xl font-semibold text-red-900\">Emergency Patient Registration</h2>\n            <p className=\"text-sm text-red-700\">Quick registration for emergency patients - only essential information required</p>\n          </div>\n          <div className=\"flex items-center gap-2 text-sm text-red-700\">\n            <Clock className=\"h-4 w-4\" />\n            <span>Fast Track Registration</span>\n          </div>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"p-6\">\n        {/* UHID Preview Section */}\n        {previewUHID && (\n          <div className=\"bg-green-50 p-4 rounded-lg border border-green-200 mb-6\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"p-2 bg-green-100 rounded-lg\">\n                <Hash className=\"h-4 w-4 text-green-600\" />\n              </div>\n              <div>\n                <h4 className=\"font-semibold text-green-900\">Generated Patient UHID</h4>\n                <p className=\"text-sm text-green-700\">Emergency registration ID</p>\n              </div>\n              <CheckCircle className=\"h-5 w-5 text-green-600 ml-auto\" />\n            </div>\n            <div className=\"bg-white px-4 py-3 rounded-lg border border-green-300\">\n              <p className=\"font-mono text-xl font-bold text-green-900 text-center tracking-wider\">\n                {previewUHID}\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* Essential Patient Information */}\n        <div className=\"space-y-6\">\n          <div className=\"flex items-center gap-3 mb-4\">\n            <div className=\"p-2 bg-orange-100 rounded-lg\">\n              <User className=\"h-5 w-5 text-orange-600\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">Essential Patient Information</h3>\n              <p className=\"text-sm text-gray-500\">Required fields for emergency registration</p>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                First Name <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"firstName\"\n                value={formData.firstName}\n                onChange={(e) => handleInputChange('firstName', e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${errors.firstName ? 'border-red-300' : 'border-gray-300'}`}\n                placeholder=\"Enter first name\"\n              />\n              {errors.firstName && <p className=\"text-red-500 text-xs mt-1\">{errors.firstName}</p>}\n            </div>\n\n            <div>\n              <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Last Name <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"lastName\"\n                value={formData.lastName}\n                onChange={(e) => handleInputChange('lastName', e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${errors.lastName ? 'border-red-300' : 'border-gray-300'}`}\n                placeholder=\"Enter last name\"\n              />\n              {errors.lastName && <p className=\"text-red-500 text-xs mt-1\">{errors.lastName}</p>}\n            </div>\n\n            <div>\n              <label htmlFor=\"dateOfBirth\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Date of Birth <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                id=\"dateOfBirth\"\n                value={formData.dateOfBirth}\n                onChange={(e) => handleInputChange('dateOfBirth', e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${errors.dateOfBirth ? 'border-red-300' : 'border-gray-300'}`}\n              />\n              {errors.dateOfBirth && <p className=\"text-red-500 text-xs mt-1\">{errors.dateOfBirth}</p>}\n            </div>\n\n            <div>\n              <label htmlFor=\"gender\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Gender <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                id=\"gender\"\n                value={formData.gender}\n                onChange={(e) => handleInputChange('gender', e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${errors.gender ? 'border-red-300' : 'border-gray-300'}`}\n              >\n                <option value=\"\">Select gender</option>\n                <option value=\"male\">Male</option>\n                <option value=\"female\">Female</option>\n                <option value=\"other\">Other</option>\n              </select>\n              {errors.gender && <p className=\"text-red-500 text-xs mt-1\">{errors.gender}</p>}\n            </div>\n\n            <div>\n              <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Phone Number <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"tel\"\n                id=\"phone\"\n                value={formData.phone}\n                onChange={(e) => handleInputChange('phone', e.target.value)}\n                className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${errors.phone ? 'border-red-300' : 'border-gray-300'}`}\n                placeholder=\"Enter phone number\"\n              />\n              {errors.phone && <p className=\"text-red-500 text-xs mt-1\">{errors.phone}</p>}\n            </div>\n\n            <div>\n              <label htmlFor=\"bloodGroup\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Blood Group <span className=\"text-gray-400\">(if known)</span>\n              </label>\n              <select\n                id=\"bloodGroup\"\n                value={formData.bloodGroup}\n                onChange={(e) => handleInputChange('bloodGroup', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n              >\n                <option value=\"\">Select blood group</option>\n                <option value=\"A+\">A+</option>\n                <option value=\"A-\">A-</option>\n                <option value=\"B+\">B+</option>\n                <option value=\"B-\">B-</option>\n                <option value=\"AB+\">AB+</option>\n                <option value=\"AB-\">AB-</option>\n                <option value=\"O+\">O+</option>\n                <option value=\"O-\">O-</option>\n              </select>\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"address\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Address <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              id=\"address\"\n              value={formData.address}\n              onChange={(e) => handleInputChange('address', e.target.value)}\n              rows={2}\n              className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${errors.address ? 'border-red-300' : 'border-gray-300'}`}\n              placeholder=\"Enter complete address\"\n            />\n            {errors.address && <p className=\"text-red-500 text-xs mt-1\">{errors.address}</p>}\n          </div>\n\n          {/* Medical Information */}\n          <div className=\"flex items-center gap-3 mb-4 mt-8\">\n            <div className=\"p-2 bg-red-100 rounded-lg\">\n              <Stethoscope className=\"h-5 w-5 text-red-600\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">Emergency Medical Information</h3>\n              <p className=\"text-sm text-gray-500\">Critical information for immediate care</p>\n            </div>\n          </div>\n\n          <div>\n            <label htmlFor=\"primaryComplaint\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Primary Complaint / Chief Complaint <span className=\"text-red-500\">*</span>\n            </label>\n            <textarea\n              id=\"primaryComplaint\"\n              value={formData.primaryComplaint}\n              onChange={(e) => handleInputChange('primaryComplaint', e.target.value)}\n              rows={3}\n              className={`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 ${errors.primaryComplaint ? 'border-red-300' : 'border-gray-300'}`}\n              placeholder=\"Describe the main reason for this emergency visit\"\n            />\n            {errors.primaryComplaint && <p className=\"text-red-500 text-xs mt-1\">{errors.primaryComplaint}</p>}\n          </div>\n\n          <div>\n            <label htmlFor=\"allergies\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Known Allergies <span className=\"text-gray-400\">(if any)</span>\n            </label>\n            <textarea\n              id=\"allergies\"\n              value={formData.allergies}\n              onChange={(e) => handleInputChange('allergies', e.target.value)}\n              rows={2}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n              placeholder=\"List any known allergies (medications, food, etc.) or type 'None'\"\n            />\n          </div>\n\n          {/* Emergency Contact */}\n          <div className=\"flex items-center gap-3 mb-4 mt-8\">\n            <div className=\"p-2 bg-blue-100 rounded-lg\">\n              <Phone className=\"h-5 w-5 text-blue-600\" />\n            </div>\n            <div>\n              <h3 className=\"text-lg font-semibold text-gray-900\">Emergency Contact</h3>\n              <p className=\"text-sm text-gray-500\">Optional but recommended for emergency situations</p>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label htmlFor=\"emergencyContactName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Contact Name\n              </label>\n              <input\n                type=\"text\"\n                id=\"emergencyContactName\"\n                value={formData.emergencyContactName}\n                onChange={(e) => handleInputChange('emergencyContactName', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                placeholder=\"Emergency contact name\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"emergencyContactPhone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Contact Phone\n              </label>\n              <input\n                type=\"tel\"\n                id=\"emergencyContactPhone\"\n                value={formData.emergencyContactPhone}\n                onChange={(e) => handleInputChange('emergencyContactPhone', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                placeholder=\"Emergency contact phone\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"emergencyContactRelationship\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Relationship\n              </label>\n              <select\n                id=\"emergencyContactRelationship\"\n                value={formData.emergencyContactRelationship}\n                onChange={(e) => handleInputChange('emergencyContactRelationship', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n              >\n                <option value=\"\">Select relationship</option>\n                <option value=\"spouse\">Spouse</option>\n                <option value=\"parent\">Parent</option>\n                <option value=\"child\">Child</option>\n                <option value=\"sibling\">Sibling</option>\n                <option value=\"friend\">Friend</option>\n                <option value=\"other\">Other</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* Action Buttons */}\n        <div className=\"flex gap-4 pt-6 mt-8 border-t border-gray-200\">\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"flex-1 flex items-center justify-center bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors\"\n          >\n            <X className=\"h-4 w-4 mr-2\" />\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            disabled={isLoading || isGeneratingUHID}\n            className=\"flex-1 flex items-center justify-center bg-red-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n          >\n            {isLoading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                Registering Emergency Patient...\n              </>\n            ) : (\n              <>\n                <UserPlus className=\"h-4 w-4 mr-2\" />\n                Register Emergency Patient\n              </>\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1923, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/app/patients/emergency-register/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport EmergencyPatientRegistrationForm from '../../../components/EmergencyPatientRegistrationForm';\nimport { registerNewPatient, PatientRegistrationData } from '../../../src/lib/patientService';\nimport { CheckCircle, AlertCircle, Copy, Eye, EyeOff, AlertTriangle } from 'lucide-react';\n\n// Interface for emergency patient data\ninterface EmergencyPatientData {\n  firstName: string;\n  lastName: string;\n  dateOfBirth: string;\n  gender: string;\n  phone: string;\n  address: string;\n  primaryComplaint: string;\n  allergies?: string;\n  bloodGroup?: string;\n  emergencyContactName?: string;\n  emergencyContactPhone?: string;\n  emergencyContactRelationship?: string;\n  admissionType: string;\n  admissionDate: string;\n  admissionTime: string;\n}\n\nexport default function EmergencyPatientRegisterPage() {\n  const router = useRouter();\n  const [isLoading, setIsLoading] = useState(false);\n  const [registrationResult, setRegistrationResult] = useState<{\n    success: boolean;\n    uhid?: string;\n    credentials?: { email: string; password: string };\n    error?: string;\n  } | null>(null);\n  const [showPassword, setShowPassword] = useState(false);\n\n  // Convert emergency data to full registration data\n  const convertToFullRegistrationData = (emergencyData: EmergencyPatientData): PatientRegistrationData => {\n    return {\n      firstName: emergencyData.firstName,\n      lastName: emergencyData.lastName,\n      dateOfBirth: emergencyData.dateOfBirth,\n      gender: emergencyData.gender,\n      phone: emergencyData.phone,\n      address: emergencyData.address,\n      primaryComplaint: emergencyData.primaryComplaint,\n      admissionType: emergencyData.admissionType,\n      admissionDate: emergencyData.admissionDate,\n      admissionTime: emergencyData.admissionTime,\n      \n      // Optional fields from emergency form\n      allergies: emergencyData.allergies || '',\n      bloodGroup: emergencyData.bloodGroup || '',\n      emergencyContactName: emergencyData.emergencyContactName || '',\n      emergencyContactPhone: emergencyData.emergencyContactPhone || '',\n      emergencyContactRelationship: emergencyData.emergencyContactRelationship || '',\n      \n      // Default/empty values for fields not collected in emergency registration\n      maritalStatus: '',\n      email: '',\n      medicalHistory: '',\n      currentMedications: '',\n      chronicConditions: '',\n      previousSurgeries: '',\n      referringDoctorFacility: '',\n      consultingDoctorName: '',\n      consultingDoctorId: '',\n      departmentWard: '',\n      roomNumber: '',\n      guardianName: '',\n      guardianRelationship: '',\n      guardianPhone: '',\n      guardianAddress: '',\n      insuranceProvider: '',\n      insuranceNumber: '',\n      initialSymptoms: '',\n      referredBy: ''\n    };\n  };\n\n  const handleEmergencyRegistrationSubmit = async (data: EmergencyPatientData, previewUHID?: string) => {\n    setIsLoading(true);\n    \n    try {\n      // Convert emergency data to full registration format\n      const fullRegistrationData = convertToFullRegistrationData(data);\n      \n      const result = await registerNewPatient(fullRegistrationData, previewUHID);\n      setRegistrationResult(result);\n      \n      if (result.success) {\n        // Auto-hide success message after 8 seconds and redirect for emergency cases\n        setTimeout(() => {\n          router.push('/patients');\n        }, 8000);\n      }\n    } catch (error) {\n      console.error('Emergency registration error:', error);\n      setRegistrationResult({\n        success: false,\n        error: 'An unexpected error occurred during emergency registration'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    router.push('/patients');\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n  };\n\n  const renderSuccessResult = () => {\n    if (!registrationResult?.success || !registrationResult.uhid || !registrationResult.credentials) {\n      return null;\n    }\n\n    return (\n      <div className=\"max-w-2xl mx-auto bg-white rounded-xl shadow-lg border border-gray-200\">\n        <div className=\"p-6 border-b border-gray-200 bg-green-50\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-green-100 rounded-lg\">\n              <CheckCircle className=\"h-6 w-6 text-green-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-green-900\">Emergency Patient Registration Successful!</h2>\n              <p className=\"text-sm text-green-700\">Patient has been registered for emergency care</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* UHID Information */}\n          <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n            <h3 className=\"font-semibold text-red-900 mb-3 flex items-center gap-2\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              Emergency Patient UHID\n            </h3>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"bg-white px-4 py-2 rounded-lg border border-red-300 font-mono text-lg font-bold text-red-900 flex-1\">\n                {registrationResult.uhid}\n              </div>\n              <button\n                onClick={() => copyToClipboard(registrationResult.uhid!)}\n                className=\"p-2 bg-red-100 hover:bg-red-200 rounded-lg transition-colors\"\n                title=\"Copy UHID\"\n              >\n                <Copy className=\"h-4 w-4 text-red-600\" />\n              </button>\n            </div>\n            <p className=\"text-sm text-red-700 mt-2\">\n              This UHID is for emergency care. Additional information can be updated later.\n            </p>\n          </div>\n\n          {/* Login Credentials */}\n          <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n            <h3 className=\"font-semibold text-blue-900 mb-3\">Patient Portal Login Credentials</h3>\n            \n            <div className=\"space-y-3\">\n              <div>\n                <label className=\"block text-sm font-medium text-blue-700 mb-1\">Email Address</label>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"bg-white px-3 py-2 rounded-lg border border-blue-300 font-mono text-sm flex-1\">\n                    {registrationResult.credentials.email}\n                  </div>\n                  <button\n                    onClick={() => copyToClipboard(registrationResult.credentials!.email)}\n                    className=\"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors\"\n                    title=\"Copy Email\"\n                  >\n                    <Copy className=\"h-4 w-4 text-blue-600\" />\n                  </button>\n                </div>\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-blue-700 mb-1\">Temporary Password</label>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"bg-white px-3 py-2 rounded-lg border border-blue-300 font-mono text-sm flex-1\">\n                    {showPassword ? registrationResult.credentials.password : ''}\n                  </div>\n                  <button\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors\"\n                    title={showPassword ? \"Hide Password\" : \"Show Password\"}\n                  >\n                    {showPassword ? <EyeOff className=\"h-4 w-4 text-blue-600\" /> : <Eye className=\"h-4 w-4 text-blue-600\" />}\n                  </button>\n                  <button\n                    onClick={() => copyToClipboard(registrationResult.credentials!.password)}\n                    className=\"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors\"\n                    title=\"Copy Password\"\n                  >\n                    <Copy className=\"h-4 w-4 text-blue-600\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"mt-4 p-3 bg-blue-100 rounded-lg\">\n              <p className=\"text-sm text-blue-800\">\n                <strong>Important:</strong> Please provide these credentials to the patient or their emergency contact. \n                The patient should change the password upon first login.\n              </p>\n            </div>\n          </div>\n\n          {/* Next Steps */}\n          <div className=\"bg-orange-50 p-4 rounded-lg border border-orange-200\">\n            <h3 className=\"font-semibold text-orange-900 mb-3\">Next Steps for Emergency Care</h3>\n            <ul className=\"text-sm text-orange-800 space-y-2\">\n              <li> Patient can now be admitted for emergency treatment</li>\n              <li> Additional medical information can be collected during treatment</li>\n              <li> Insurance and detailed medical history can be updated later</li>\n              <li> Emergency contact has been notified if provided</li>\n            </ul>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => router.push(`/patients/${registrationResult.uhid}`)}\n              className=\"flex-1 bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors\"\n            >\n              View Patient Details\n            </button>\n            <button\n              onClick={() => router.push('/patients')}\n              className=\"flex-1 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors\"\n            >\n              Back to Patients\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderErrorResult = () => {\n    if (!registrationResult || registrationResult.success) {\n      return null;\n    }\n\n    return (\n      <div className=\"max-w-2xl mx-auto bg-white rounded-xl shadow-lg border border-red-200\">\n        <div className=\"p-6 border-b border-red-200 bg-red-50\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-red-100 rounded-lg\">\n              <AlertCircle className=\"h-6 w-6 text-red-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-red-900\">Emergency Registration Failed</h2>\n              <p className=\"text-sm text-red-700\">There was an error during the registration process</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          <div className=\"bg-red-50 p-4 rounded-lg border border-red-200 mb-6\">\n            <p className=\"text-red-800\">{registrationResult.error}</p>\n          </div>\n          \n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setRegistrationResult(null)}\n              className=\"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors\"\n            >\n              Try Again\n            </button>\n            <button\n              onClick={() => router.push('/patients')}\n              className=\"flex-1 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  // Show result screens if registration is complete\n  if (registrationResult) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 py-8\">\n        <div className=\"container mx-auto px-4\">\n          {registrationResult.success ? renderSuccessResult() : renderErrorResult()}\n        </div>\n      </div>\n    );\n  }\n\n  // Show the emergency registration form\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"container mx-auto px-4\">\n        <EmergencyPatientRegistrationForm\n          onSubmit={handleEmergencyRegistrationSubmit}\n          onCancel={handleCancel}\n          isLoading={isLoading}\n        />\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}