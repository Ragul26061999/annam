"use strict";(()=>{var e={};e.id=769,e.ids=[220,769],e.modules={8732:e=>{e.exports=require("react/jsx-runtime")},19380:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let s=a(87020),r=a(8732),n=s._(a(82015)),i=a(6370);async function o(e){let{Component:t,ctx:a}=e;return{pageProps:await (0,i.loadGetInitialProps)(t,a)}}class l extends n.default.Component{render(){let{Component:e,pageProps:t}=this.props;return(0,r.jsx)(e,{...t})}}l.origGetInitialProps=o,l.getInitialProps=o,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},33873:e=>{e.exports=require("path")},40361:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},78916:(e,t,a)=>{a.r(t),a.d(t,{config:()=>eu,default:()=>ed,getServerSideProps:()=>ex,getStaticPaths:()=>ep,getStaticProps:()=>em,reportWebVitals:()=>eh,routeModule:()=>ev,unstable_getServerProps:()=>eb,unstable_getServerSideProps:()=>ej,unstable_getStaticParams:()=>ef,unstable_getStaticPaths:()=>ey,unstable_getStaticProps:()=>eg});var s={};a.r(s),a.d(s,{default:()=>ec});var r=a(63885),n=a(80237),i=a(81413),o=a(58548),l=a.n(o),c=a(19380),d=a.n(c),m=a(8732),p=a(82015);let x=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),u=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),h=e=>{let t=u(e);return t.charAt(0).toUpperCase()+t.slice(1)},g=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),y=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var f={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let b=(0,p.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:r="",children:n,iconNode:i,...o},l)=>(0,p.createElement)("svg",{ref:l,...f,width:t,height:t,stroke:e,strokeWidth:s?24*Number(a)/Number(t):a,className:g("lucide",r),...!n&&!y(o)&&{"aria-hidden":"true"},...o},[...i.map(([e,t])=>(0,p.createElement)(e,t)),...Array.isArray(n)?n:[n]])),j=(e,t)=>{let a=(0,p.forwardRef)(({className:a,...s},r)=>(0,p.createElement)(b,{ref:r,iconNode:t,className:g(`lucide-${x(h(e))}`,`lucide-${e}`,a),...s}));return a.displayName=h(e),a},v=j("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),w=j("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),N=j("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),k=j("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),S=j("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_=j("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),D=j("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),M=j("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),A=j("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),C=j("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),P=j("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),E=j("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),T=j("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),z=j("indian-rupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]),$=j("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),I=j("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),q=j("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),O=(0,require("@supabase/supabase-js").createClient)("https://zusheijhebsmjiyyeiqq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp1c2hlaWpoZWJzbWppeXllaXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MjI0NDAsImV4cCI6MjA2NzM5ODQ0MH0.iwGPaOJPa6OvwX_iA1xvRt5cM72DWfd8Br1pwRTemRc");async function F(e={}){try{let{page:t=1,limit:a=20,specialization:s,department:r,availabilityStatus:n,searchTerm:i,includeMD:o=!1}=e,l=(t-1)*a,c=O.from("doctors").select(`
        *,
        user:users(id, name, email, phone, address)
      `,{count:"exact"});if(s&&(c=c.eq("specialization",s)),r){let e={Cardiology:"Cardiology",Pediatrics:"Pediatrics",Orthopedics:"Orthopedics",Neurology:"Neurology",Dermatology:"Dermatology","Obstetrics & Gynecology":"Gynecology",Psychiatry:"Psychiatry",Radiology:"Radiology",Anesthesiology:"Anesthesiology",Emergency:"Emergency Medicine","Internal Medicine":"Internal Medicine",Surgery:"Surgery"}[r]||null;e&&(c=c.eq("specialization",e))}n&&(c=c.eq("status","active")),i&&(c=c.or(`
        license_number.ilike.%${i}%,
        specialization.ilike.%${i}%
      `));let{data:d,error:m,count:p}=await c.range(l,l+a-1).order("created_at",{ascending:!1});if(m)throw console.error("Error fetching doctors:",m),Error(`Failed to fetch doctors: ${m.message}`);return{doctors:(d||[])?.map(e=>({...e,doctor_id:e.license_number,department:L(e.specialization),experience_years:e.years_of_experience,working_hours_start:"09:00",working_hours_end:"17:00",working_days:[1,2,3,4,5,6],floor_number:1,availability_status:"available",emergency_available:!1}))||[],total:p||0,page:t,limit:a}}catch(e){throw console.error("Error fetching doctors:",e),e}}function L(e){return({Cardiology:"Cardiology",Pediatrics:"Pediatrics",Orthopedics:"Orthopedics",Neurology:"Neurology",Dermatology:"Dermatology",Gynecology:"Obstetrics & Gynecology",Psychiatry:"Psychiatry",Radiology:"Radiology",Anesthesiology:"Anesthesiology","Emergency Medicine":"Emergency","Internal Medicine":"Internal Medicine",Surgery:"Surgery",Oncology:"Oncology",Ophthalmology:"Ophthalmology",ENT:"ENT (Ear, Nose & Throat)",Urology:"Urology",Gastroenterology:"Gastroenterology",Endocrinology:"Endocrinology",Nephrology:"Nephrology",Pulmonology:"Pulmonology",Rheumatology:"Rheumatology",Hematology:"Hematology","Infectious Disease":"Infectious Disease",Pathology:"Pathology","Physical Medicine":"Physical Medicine & Rehabilitation","Plastic Surgery":"Plastic Surgery","Vascular Surgery":"Vascular Surgery","Thoracic Surgery":"Thoracic Surgery",Neurosurgery:"Neurosurgery",Dental:"Dental",Physiotherapy:"Physiotherapy",Nutrition:"Nutrition & Dietetics",Other:"Other"})[e]||e}async function B(e){try{let{data:t,error:a}=await supabase.from("doctors").select(`
        *,
        user:users(id, name, email, phone, address)
      `).eq("license_number",e).single();if(a)throw console.error("Error fetching doctor:",a),Error(`Doctor not found: ${a.message}`);return{...t,doctor_id:t.license_number,department:L(t.specialization),experience_years:t.years_of_experience,working_hours_start:"09:00",working_hours_end:"17:00",working_days:[1,2,3,4,5,6],floor_number:1,availability_status:"available",emergency_available:!1}}catch(e){throw console.error("Error fetching doctor:",e),e}}async function G(){try{let{data:e,error:t}=await O.from("doctors").select("specialization").eq("status","active");if(t)throw console.error("Error fetching specializations:",t),Error(`Failed to fetch specializations: ${t.message}`);return[...new Set(e?.map(e=>e.specialization)||[])].sort()}catch(e){throw console.error("Error fetching specializations:",e),e}}let R={maxAppointmentsPerDay:30,minAdvanceBookingHours:0,maxAdvanceBookingDays:180,allowWeekendBooking:!0,emergencySlotBuffer:10,followUpGracePeriod:14,allowEmergencyBooking:!0,emergencyMaxAdvanceDays:30};async function V(e,t=R){let a=[],s=[];e.patientId||a.push("Patient ID is required"),e.doctorId||a.push("Doctor ID is required"),e.appointmentDate||a.push("Appointment date is required"),e.appointmentTime||a.push("Appointment time is required");let r=new Date(`${e.appointmentDate}T${e.appointmentTime}`),n=new Date,i=r.getDay();if(r<n&&a.push("Appointment cannot be scheduled in the past"),e.isEmergency&&t.allowEmergencyBooking)(r.getTime()-n.getTime())/864e5>t.emergencyMaxAdvanceDays&&a.push(`Emergency appointments cannot be booked more than ${t.emergencyMaxAdvanceDays} days in advance`);else{(r.getTime()-n.getTime())/864e5>t.maxAdvanceBookingDays&&a.push(`Appointments cannot be booked more than ${t.maxAdvanceBookingDays} days in advance`),t.allowWeekendBooking||0!==i&&6!==i||s.push("Weekend appointments may have limited availability");let e=r.getHours();(e<7||e>=20)&&s.push("Appointments outside 7:00 AM to 8:00 PM may have limited doctor availability")}return e.durationMinutes&&(e.durationMinutes<15||e.durationMinutes>120)&&a.push("Appointment duration must be between 15 and 120 minutes"),{isValid:0===a.length,errors:a,warnings:s}}async function U(e,t){let a=[],s=[];try{let r=new Date(`${e.appointmentDate}T${e.appointmentTime}`),n=e.durationMinutes||30,i=new Date(r.getTime()+6e4*n),o=O.from("appointments").select("id, appointment_time, duration_minutes").eq("doctor_id",e.doctorId).eq("appointment_date",e.appointmentDate).in("status",["scheduled","confirmed","in_progress"]);t&&(o=o.neq("id",t));let{data:l,error:c}=await o;if(c)return a.push("Failed to check doctor availability"),{isValid:!1,errors:a,warnings:s};for(let t of l||[]){let s=new Date(`${e.appointmentDate}T${t.appointment_time}`),n=new Date(s.getTime()+6e4*(t.duration_minutes||30));(r>=s&&r<n||i>s&&i<=n||r<=s&&i>=n)&&a.push(`Doctor has a conflicting appointment at ${t.appointment_time}`)}let d=O.from("appointments").select("id, appointment_time, duration_minutes").eq("patient_id",e.patientId).eq("appointment_date",e.appointmentDate).in("status",["scheduled","confirmed","in_progress"]);t&&(d=d.neq("id",t));let{data:m,error:p}=await d;if(p)return a.push("Failed to check patient availability"),{isValid:!1,errors:a,warnings:s};for(let t of m||[]){let s=new Date(`${e.appointmentDate}T${t.appointment_time}`),n=new Date(s.getTime()+6e4*(t.duration_minutes||30));(r>=s&&r<n||i>s&&i<=n||r<=s&&i>=n)&&a.push(`Patient has a conflicting appointment at ${t.appointment_time}`)}let{count:x,error:u}=await O.from("appointments").select("id",{count:"exact",head:!0}).eq("doctor_id",e.doctorId).eq("appointment_date",e.appointmentDate).in("status",["scheduled","confirmed","in_progress"]);u?s.push("Could not verify daily appointment limit"):(x||0)>=R.maxAppointmentsPerDay&&a.push(`Doctor has reached the maximum daily appointment limit (${R.maxAppointmentsPerDay})`)}catch(e){console.error("Error checking appointment conflicts:",e),a.push("Failed to validate appointment conflicts")}return{isValid:0===a.length,errors:a,warnings:s}}async function W(e,t,a=R){let s=await V(e,a);if(!s.isValid)return s;let r=await U(e,t);return{isValid:s.isValid&&r.isValid,errors:[...s.errors,...r.errors],warnings:[...s.warnings,...r.warnings]}}function H(e){if(!e)return null;let t=e.match(/Token:\s*([A-Z]\d{3})/);return t?t[1]:null}async function J(){let e=new Date,t=e.getFullYear().toString(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0"),r=`${t}${a}${s}`;try{let{count:e,error:t}=await O.from("appointments").select("id",{count:"exact",head:!0}).like("appointment_id",`APT${r}%`);if(t)throw console.error("Error getting appointment count:",t),Error("Failed to generate appointment ID");let a=((e||0)+1).toString().padStart(4,"0");return`APT${r}${a}`}catch(e){throw console.error("Error generating appointment ID:",e),e}}async function X(e,t){try{let{count:a,error:s}=await O.from("appointments").select("id",{count:"exact",head:!0}).eq("doctor_id",e).eq("appointment_date",t).in("status",["scheduled","confirmed","in_progress","completed"]);if(s)throw console.error("Error getting appointment token count:",s),Error("Failed to generate appointment token");return(a||0)+1}catch(e){throw console.error("Error generating appointment token:",e),e}}async function Z(e,t){try{let a=await W(e);if(!a.isValid){let e=a.errors.join("; ");throw Error(`Appointment validation failed: ${e}`)}a.warnings.length>0&&console.warn("Appointment warnings:",a.warnings.join("; "));let{data:s}=await O.from("doctors").select("id").eq("id",e.doctorId).single();if(!s)throw Error(`Doctor with ID ${e.doctorId} not found. Only registered doctors can have appointments.`);let r=await J(),n=await X(e.doctorId,e.appointmentDate),i={appointment_id:r,patient_id:e.patientId,doctor_id:e.doctorId,appointment_date:e.appointmentDate,appointment_time:e.appointmentTime,duration_minutes:e.durationMinutes||30,type:e.type,status:"scheduled",symptoms:e.chiefComplaint||e.symptoms||null,notes:e.notes?`Token: ${n} | ${e.notes}`:`Token: ${n}`,created_by:t||null},{data:o,error:l}=await O.from("appointments").insert([i]).select(`
        *,
        patient:patients(id, patient_id, name, phone, email)
      `).single();if(l)throw console.error("Error creating appointment:",l),Error(`Failed to create appointment: ${l.message}`);let{data:c}=await O.from("doctors").select(`
        id,
        specialization,
        qualification,
        user:users(name, phone, email)
      `).eq("id",e.doctorId).single();return{...o,doctor:c}}catch(e){throw console.error("Error creating appointment:",e),e}}async function Y(e={}){try{let{page:t=1,limit:a=20,patientId:s,doctorId:r,date:n,status:i,type:o,searchTerm:l}=e,c=(t-1)*a,d=O.from("appointments").select(`
        *,
        patient:patients(id, patient_id, name, phone, email)
      `,{count:"exact"});s&&(d=d.eq("patient_id",s)),r&&(d=d.eq("doctor_id",r)),n&&(d=d.eq("appointment_date",n)),i&&(d=d.eq("status",i)),o&&(d=d.eq("type",o)),l&&(d=d.or(`
        appointment_id.ilike.%${l}%,
        symptoms.ilike.%${l}%,
        chief_complaint.ilike.%${l}%,
        diagnosis.ilike.%${l}%
      `));let{data:m,error:p,count:x}=await d.range(c,c+a-1).order("appointment_date",{ascending:!1}).order("appointment_time",{ascending:!1});if(p)throw console.error("Error fetching appointments:",p),Error(`Failed to fetch appointments: ${p.message}`);return{appointments:await Promise.all((m||[]).map(async e=>{let t=null,{data:a}=await O.from("doctors").select(`
            id,
            specialization,
            qualification,
            user:users(name, phone, email)
          `).eq("id",e.doctor_id).single();return a&&(t=a),{...e,doctor:t}})),total:x||0,page:t,limit:a}}catch(e){throw console.error("Error fetching appointments:",e),e}}async function Q(e,t){try{let{data:a,error:s}=await O.from("appointments").update({status:t}).eq("appointment_id",e).select(`
        *,
        patient:patients(id, patient_id, name, phone, email),
        doctor:doctors(
          id,
          specialization,
          user:users(name, phone, email)
        )
      `).single();if(s)throw console.error("Error updating appointment status:",s),Error(`Failed to update appointment status: ${s.message}`);return a}catch(e){throw console.error("Error updating appointment status:",e),e}}async function K(e,t,a=!1){try{let s=null,r=null,{data:n,error:i}=await O.from("doctors").select(`
        *,
        user:users(name, role)
      `).eq("id",e).single();if(n?s=n:r=i,r||!s)throw console.error("Error fetching doctor:",r),Error(`Doctor not found: ${r?.message||"Doctor does not exist"}`);let{data:o,error:l}=await O.from("appointments").select("appointment_time, duration_minutes").eq("doctor_id",e).eq("appointment_date",t).in("status",["scheduled","confirmed","in_progress"]);if(l)throw console.error("Error fetching existing appointments:",l),Error(`Failed to fetch existing appointments: ${l.message}`);let c=[],d=s.availability_hours;if(!d||!d.sessions||!d.availableSessions)return console.warn("Doctor has no session-based availability configured"),c;let m=new Date(t).getDay();if(!(d.workingDays||[]).includes(m))return c;if(a){for(let a=0;a<24;a++)for(let r=0;r<60;r+=30){let n=`${a.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`,i=o?.some(e=>{let t=e.appointment_time,a=e.duration_minutes||30,s=new Date(`2000-01-01T${t}`);s.setMinutes(s.getMinutes()+a);let r=new Date(`2000-01-01T${n}`),i=new Date(r);return i.setMinutes(i.getMinutes()+30),r<s&&i>new Date(`2000-01-01T${t}`)});c.push({date:t,time:n,available:!i,doctorId:e,doctorName:s.user?.name||"Unknown",specialization:s.specialization,isEmergency:!0})}return c}let p={morning:{start:"09:00",end:"12:00"},afternoon:{start:"14:00",end:"17:00"},evening:{start:"18:00",end:"21:00"}};return d.availableSessions.forEach(a=>{let r=d.sessions[a],n=p[a];if(!r||!n)return;let i=parseInt(r.startTime?.split(":")[0]||n.start.split(":")[0]),l=parseInt(r.endTime?.split(":")[0]||n.end.split(":")[0]),m=r.maxPatients||8,x=Math.floor((l-i)*60/30),u=Math.min(x,m),h=0;for(let r=i;r<l&&h<u;r++)for(let n=0;n<60&&h<u;n+=30){let i=`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`,l=o?.some(e=>{let t=e.appointment_time,a=e.duration_minutes||30,s=new Date(`2000-01-01T${t}`);s.setMinutes(s.getMinutes()+a);let r=new Date(`2000-01-01T${i}`),n=new Date(r);return n.setMinutes(n.getMinutes()+30),r<s&&n>new Date(`2000-01-01T${t}`)});c.push({date:t,time:i,available:!l,doctorId:e,doctorName:s.user?.name||"Unknown",specialization:s.specialization,sessionType:a}),h++}}),c}catch(e){throw console.error("Error generating available slots:",e),e}}async function ee(e,t){try{let a={status:"cancelled"};t&&(a.notes=t);let{data:s,error:r}=await O.from("appointments").update(a).eq("appointment_id",e).select(`
        *,
        patient:patients(id, patient_id, name, phone, email),
        doctor:doctors(
          id, 
          doctor_id, 
          specialization, 
          department,
          user:users(name, phone, email)
        )
      `).single();if(r)throw console.error("Error cancelling appointment:",r),Error(`Failed to cancel appointment: ${r.message}`);return s}catch(e){throw console.error("Error cancelling appointment:",e),e}}async function et(e={}){try{let{page:t=1,limit:a=20,status:s,searchTerm:r}=e,n=(t-1)*a,i=O.from("patients").select(`
        *,
        users:user_id (
          id,
          name,
          email,
          role,
          status,
          permissions
        )
      `,{count:"exact"});s&&(i=i.eq("status",s)),r&&(i=i.or(`name.ilike.%${r}%,patient_id.ilike.%${r}%,phone.ilike.%${r}%`));let{data:o,error:l,count:c}=await i.range(n,n+a-1).order("created_at",{ascending:!1});if(l)throw console.error("Error fetching patients:",l),Error(`Failed to fetch patients: ${l.message}`);return{patients:o||[],total:c||0,page:t,limit:a}}catch(e){throw console.error("Error fetching patients:",e),e}}let ea=({isOpen:e,onClose:t,onSuccess:a,patientId:s,doctorId:r})=>{let[n,i]=(0,p.useState)(1),[o,l]=(0,p.useState)(!1),[c,d]=(0,p.useState)(""),[x,u]=(0,p.useState)(""),[h,g]=(0,p.useState)({patientId:s||"",doctorId:r||"",appointmentDate:"",appointmentTime:"",durationMinutes:30,type:"consultation",symptoms:"",notes:"",isEmergency:!1,sessionType:"morning"}),[y,f]=(0,p.useState)([]),[b,j]=(0,p.useState)([]),[N,k]=(0,p.useState)([]),[S,_]=(0,p.useState)(""),[O,L]=(0,p.useState)([]),[B,R]=(0,p.useState)(null),[V,U]=(0,p.useState)(null),[W,J]=(0,p.useState)(""),[X,Y]=(0,p.useState)(""),[Q,ee]=(0,p.useState)(!1);(0,p.useEffect)(()=>{e&&ea()},[e]),(0,p.useEffect)(()=>{h.doctorId&&h.appointmentDate&&es()},[h.doctorId,h.appointmentDate,h.isEmergency]);let ea=async()=>{try{l(!0);let[e,t,a]=await Promise.all([et({limit:100}),F(),G()]);if(f(e.patients||[]),j(t.doctors||[]),k(a||[]),s){let t=e.patients?.find(e=>e.id===s);t&&U(t)}if(r){let e=t.doctors?.find(e=>e.id===r);e&&(R(e),_(e.specialization))}}catch(e){console.error("Error loading initial data:",e),d("Failed to load data. Please try again.")}finally{l(!1)}},es=async()=>{try{let e=await K(h.doctorId,h.appointmentDate,h.isEmergency);L(e.map(e=>({time:e.time,available:e.available})))}catch(e){console.error("Error loading available slots:",e),d("Failed to load available time slots.")}},er=async e=>{if(e.preventDefault(),!h.patientId||!h.doctorId||!h.appointmentDate||!h.appointmentTime)return void d("Please fill in all required fields.");try{l(!0),d("");let e=await Z(h),t=H(e?.notes);u(t?`Appointment for ${V?.first_name} ${V?.last_name} booked successfully! Your token number is ${t}.`:`Appointment for ${V?.first_name} ${V?.last_name} booked successfully!`),setTimeout(()=>{a?.(e),en()},1500)}catch(e){console.error("Error creating appointment:",e),d(e.message||"Failed to book appointment. Please try again.")}finally{l(!1)}},en=()=>{i(1),g({patientId:"",doctorId:"",appointmentDate:"",appointmentTime:"",durationMinutes:30,type:"consultation",symptoms:"",notes:"",isEmergency:!1,sessionType:"morning"}),d(""),u(""),U(null),R(null),_(""),J(""),Y(""),ee(!1),t()},ei=y.filter(e=>`${e.first_name} ${e.last_name}`.toLowerCase().includes(W.toLowerCase())||e.patient_id.toLowerCase().includes(W.toLowerCase())||e.phone.includes(W)),eo=b.filter(e=>{let t=e.user?.name?.toLowerCase().includes(X.toLowerCase())||e.license_number.toLowerCase().includes(X.toLowerCase()),a=!S||e.specialization===S;return t&&a});return e?(0,m.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 backdrop-blur-sm",children:(0,m.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,m.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-3xl shadow-2xl border border-gray-100 overflow-hidden",children:[(0,m.jsxs)("div",{className:"bg-white px-8 py-6 border-b border-gray-200",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Book New Appointment"}),(0,m.jsxs)("p",{className:"text-gray-500 mt-1 text-sm",children:["Step ",n," of 4: ",["Select Patient","Select Doctor","Select Date & Time","Confirm Details"][n-1]]})]}),(0,m.jsx)("button",{onClick:en,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-full transition-colors",children:(0,m.jsx)(D,{size:24})})]}),(0,m.jsx)("div",{className:"mt-4 bg-gray-200 rounded-full h-2",children:(0,m.jsx)("div",{className:"bg-orange-500 h-2 rounded-full transition-all duration-300",style:{width:`${n/4*100}%`}})})]}),(0,m.jsxs)("div",{className:"p-8",children:[c&&(0,m.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center",children:[(0,m.jsx)(M,{className:"text-red-500 mr-3",size:20}),(0,m.jsx)("span",{className:"text-red-700",children:c})]}),x&&(0,m.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center",children:[(0,m.jsx)(A,{className:"text-green-500 mr-3",size:20}),(0,m.jsx)("span",{className:"text-green-700",children:x})]}),(0,m.jsxs)("form",{onSubmit:er,className:"space-y-6",children:[1===n&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)(C,{className:"mx-auto h-12 w-12 text-orange-500 mb-4"}),(0,m.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Select Patient"}),(0,m.jsx)("p",{className:"text-gray-500 mt-2",children:"Choose the patient for this appointment"})]}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,m.jsx)("input",{type:"text",placeholder:"Search by name, patient ID, or phone...",value:W,onChange:e=>J(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,m.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-2",children:ei.map(e=>(0,m.jsx)("div",{onClick:()=>{U(e),g(t=>({...t,patientId:e.id}))},className:`p-4 border rounded-xl cursor-pointer transition-all ${V?.id===e.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("h4",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.patient_id]}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["Phone: ",e.phone]})]}),V?.id===e.id&&(0,m.jsx)(A,{className:"text-orange-500",size:20})]})},e.id))}),(0,m.jsx)("div",{className:"flex justify-end",children:(0,m.jsx)("button",{type:"button",onClick:()=>i(2),disabled:!V,className:"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next: Select Doctor"})})]}),2===n&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)(E,{className:"mx-auto h-12 w-12 text-orange-500 mb-4"}),(0,m.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Select Doctor"}),(0,m.jsx)("p",{className:"text-gray-500 mt-2",children:"Choose a doctor for the consultation"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,m.jsx)("input",{type:"text",placeholder:"Search doctors...",value:X,onChange:e=>Y(e.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,m.jsxs)("select",{value:S,onChange:e=>_(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,m.jsx)("option",{value:"",children:"All Specializations"}),N.map(e=>(0,m.jsx)("option",{value:e,children:e},e))]})]}),(0,m.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-3",children:eo.map(e=>(0,m.jsx)("div",{onClick:()=>{R(e),g(t=>({...t,doctorId:e.id}))},className:`p-4 border rounded-xl cursor-pointer transition-all ${B?.id===e.id?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("h4",{className:"font-medium text-gray-900",children:e.user?.name||"Unknown Doctor"}),(0,m.jsx)("p",{className:"text-sm text-gray-600",children:e.specialization}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:e.qualification}),(0,m.jsxs)("div",{className:"flex items-center mt-2 space-x-4",children:[(0,m.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,m.jsx)(T,{size:14,className:"mr-1"}),e.room_number]}),(0,m.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,m.jsx)(z,{size:14,className:"mr-1"}),"₹",e.consultation_fee]})]})]}),B?.id===e.id&&(0,m.jsx)(A,{className:"text-orange-500",size:20})]})},e.id))}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("button",{type:"button",onClick:()=>i(1),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"Back"}),(0,m.jsx)("button",{type:"button",onClick:()=>i(3),disabled:!B,className:"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next: Select Date & Time"})]})]}),3===n&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)(v,{className:"mx-auto h-12 w-12 text-orange-500 mb-4"}),(0,m.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Select Date & Time"}),V&&(0,m.jsxs)("p",{className:"text-gray-500 mt-2",children:["For: ",V.first_name," ",V.last_name]})]}),(0,m.jsx)("div",{className:"bg-gray-50 p-4 rounded-xl",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,m.jsx)($,{className:"text-red-500",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-gray-900",children:"Emergency Appointment"}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:"Available 24/7 with flexible scheduling"})]})]}),(0,m.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",checked:Q,onChange:e=>{ee(e.target.checked),g(t=>({...t,isEmergency:e.target.checked}))},className:"sr-only peer"}),(0,m.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-orange-500"})]})]})}),!Q&&(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Preferred Session"}),(0,m.jsx)("div",{className:"grid grid-cols-3 gap-3",children:["morning","afternoon","evening"].map(e=>(0,m.jsxs)("button",{type:"button",onClick:()=>g(t=>({...t,sessionType:e})),className:`p-3 border rounded-xl text-center transition-all ${h.sessionType===e?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[(0,m.jsx)("div",{className:"font-medium capitalize",children:e}),(0,m.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["morning"===e&&"9:00 AM - 12:00 PM","afternoon"===e&&"2:00 PM - 5:00 PM","evening"===e&&"6:00 PM - 9:00 PM"]})]},e))})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Appointment Date",B&&(0,m.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(Available on: ",B.availability_hours?.workingDays?.map(e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e]).join(", ")||"Mon-Sat",")"]})]}),(0,m.jsx)("input",{type:"date",min:new Date().toISOString().split("T")[0],max:(()=>{let e=new Date;return e.setMonth(e.getMonth()+3),e.toISOString().split("T")[0]})(),value:h.appointmentDate,onChange:e=>g(t=>({...t,appointmentDate:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",required:!0}),B&&h.appointmentDate&&(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:(()=>{if(!B)return[];let e=[],t=new Date,a=new Date;a.setMonth(a.getMonth()+3);let s=B.availability_hours?.workingDays||[1,2,3,4,5,6];for(let r=new Date(t);r<=a;r.setDate(r.getDate()+1)){let t=r.getDay();s.includes(t)&&e.push(r.toISOString().split("T")[0])}return e})().includes(h.appointmentDate)?"✓ Doctor available on this date":"⚠️ Doctor may not be available on this date"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Appointment Type"}),(0,m.jsxs)("select",{value:h.type,onChange:e=>g(t=>({...t,type:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,m.jsx)("option",{value:"consultation",children:"Consultation"}),(0,m.jsx)("option",{value:"follow_up",children:"Follow-up"}),(0,m.jsx)("option",{value:"routine_checkup",children:"Routine Checkup"}),(0,m.jsx)("option",{value:"emergency",children:"Emergency"})]})]})]}),h.appointmentDate&&(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["Available Time Slots",(0,m.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Real-time availability - can book up to 5 minutes before)"})]}),0===O.length?(0,m.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,m.jsx)(w,{className:"mx-auto h-8 w-8 mb-2"}),(0,m.jsx)("p",{children:"Loading available time slots..."})]}):(0,m.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:(e=>{let t=new Date,a=t.toISOString().split("T")[0];if(h.appointmentDate!==a)return e;let s=new Date(t.getTime()+3e5),r=`${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`;return e.filter(e=>!e.available||e.time>=r)})(O).map(e=>(0,m.jsxs)("button",{type:"button",disabled:!e.available,onClick:()=>g(t=>({...t,appointmentTime:e.time})),className:`p-3 text-sm font-medium rounded-xl transition-all ${h.appointmentTime===e.time?"bg-orange-500 text-white":e.available?"bg-gray-50 text-gray-700 hover:bg-gray-100 border border-gray-200":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[(0,m.jsx)(w,{size:14,className:"inline mr-1"}),e.time,!e.available&&(0,m.jsx)("div",{className:"text-xs mt-1",children:"Booked"})]},e.time))}),h.appointmentDate===new Date().toISOString().split("T")[0]&&(0,m.jsx)("p",{className:"text-xs text-blue-600 mt-2",children:"ℹ️ For today's appointments, only future time slots (5+ minutes from now) are shown"})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("button",{type:"button",onClick:()=>i(2),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"Back"}),(0,m.jsx)("button",{type:"button",onClick:()=>i(4),disabled:!h.appointmentDate||!h.appointmentTime,className:"px-6 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next: Additional Details"})]})]}),4===n&&(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)(A,{className:"mx-auto h-12 w-12 text-orange-500 mb-4"}),(0,m.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Additional Details"}),V&&(0,m.jsxs)("p",{className:"text-gray-500 mt-2",children:["For: ",V.first_name," ",V.last_name]})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Symptoms or Chief Complaint"}),(0,m.jsx)("textarea",{value:h.symptoms,onChange:e=>g(t=>({...t,symptoms:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Describe the main symptoms or reason for visit..."})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,m.jsx)("textarea",{value:h.notes,onChange:e=>g(t=>({...t,notes:e.target.value})),rows:2,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Any additional information or special requests..."})]})]}),(0,m.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl",children:[(0,m.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Appointment Summary"}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Patient:"}),(0,m.jsxs)("span",{className:"font-medium",children:[V?.first_name," ",V?.last_name]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Doctor:"}),(0,m.jsx)("span",{className:"font-medium",children:B?.user?.name||"Unknown Doctor"})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Specialization:"}),(0,m.jsx)("span",{className:"font-medium",children:B?.specialization})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Date & Time:"}),(0,m.jsxs)("span",{className:"font-medium",children:[new Date(h.appointmentDate).toLocaleDateString()," at ",h.appointmentTime]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Type:"}),(0,m.jsx)("span",{className:"font-medium capitalize",children:h.type.replace("_"," ")})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("span",{className:"text-gray-600",children:"Consultation Fee:"}),(0,m.jsxs)("span",{className:"font-medium",children:["₹",B?.consultation_fee]})]})]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsx)("button",{type:"button",onClick:()=>i(3),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"Back"}),(0,m.jsx)("button",{type:"submit",disabled:o,className:"px-8 py-3 bg-orange-500 text-white rounded-xl hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:o?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(I,{className:"animate-spin mr-2",size:20}),"Booking..."]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(q,{className:"mr-2",size:20}),"Book Appointment"]})})]})]})]})]})]})})}):null},es=j("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),er=j("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),en=j("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),ei=j("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),eo=j("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),el=()=>{let[e,t]=(0,p.useState)([]),[a,s]=(0,p.useState)(!0),[r,n]=(0,p.useState)(""),[i,o]=(0,p.useState)(!1),[l,c]=(0,p.useState)(""),[d,x]=(0,p.useState)("all"),[u,h]=(0,p.useState)("today"),[g,y]=(0,p.useState)(""),[f,b]=(0,p.useState)(1),[j]=(0,p.useState)(10),[N,k]=(0,p.useState)(0),[_,D]=(0,p.useState)([]),[T,z]=(0,p.useState)(null),[$,I]=(0,p.useState)(null);(0,p.useEffect)(()=>{q(),O()},[f,d,u,g,l]);let q=async()=>{try{s(!0),n("");let e={page:f,limit:j};"all"!==d&&(e.status=d),g&&(e.doctorId=g),l&&(e.searchTerm=l);let a=new Date;if("today"===u)e.date=a.toISOString().split("T")[0];else if("week"===u){let t=new Date(a);t.setDate(a.getDate()-a.getDay()),e.dateFrom=t.toISOString().split("T")[0];let s=new Date(t);s.setDate(t.getDate()+6),e.dateTo=s.toISOString().split("T")[0]}else if("month"===u){let t=new Date(a.getFullYear(),a.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth()+1,0);e.dateFrom=t.toISOString().split("T")[0],e.dateTo=s.toISOString().split("T")[0]}let r=await Y(e);t(r.appointments||[]),k(r.total||0)}catch(e){console.error("Error loading appointments:",e),n("Failed to load appointments. Please try again.")}finally{s(!1)}},O=async()=>{try{let e=await F();D(e.doctors||[])}catch(e){console.error("Error loading doctors:",e)}},L=async(e,t)=>{try{await Q(e,t),await q(),I(null)}catch(e){console.error("Error updating appointment status:",e),n("Failed to update appointment status.")}},B=async e=>{if(confirm("Are you sure you want to cancel this appointment?"))try{await ee(e,"Cancelled by staff"),await q(),I(null)}catch(e){console.error("Error cancelling appointment:",e),n("Failed to cancel appointment.")}},G=e=>{switch(e.toLowerCase()){case"confirmed":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"no_show":return"bg-gray-100 text-gray-800 border-gray-200";case"rescheduled":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-orange-100 text-orange-800 border-orange-200"}},R=e=>{switch(e.toLowerCase()){case"confirmed":case"completed":return(0,m.jsx)(A,{size:14});case"cancelled":return(0,m.jsx)(es,{size:14});case"no_show":return(0,m.jsx)(M,{size:14});case"rescheduled":return(0,m.jsx)(er,{size:14});default:return(0,m.jsx)(w,{size:14})}},V=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),U=e=>new Date(`2000-01-01T${e}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),W=Math.ceil(N/j),J=(()=>{let t=new Date().toISOString().split("T")[0],a=e.filter(e=>e.appointment_date===t);return{total:e.length,today:a.length,confirmed:e.filter(e=>"confirmed"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length}})();return(0,m.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50",children:[(0,m.jsx)("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:(0,m.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,m.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(v,{className:"h-8 w-8 text-orange-500 mr-3"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Appointment Management"}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:"Manage patient appointments and schedules"})]})]}),(0,m.jsxs)("button",{onClick:()=>o(!0),className:"inline-flex items-center px-4 py-2 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors shadow-sm",children:[(0,m.jsx)(S,{size:20,className:"mr-2"}),"New Appointment"]})]})})}),(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[(0,m.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,m.jsx)(v,{className:"h-6 w-6 text-blue-600"})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:J.total})]})]})}),(0,m.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl",children:(0,m.jsx)(w,{className:"h-6 w-6 text-orange-600"})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Today"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:J.today})]})]})}),(0,m.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,m.jsx)(A,{className:"h-6 w-6 text-blue-600"})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Confirmed"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:J.confirmed})]})]})}),(0,m.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,m.jsx)(A,{className:"h-6 w-6 text-green-600"})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Completed"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:J.completed})]})]})}),(0,m.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,m.jsx)(es,{className:"h-6 w-6 text-red-600"})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Cancelled"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:J.cancelled})]})]})})]}),(0,m.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-8",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,m.jsx)("input",{type:"text",placeholder:"Search appointments...",value:l,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),(0,m.jsxs)("select",{value:d,onChange:e=>x(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,m.jsx)("option",{value:"all",children:"All Status"}),(0,m.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,m.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,m.jsx)("option",{value:"completed",children:"Completed"}),(0,m.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,m.jsx)("option",{value:"no_show",children:"No Show"})]}),(0,m.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,m.jsx)("option",{value:"all",children:"All Dates"}),(0,m.jsx)("option",{value:"today",children:"Today"}),(0,m.jsx)("option",{value:"week",children:"This Week"}),(0,m.jsx)("option",{value:"month",children:"This Month"})]}),(0,m.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[(0,m.jsx)("option",{value:"",children:"All Doctors"}),_.map(e=>(0,m.jsxs)("option",{value:e.id,children:[e.user?.name||"Unknown Doctor"," - ",e.specialization]},e.id))]})]})}),r&&(0,m.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center",children:[(0,m.jsx)(M,{className:"text-red-500 mr-3",size:20}),(0,m.jsx)("span",{className:"text-red-700",children:r})]}),(0,m.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,m.jsx)("thead",{className:"bg-gray-50",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),(0,m.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Doctor"}),(0,m.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Time"}),(0,m.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,m.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,m.jsx)("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fee"}),(0,m.jsx)("th",{className:"px-6 py-4 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,m.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a?(0,m.jsx)("tr",{children:(0,m.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[(0,m.jsx)(er,{className:"animate-spin h-6 w-6 text-orange-500 mr-3"}),(0,m.jsx)("span",{className:"text-gray-500",children:"Loading appointments..."})]})})}):0===e.length?(0,m.jsx)("tr",{children:(0,m.jsxs)("td",{colSpan:7,className:"px-6 py-12 text-center",children:[(0,m.jsx)(v,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,m.jsx)("p",{className:"text-gray-500",children:"No appointments found"}),(0,m.jsxs)("button",{onClick:()=>o(!0),className:"mt-4 inline-flex items-center px-4 py-2 bg-orange-500 text-white rounded-xl hover:bg-orange-600 transition-colors",children:[(0,m.jsx)(S,{size:16,className:"mr-2"}),"Book First Appointment"]})]})}):e.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,m.jsx)("div",{className:"h-10 w-10 rounded-full bg-orange-100 flex items-center justify-center",children:(0,m.jsx)(C,{className:"h-5 w-5 text-orange-600"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.patient?.first_name," ",e.patient?.last_name]}),(0,m.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.patient?.patient_id]}),H(e?.notes)&&(0,m.jsx)("div",{className:"mt-1",children:(0,m.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700",children:["Token ",H(e.notes)]})})]})]})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,m.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,m.jsx)(E,{className:"h-5 w-5 text-blue-600"})})}),(0,m.jsxs)("div",{className:"ml-4",children:[(0,m.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.doctor?.user?.name||"Unknown Doctor"}),(0,m.jsx)("div",{className:"text-sm text-gray-500",children:e.doctor?.specialization})]})]})}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,m.jsx)("div",{className:"text-sm text-gray-900",children:V(e.appointment_date)}),(0,m.jsx)("div",{className:"text-sm text-gray-500",children:U(e.appointment_time)})]}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:e.type.replace("_"," ")})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsxs)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${G(e.status)}`,children:[R(e.status),(0,m.jsx)("span",{className:"ml-1 capitalize",children:e.status.replace("_"," ")})]})}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.duration_minutes," mins"]}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("button",{onClick:()=>I($===e.id?null:e.id),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,m.jsx)(en,{size:16})}),$===e.id&&(0,m.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-200 z-10",children:(0,m.jsxs)("div",{className:"py-1",children:[(0,m.jsxs)("button",{onClick:()=>L(e.id,"confirmed"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,m.jsx)(A,{size:16,className:"mr-3 text-green-500"}),"Confirm"]}),(0,m.jsxs)("button",{onClick:()=>L(e.id,"completed"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,m.jsx)(A,{size:16,className:"mr-3 text-blue-500"}),"Mark Complete"]}),(0,m.jsxs)("button",{onClick:()=>B(e.id),className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,m.jsx)(es,{size:16,className:"mr-3"}),"Cancel"]})]})})]})})]},e.id))})]})}),W>1&&(0,m.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200",children:[(0,m.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,m.jsx)("button",{onClick:()=>b(Math.max(1,f-1)),disabled:1===f,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,m.jsx)("button",{onClick:()=>b(Math.min(W,f+1)),disabled:f===W,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,m.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,m.jsx)("div",{children:(0,m.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,m.jsx)("span",{className:"font-medium",children:(f-1)*j+1})," to"," ",(0,m.jsx)("span",{className:"font-medium",children:Math.min(f*j,N)})," ","of ",(0,m.jsx)("span",{className:"font-medium",children:N})," results"]})}),(0,m.jsx)("div",{children:(0,m.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,m.jsx)("button",{onClick:()=>b(Math.max(1,f-1)),disabled:1===f,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,m.jsx)(ei,{size:20})}),Array.from({length:Math.min(5,W)},(e,t)=>{let a=Math.max(1,Math.min(W-4,f-2))+t;return(0,m.jsx)("button",{onClick:()=>b(a),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${f===a?"z-10 bg-orange-50 border-orange-500 text-orange-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:a},a)}),(0,m.jsx)("button",{onClick:()=>b(Math.min(W,f+1)),disabled:f===W,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,m.jsx)(eo,{size:20})})]})})]})]})]})]}),(0,m.jsx)(ea,{isOpen:i,onClose:()=>o(!1),onSuccess:()=>{o(!1),q()}})]})},ec=()=>{let[e,t]=(0,p.useState)("overview"),[a,s]=(0,p.useState)(!1),r=[{title:"Today's Appointments",value:"24",icon:v,color:"bg-blue-500",change:"+12%"},{title:"Pending Confirmations",value:"8",icon:w,color:"bg-yellow-500",change:"+5%"},{title:"Active Doctors",value:"15",icon:N,color:"bg-green-500",change:"+2%"},{title:"Completed Today",value:"18",icon:k,color:"bg-purple-500",change:"+8%"}],n=({id:e,label:t,icon:a,isActive:s,onClick:r})=>(0,m.jsxs)("button",{onClick:r,className:`flex items-center px-6 py-3 text-sm font-medium rounded-lg transition-all duration-200 ${s?"bg-blue-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[(0,m.jsx)(a,{className:"w-4 h-4 mr-2"}),t]});return(0,m.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:[(0,m.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-40",children:(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Appointment Management"}),(0,m.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage patient appointments and doctor schedules"})]}),(0,m.jsxs)("button",{onClick:()=>s(!0),className:"flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,m.jsx)(S,{className:"w-5 h-5 mr-2"}),"New Appointment"]})]}),(0,m.jsxs)("div",{className:"flex space-x-2 pb-4",children:[(0,m.jsx)(n,{id:"overview",label:"Overview",icon:k,isActive:"overview"===e,onClick:()=>t("overview")}),(0,m.jsx)(n,{id:"book",label:"Book Appointment",icon:S,isActive:"book"===e,onClick:()=>t("book")}),(0,m.jsx)(n,{id:"manage",label:"Manage Appointments",icon:_,isActive:"manage"===e,onClick:()=>t("manage")})]})]})}),(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["overview"===e&&(0,m.jsxs)("div",{className:"space-y-8",children:[(0,m.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((e,t)=>{let a=e.icon;return(0,m.jsx)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200 hover:shadow-lg transition-all duration-200 hover:-translate-y-1",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,m.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.value}),(0,m.jsxs)("p",{className:"text-sm text-green-600 mt-1",children:[e.change," from yesterday"]})]}),(0,m.jsx)("div",{className:`${e.color} p-3 rounded-xl`,children:(0,m.jsx)(a,{className:"w-6 h-6 text-white"})})]})},t)})}),(0,m.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsxs)("button",{onClick:()=>t("book"),className:"flex items-center p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,m.jsx)(S,{className:"w-5 h-5 mr-3"}),(0,m.jsxs)("div",{className:"text-left",children:[(0,m.jsx)("div",{className:"font-medium",children:"Book New Appointment"}),(0,m.jsx)("div",{className:"text-sm opacity-90",children:"Schedule patient visit"})]})]}),(0,m.jsxs)("button",{onClick:()=>t("manage"),className:"flex items-center p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl hover:from-green-600 hover:to-green-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,m.jsx)(v,{className:"w-5 h-5 mr-3"}),(0,m.jsxs)("div",{className:"text-left",children:[(0,m.jsx)("div",{className:"font-medium",children:"View All Appointments"}),(0,m.jsx)("div",{className:"text-sm opacity-90",children:"Manage existing bookings"})]})]}),(0,m.jsxs)("button",{className:"flex items-center p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl hover:from-purple-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[(0,m.jsx)(N,{className:"w-5 h-5 mr-3"}),(0,m.jsxs)("div",{className:"text-left",children:[(0,m.jsx)("div",{className:"font-medium",children:"Doctor Schedules"}),(0,m.jsx)("div",{className:"text-sm opacity-90",children:"Manage availability"})]})]})]})]}),(0,m.jsxs)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),(0,m.jsx)("div",{className:"space-y-3",children:[{action:"New appointment booked",patient:"John Doe",time:"2 minutes ago",status:"success"},{action:"Appointment confirmed",patient:"Jane Smith",time:"15 minutes ago",status:"info"},{action:"Appointment completed",patient:"Mike Johnson",time:"1 hour ago",status:"success"},{action:"Appointment cancelled",patient:"Sarah Wilson",time:"2 hours ago",status:"warning"}].map((e,t)=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("div",{className:`w-2 h-2 rounded-full mr-3 ${"success"===e.status?"bg-green-500":"info"===e.status?"bg-blue-500":"warning"===e.status?"bg-yellow-500":"bg-gray-500"}`}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.action}),(0,m.jsxs)("p",{className:"text-xs text-gray-600",children:["Patient: ",e.patient]})]})]}),(0,m.jsx)("span",{className:"text-xs text-gray-500",children:e.time})]},t))})]})]}),"book"===e&&(0,m.jsx)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-gray-200",children:(0,m.jsx)(ea,{isOpen:!0,onClose:()=>t("overview"),onSuccess:()=>t("manage")})}),"manage"===e&&(0,m.jsx)("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl border border-gray-200 overflow-hidden",children:(0,m.jsx)(el,{})})]}),a&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,m.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Book New Appointment"}),(0,m.jsx)("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,m.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,m.jsx)("div",{className:"p-6",children:(0,m.jsx)(ea,{isOpen:a,onClose:()=>s(!1),onSuccess:()=>{s(!1),t("manage")}})})]})})]})},ed=(0,i.M)(s,"default"),em=(0,i.M)(s,"getStaticProps"),ep=(0,i.M)(s,"getStaticPaths"),ex=(0,i.M)(s,"getServerSideProps"),eu=(0,i.M)(s,"config"),eh=(0,i.M)(s,"reportWebVitals"),eg=(0,i.M)(s,"unstable_getStaticProps"),ey=(0,i.M)(s,"unstable_getStaticPaths"),ef=(0,i.M)(s,"unstable_getStaticParams"),eb=(0,i.M)(s,"unstable_getServerProps"),ej=(0,i.M)(s,"unstable_getServerSideProps"),ev=new r.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/AppointmentDashboard",pathname:"/AppointmentDashboard",bundlePath:"",filename:""},components:{App:d(),Document:l()},userland:s})},80237:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},81413:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},82015:e=>{e.exports=require("react")}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[548],()=>a(78916));module.exports=s})();