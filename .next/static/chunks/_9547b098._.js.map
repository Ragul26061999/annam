{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = 'https://zusheijhebsmjiyyeiqq.supabase.co';\nconst supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp1c2hlaWpoZWJzbWppeXllaXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MjI0NDAsImV4cCI6MjA2NzM5ODQ0MH0.iwGPaOJPa6OvwX_iA1xvRt5cM72DWfd8Br1pwRTemRc';\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n\nexport const signInWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signInWithPassword({\n    email,\n    password,\n  });\n  return { data, error };\n};\n\nexport const signUpWithEmail = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n    },\n  });\n  return { data, error };\n};\n\n// Function to create admin user without email confirmation\nexport const createAdminUser = async (email: string, password: string) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      emailRedirectTo: `${window.location.origin}/auth/callback`,\n      data: {\n        email_confirm: true,\n      },\n    },\n  });\n  return { data, error };\n};\n\nexport const signOut = async () => {\n  await supabase.auth.signOut();\n};\n\nexport const getCurrentUser = async () => {\n  const { data: { user } } = await supabase.auth.getUser();\n  return user;\n};\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,cAAc;AACpB,MAAM,kBAAkB;AAEjB,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAE3C,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;QAC7D;QACA;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;QAC5D;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAGO,MAAM,kBAAkB,OAAO,OAAe;IACnD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;QACjD;QACA;QACA,SAAS;YACP,iBAAiB,GAAG,OAAO,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC;YAC1D,MAAM;gBACJ,eAAe;YACjB;QACF;IACF;IACA,OAAO;QAAE;QAAM;IAAM;AACvB;AAEO,MAAM,UAAU;IACrB,MAAM,SAAS,IAAI,CAAC,OAAO;AAC7B;AAEO,MAAM,iBAAiB;IAC5B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IACtD,OAAO;AACT","debugId":null}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/barcodeUtils.ts"],"sourcesContent":["import { supabase } from './supabase';\n\n/**\n * Generate a barcode ID for a patient\n * Format: BARS{Year}{Month}{RandomDigits}\n * Example: BARS2025010001\n */\nexport function generateBarcodeId(uhid: string): string {\n  const now = new Date();\n  const year = now.getFullYear().toString();\n  const month = (now.getMonth() + 1).toString().padStart(2, '0');\n  \n  // Use UHID as base and add timestamp for uniqueness\n  const timestamp = now.getTime().toString().slice(-4); // Last 4 digits of timestamp\n  \n  return `BARS${year}${month}${timestamp}`;\n}\n\n/**\n * Generate SVG barcode using Code-128 format\n * This is a simplified implementation - in production, you'd use a proper barcode library\n */\nexport function generateBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const barWidth = 2;\n  const barsCount = barcodeId.length * 6; // Approximate for Code-128\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate bars pattern (simplified)\n  let x = 10;\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create alternating pattern based on character\n    for (let j = 0; j < 6; j++) {\n      if ((charCode + j) % 2 === 0) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n    }\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Generate a more realistic barcode pattern\n * This creates a pattern that looks more like a real barcode\n */\nexport function generateRealisticBarcodeSVG(barcodeId: string): string {\n  const width = 300;\n  const height = 80;\n  const minBarWidth = 1;\n  const maxBarWidth = 4;\n  \n  let svg = `<svg width=\"${width}\" height=\"${height}\" xmlns=\"http://www.w3.org/2000/svg\">`;\n  \n  // Background\n  svg += `<rect width=\"${width}\" height=\"${height}\" fill=\"white\"/>`;\n  \n  // Generate more realistic bar pattern\n  let x = 20;\n  let isBlack = true;\n  \n  // Start and end patterns\n  const startPattern = [1, 1, 1, 1, 1, 1];\n  const endPattern = [1, 1, 1, 1, 1, 1];\n  \n  // Draw start pattern\n  for (const barWidth of startPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Draw data pattern\n  for (let i = 0; i < barcodeId.length; i++) {\n    const char = barcodeId[i];\n    const charCode = char.charCodeAt(0);\n    \n    // Create pattern based on character\n    const pattern = [];\n    for (let j = 0; j < 6; j++) {\n      const width = minBarWidth + ((charCode + j) % (maxBarWidth - minBarWidth + 1));\n      pattern.push(width);\n    }\n    \n    for (const barWidth of pattern) {\n      if (isBlack) {\n        svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n      }\n      x += barWidth;\n      isBlack = !isBlack;\n    }\n  }\n  \n  // Draw end pattern\n  for (const barWidth of endPattern) {\n    if (isBlack) {\n      svg += `<rect x=\"${x}\" y=\"10\" width=\"${barWidth}\" height=\"50\" fill=\"black\"/>`;\n    }\n    x += barWidth;\n    isBlack = !isBlack;\n  }\n  \n  // Add text below barcode\n  svg += `<text x=\"${width/2}\" y=\"${height-10}\" text-anchor=\"middle\" font-family=\"monospace\" font-size=\"12\" fill=\"black\">${barcodeId}</text>`;\n  \n  svg += '</svg>';\n  \n  return svg;\n}\n\n/**\n * Update patient with barcode ID\n */\nexport async function updatePatientWithBarcode(patientId: string, barcodeId: string): Promise<void> {\n  try {\n    const { error } = await supabase\n      .from('patients')\n      .update({ barcode_id: barcodeId })\n      .eq('patient_id', patientId);\n    \n    if (error) {\n      console.error('Error updating patient with barcode:', error);\n      throw new Error(`Failed to update patient with barcode: ${error.message}`);\n    }\n  } catch (error) {\n    console.error('Error updating patient with barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by barcode ID\n */\nexport async function getPatientByBarcodeId(barcodeId: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('barcode_id', barcodeId)\n      .single();\n    \n    if (error) {\n      console.error('Error fetching patient by barcode:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by barcode:', error);\n    throw error;\n  }\n}\n\n/**\n * Generate printable barcode data\n */\nexport function generatePrintableBarcodeData(uhid: string, barcodeId: string, patientName: string): string {\n  const svg = generateRealisticBarcodeSVG(barcodeId);\n  \n  return `\n    <div style=\"width: 4in; height: 2in; padding: 0.2in; font-family: Arial, sans-serif; border: 1px solid #ccc; margin: 0.1in;\">\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        <h3 style=\"margin: 0; font-size: 14px; color: #333;\">ANNAM HOSPITAL</h3>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">Patient ID Card</p>\n      </div>\n      <div style=\"text-align: center; margin-bottom: 0.1in;\">\n        ${svg}\n      </div>\n      <div style=\"text-align: center; font-size: 12px;\">\n        <p style=\"margin: 0; font-weight: bold;\">${patientName}</p>\n        <p style=\"margin: 0; font-size: 10px; color: #666;\">UHID: ${uhid}</p>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Validate barcode ID format\n */\nexport function validateBarcodeId(barcodeId: string): boolean {\n  // Check if it matches the format: BARS{Year}{Month}{4digits}\n  const barcodeRegex = /^BARS\\d{4}(0[1-9]|1[0-2])\\d{4}$/;\n  return barcodeRegex.test(barcodeId);\n}\n\n/**\n * Extract information from barcode ID\n */\nexport function extractBarcodeInfo(barcodeId: string): {\n  year: string;\n  month: string;\n  sequence: string;\n} | null {\n  if (!validateBarcodeId(barcodeId)) {\n    return null;\n  }\n  \n  const year = barcodeId.substring(4, 8);\n  const month = barcodeId.substring(8, 10);\n  const sequence = barcodeId.substring(10, 14);\n  \n  return { year, month, sequence };\n}\n\n/**\n * Generate barcode for existing patient\n */\nexport async function generateBarcodeForPatient(patientId: string): Promise<string> {\n  try {\n    // Check if patient already has a barcode\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('barcode_id, patient_id')\n      .eq('patient_id', patientId)\n      .single();\n    \n    if (error) {\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n    \n    // If patient already has a barcode, return it\n    if (patient.barcode_id && patient.barcode_id.trim() !== '') {\n      return patient.barcode_id;\n    }\n    \n    // Generate new barcode\n    const barcodeId = generateBarcodeId(patientId);\n    \n    // Update patient with barcode\n    await updatePatientWithBarcode(patientId, barcodeId);\n    \n    return barcodeId;\n  } catch (error) {\n    console.error('Error generating barcode for patient:', error);\n    throw error;\n  }\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/src/lib/patientService.ts"],"sourcesContent":["import { supabase } from './supabase';\nimport { generateBarcodeId, updatePatientWithBarcode } from './barcodeUtils';\n\n// Types - Updated to match comprehensive registration form\nexport interface PatientRegistrationData {\n  // Personal Information (Mandatory)\n  firstName: string;\n  lastName: string;\n  dateOfBirth: string;\n  gender: string;\n  maritalStatus?: string; // single, married, divorced, widowed, separated\n  phone: string;\n  email?: string;\n  address: string;\n  \n  // Medical & Admission Information \n  bloodGroup: string;\n  allergies: string;\n  medicalHistory: string;\n  currentMedications: string;\n  chronicConditions: string;\n  previousSurgeries: string;\n  \n  // Admission Details\n  admissionDate?: string;\n  admissionTime?: string;\n  primaryComplaint: string;\n  admissionType: string; // emergency, elective, referred\n  referringDoctorFacility?: string;\n  consultingDoctorId?: string;\n  consultingDoctorName?: string;\n  departmentWard?: string;\n  roomNumber?: string;\n  \n  // Guardian/Attendant Details (Optional)\n  guardianName?: string;\n  guardianRelationship?: string;\n  guardianPhone?: string;\n  guardianAddress?: string;\n  \n  // Emergency Contact (Optional)\n  emergencyContactName?: string;\n  emergencyContactPhone?: string;\n  emergencyContactRelationship?: string;\n  \n  // Insurance Information (Optional)\n  insuranceProvider?: string;\n  insuranceNumber?: string;\n  \n  // Initial Visit Information\n  initialSymptoms?: string;\n  referredBy?: string;\n}\n\nexport interface PatientResponse {\n  success: boolean;\n  patient?: any;\n  uhid?: string;\n  credentials?: {\n    email: string;\n    password: string;\n  };\n  error?: string;\n}\n\n/**\n * Generate a unique UHID (Unique Hospital ID) for a new patient\n * Format: UHID + current year + 6-digit sequential number\n * Example: UHID2025000001\n */\nexport async function generateUHID(): Promise<string> {\n  const now = new Date();\n  const yearTwoDigits = now.getFullYear().toString().slice(-2); // Last two digits of year\n  const month = (now.getMonth() + 1).toString().padStart(2, '0'); // Month with leading zero\n  \n  try {\n    // Generate a unique 4-digit random number\n    let uhid: string = '';\n    let isUnique = false;\n    let attempts = 0;\n    const maxAttempts = 1000;\n    \n    while (!isUnique && attempts < maxAttempts) {\n      // Generate 4-digit random number\n      const randomNumber = Math.floor(Math.random() * 10000).toString().padStart(4, '0');\n      uhid = `AH${yearTwoDigits}${month}${randomNumber}`;\n      \n      // Check if this UHID already exists\n      const { data: existing, error } = await supabase\n        .from('patients')\n        .select('patient_id')\n        .eq('patient_id', uhid)\n        .single();\n      \n      if (error && error.code === 'PGRST116') {\n        // No record found, UHID is unique\n        isUnique = true;\n      } else if (error) {\n        console.error('Error checking UHID uniqueness:', error);\n        throw new Error('Failed to generate UHID');\n      }\n      \n      attempts++;\n    }\n    \n    if (!isUnique) {\n      throw new Error('Failed to generate unique UHID after maximum attempts');\n    }\n    \n    return uhid;\n  } catch (error) {\n    console.error('Error generating UHID:', error);\n    throw new Error('Failed to generate UHID');\n  }\n}\n\n/**\n * Create authentication credentials for a new patient\n * Email format: UHID@annam.com\n * Password: \"password\" (as specified in requirements)\n */\nexport async function createPatientAuthCredentials(uhid: string): Promise<{ \n  authUser: any; \n  credentials: { email: string; password: string } \n}> {\n  const email = `${uhid}@annam.com`;\n  const password = 'password';\n\n  try {\n    // Create auth user using Supabase Admin API\n    const { data: authUser, error: authError } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo: `${window.location.origin}/auth/callback`,\n        data: {\n          role: 'patient',\n          uhid: uhid,\n          email_confirm: true\n        }\n      }\n    });\n\n    if (authError) {\n      console.error('Error creating auth user:', authError);\n      throw new Error(`Failed to create authentication: ${authError.message}`);\n    }\n\n    return {\n      authUser: authUser.user,\n      credentials: { email, password }\n    };\n  } catch (error) {\n    console.error('Error creating patient auth credentials:', error);\n    throw error;\n  }\n}\n\n/**\n * Insert comprehensive patient record into the patients table with all new fields\n */\nexport async function insertPatientRecord(\n  uhid: string, \n  registrationData: PatientRegistrationData,\n  userId?: string\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    // Generate barcode ID\n    const barcodeId = generateBarcodeId(uhid);\n    \n    // Prepare admission date and time\n    let admissionDateTime = null;\n    if (registrationData.admissionDate) {\n      if (registrationData.admissionTime) {\n        admissionDateTime = `${registrationData.admissionDate}T${registrationData.admissionTime}`;\n      } else {\n        admissionDateTime = `${registrationData.admissionDate}T00:00:00`;\n      }\n    }\n    \n    const patientData = {\n      // Basic Information\n      patient_id: uhid,\n      barcode_id: barcodeId, // Add barcode ID\n      name: fullName,\n      date_of_birth: registrationData.dateOfBirth,\n      gender: registrationData.gender.toLowerCase(),\n      marital_status: registrationData.maritalStatus || null,\n      phone: registrationData.phone,\n      email: registrationData.email || `${uhid}@annam.com`,\n      address: registrationData.address,\n      \n      // Medical Information\n      blood_group: registrationData.bloodGroup || null,\n      allergies: registrationData.allergies || null,\n      medical_history: registrationData.medicalHistory || null,\n      current_medications: registrationData.currentMedications || null,\n      chronic_conditions: registrationData.chronicConditions || null,\n      previous_surgeries: registrationData.previousSurgeries || null,\n      \n      // New Admission Information\n      admission_date: admissionDateTime,\n      admission_time: registrationData.admissionTime || null,\n      primary_complaint: registrationData.primaryComplaint,\n      admission_type: registrationData.admissionType,\n      referring_doctor_facility: registrationData.referringDoctorFacility || null,\n      department_ward: registrationData.departmentWard || null,\n      room_number: registrationData.roomNumber || null,\n      \n      // Guardian/Attendant Details (Optional)\n      guardian_name: registrationData.guardianName || null,\n      guardian_relationship: registrationData.guardianRelationship || null,\n      guardian_phone: registrationData.guardianPhone || null,\n      guardian_address: registrationData.guardianAddress || null,\n      \n      // Emergency Contact (Optional)\n      emergency_contact_name: registrationData.emergencyContactName || null,\n      emergency_contact_phone: registrationData.emergencyContactPhone || null,\n      emergency_contact_relationship: registrationData.emergencyContactRelationship || null,\n      \n      // Insurance Information\n      insurance_number: registrationData.insuranceNumber || null,\n      insurance_provider: registrationData.insuranceProvider || null,\n      \n      // Additional fields\n      initial_symptoms: registrationData.initialSymptoms || null,\n      referred_by: registrationData.referredBy || null,\n      \n      // Link to users table\n      user_id: userId || null,\n      \n      // System fields\n      status: 'active'\n    };\n\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .insert([patientData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error inserting patient record:', error);\n      throw new Error(`Failed to create patient record: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error inserting patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Link the Supabase auth user to the users table for role management\n */\nexport async function linkAuthUserToPatient(\n  authUserId: string, \n  uhid: string, \n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    const fullName = `${registrationData.firstName} ${registrationData.lastName}`;\n    \n    const userData = {\n      auth_id: authUserId,\n      employee_id: uhid, // Using UHID as employee_id for patients\n      name: fullName,\n      email: registrationData.email || `${uhid}@annam.com`,\n      role: 'patient',\n      phone: registrationData.phone,\n      address: registrationData.address,\n      status: 'active',\n      permissions: {\n        patient_portal: true,\n        view_own_records: true,\n        book_appointments: true\n      }\n    };\n\n    const { data: user, error } = await supabase\n      .from('users')\n      .insert([userData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error linking auth user to patient:', error);\n      throw new Error(`Failed to create user record: ${error.message}`);\n    }\n\n    return user;\n  } catch (error) {\n    console.error('Error linking auth user to patient:', error);\n    throw error;\n  }\n}\n\n/**\n * Create an initial appointment if symptoms are provided\n */\nexport async function createInitialAppointment(\n  patientId: string,\n  registrationData: PatientRegistrationData\n): Promise<any> {\n  try {\n    if (!registrationData.initialSymptoms?.trim() && !registrationData.primaryComplaint?.trim()) {\n      return null; // No appointment needed if no symptoms\n    }\n\n    // Generate appointment ID\n    const appointmentId = `APT${Date.now()}`;\n    \n    // Use tomorrow as default appointment date\n    const tomorrow = new Date();\n    tomorrow.setDate(tomorrow.getDate() + 1);\n    \n    const appointmentData = {\n      appointment_id: appointmentId,\n      patient_id: patientId,\n      appointment_date: tomorrow.toISOString().split('T')[0],\n      appointment_time: '09:00:00',\n      type: 'consultation',\n      status: 'scheduled',\n      symptoms: registrationData.initialSymptoms || registrationData.primaryComplaint,\n      notes: `Initial consultation for newly registered patient. Primary complaint: ${registrationData.primaryComplaint}`\n    };\n\n    const { data: appointment, error } = await supabase\n      .from('appointments')\n      .insert([appointmentData])\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error creating initial appointment:', error);\n      // Don't throw error for appointment creation failure\n      return null;\n    }\n\n    return appointment;\n  } catch (error) {\n    console.error('Error creating initial appointment:', error);\n    // Don't throw error for appointment creation failure\n    return null;\n  }\n}\n\n/**\n * Main function to register a new patient with complete workflow\n */\nexport async function registerNewPatient(\n  registrationData: PatientRegistrationData,\n  preGeneratedUHID?: string\n): Promise<PatientResponse> {\n  try {\n    // Step 1: Use pre-generated UHID or generate new one\n    const uhid = preGeneratedUHID || await generateUHID();\n    console.log('Using UHID:', uhid);\n\n    // Step 2: Create authentication credentials\n    const { authUser, credentials } = await createPatientAuthCredentials(uhid);\n    console.log('Created auth user:', authUser?.id);\n\n    // Step 3: Create user record in users table\n    const userRecord = await linkAuthUserToPatient(authUser.id, uhid, registrationData);\n    console.log('Created user record:', userRecord.id);\n\n    // Step 4: Insert patient record with user_id link\n    const patient = await insertPatientRecord(uhid, registrationData, userRecord.id);\n    console.log('Created patient record:', patient.id);\n\n    // Step 5: Create initial appointment if symptoms provided\n    if (registrationData.initialSymptoms?.trim() || registrationData.primaryComplaint?.trim()) {\n      const appointment = await createInitialAppointment(patient.id, registrationData);\n      if (appointment) {\n        console.log('Created initial appointment:', appointment.id);\n      }\n    }\n\n    return {\n      success: true,\n      patient,\n      uhid,\n      credentials,\n    };\n\n  } catch (error) {\n    console.error('Error registering new patient:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error occurred'\n    };\n  }\n}\n\n/**\n * Validate that UHID is unique\n */\nexport async function validateUHIDUnique(uhid: string): Promise<boolean> {\n  try {\n    const { data: existingPatient, error } = await supabase\n      .from('patients')\n      .select('patient_id')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error && error.code !== 'PGRST116') {\n      console.error('Error validating UHID uniqueness:', error);\n      throw new Error('Failed to validate UHID');\n    }\n\n    return !existingPatient; // Return true if no existing patient found\n  } catch (error) {\n    console.error('Error validating UHID uniqueness:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient by UHID with comprehensive data\n */\nexport async function getPatientByUHID(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select('*')\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient by UHID:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient by UHID:', error);\n    throw error;\n  }\n}\n\n/**\n * Get patient with related data (appointments, bills, etc.)\n */\nexport async function getPatientWithRelatedData(uhid: string): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        ),\n        appointments:appointments(\n          id,\n          appointment_id,\n          appointment_date,\n          appointment_time,\n          type,\n          status,\n          symptoms,\n          diagnosis,\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        ),\n        bed_allocations:bed_allocations(\n          id,\n          admission_date,\n          discharge_date,\n          admission_type,\n          status,\n          bed:beds(bed_number, room_number, bed_type),\n          doctor:doctors(\n            id,\n            user:users(name, specialization)\n          )\n        )\n      `)\n      .eq('patient_id', uhid)\n      .single();\n\n    if (error) {\n      console.error('Error fetching patient with related data:', error);\n      throw new Error(`Patient not found: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error fetching patient with related data:', error);\n    throw error;\n  }\n}\n\n/**\n * Update patient information\n */\nexport async function updatePatientRecord(\n  uhid: string, \n  updateData: any\n): Promise<any> {\n  try {\n    const { data: patient, error } = await supabase\n      .from('patients')\n      .update(updateData)\n      .eq('patient_id', uhid)\n      .select()\n      .single();\n\n    if (error) {\n      console.error('Error updating patient record:', error);\n      throw new Error(`Failed to update patient: ${error.message}`);\n    }\n\n    return patient;\n  } catch (error) {\n    console.error('Error updating patient record:', error);\n    throw error;\n  }\n}\n\n/**\n * Get all patients with pagination and filtering\n */\nexport async function getAllPatients(\n  options: {\n    page?: number;\n    limit?: number;\n    status?: string;\n    searchTerm?: string;\n  } = {}\n): Promise<{ patients: any[]; total: number; page: number; limit: number }> {\n  try {\n    const { page = 1, limit = 20, status, searchTerm } = options;\n    const offset = (page - 1) * limit;\n\n    let query = supabase\n      .from('patients')\n      .select(`\n        *,\n        users:user_id (\n          id,\n          name,\n          email,\n          role,\n          status,\n          permissions\n        )\n      `, { count: 'exact' });\n\n    // Apply filters\n    if (status) {\n      query = query.eq('status', status);\n    }\n\n    if (searchTerm) {\n      query = query.or(`name.ilike.%${searchTerm}%,patient_id.ilike.%${searchTerm}%,phone.ilike.%${searchTerm}%`);\n    }\n\n    // Apply pagination\n    const { data: patients, error, count } = await query\n      .range(offset, offset + limit - 1)\n      .order('created_at', { ascending: false });\n\n    if (error) {\n      console.error('Error fetching patients:', error);\n      throw new Error(`Failed to fetch patients: ${error.message}`);\n    }\n\n    return {\n      patients: patients || [],\n      total: count || 0,\n      page,\n      limit\n    };\n  } catch (error) {\n    console.error('Error fetching patients:', error);\n    throw error;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 680, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/components/PatientRegistrationForm.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { \n  User, \n  Phone, \n  Mail, \n  MapPin, \n  Calendar, \n  Heart, \n  Shield, \n  AlertTriangle,\n  Save,\n  X,\n  UserPlus,\n  FileText,\n  Users,\n  Hash,\n  CheckCircle,\n  Clock,\n  Stethoscope,\n  Building,\n  UserCheck,\n  ClipboardList\n} from 'lucide-react';\nimport { generateUHID } from '../src/lib/patientService';\n\ninterface PatientRegistrationData {\n  // Personal Information (Mandatory)\n  firstName: string;\n  lastName: string;\n  dateOfBirth: string;\n  gender: string;\n  maritalStatus?: string; // single, married, divorced, widowed, separated\n  phone: string;\n  email?: string;\n  address: string;\n  \n  // Medical & Admission Information \n  bloodGroup: string;\n  allergies: string;\n  medicalHistory: string;\n  currentMedications: string;\n  chronicConditions: string;\n  previousSurgeries: string;\n  \n  // Admission Details\n  admissionDate?: string;\n  admissionTime?: string;\n  primaryComplaint: string;\n  admissionType: string; // emergency, elective, referred\n  referringDoctorFacility?: string;\n  consultingDoctorName?: string;\n  consultingDoctorId?: string;\n  departmentWard?: string;\n  roomNumber?: string;\n  \n  // Guardian/Attendant Details (Optional)\n  guardianName?: string;\n  guardianRelationship?: string;\n  guardianPhone?: string;\n  guardianAddress?: string;\n  \n  // Emergency Contact (Optional)\n  emergencyContactName?: string;\n  emergencyContactPhone?: string;\n  emergencyContactRelationship?: string;\n  \n  // Insurance Information (Optional)\n  insuranceProvider?: string;\n  insuranceNumber?: string;\n  \n  // Initial Visit Information\n  initialSymptoms?: string;\n  referredBy?: string;\n}\n\ninterface PatientRegistrationFormProps {\n  onSubmit: (data: PatientRegistrationData, previewUHID?: string) => Promise<void>;\n  onCancel: () => void;\n  isLoading?: boolean;\n}\n\nexport default function PatientRegistrationForm({ onSubmit, onCancel, isLoading = false }: PatientRegistrationFormProps) {\n  const [formData, setFormData] = useState<PatientRegistrationData>({\n    firstName: '',\n    lastName: '',\n    dateOfBirth: '',\n    gender: '',\n    maritalStatus: '',\n    phone: '',\n    email: '',\n    address: '',\n    bloodGroup: '',\n    allergies: '',\n    medicalHistory: '',\n    currentMedications: '',\n    chronicConditions: '',\n    previousSurgeries: '',\n    admissionDate: '',\n    admissionTime: '',\n    primaryComplaint: '',\n    admissionType: '',\n    referringDoctorFacility: '',\n    consultingDoctorName: '',\n    consultingDoctorId: '',\n    departmentWard: '',\n    roomNumber: '',\n    guardianName: '',\n    guardianRelationship: '',\n    guardianPhone: '',\n    guardianAddress: '',\n    emergencyContactName: '',\n    emergencyContactPhone: '',\n    emergencyContactRelationship: '',\n    insuranceProvider: '',\n    insuranceNumber: '',\n    initialSymptoms: '',\n    referredBy: ''\n  });\n\n  const [errors, setErrors] = useState<Partial<PatientRegistrationData>>({});\n  const [currentStep, setCurrentStep] = useState(1);\n  const [previewUHID, setPreviewUHID] = useState<string>('');\n  const [isGeneratingUHID, setIsGeneratingUHID] = useState(false);\n\n  const handleInputChange = (field: keyof PatientRegistrationData, value: string) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n    // Clear error when user starts typing\n    if (errors[field]) {\n      setErrors(prev => ({ ...prev, [field]: '' }));\n    }\n  };\n\n  const validateStep = (step: number): boolean => {\n    const newErrors: Partial<PatientRegistrationData> = {};\n\n    if (step === 1) {\n      // Personal Information - Only First Name mandatory\n      if (!formData.firstName.trim()) newErrors.firstName = 'First name is required';\n      // All other fields are now optional\n    }\n    // All other steps are optional, no validation needed\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const generatePreviewUHID = async () => {\n    try {\n      setIsGeneratingUHID(true);\n      const uhid = await generateUHID();\n      setPreviewUHID(uhid);\n      return true;\n    } catch (error) {\n      console.error('Error generating UHID preview:', error);\n      setErrors({ firstName: 'Failed to generate UHID. Please try again.' });\n      return false;\n    } finally {\n      setIsGeneratingUHID(false);\n    }\n  };\n\n  const handleNext = async () => {\n    if (validateStep(currentStep)) {\n      // Generate UHID when moving from step 1 to step 2\n      if (currentStep === 1 && !previewUHID) {\n        const uhidGenerated = await generatePreviewUHID();\n        if (!uhidGenerated) {\n          return; // Don't proceed if UHID generation failed\n        }\n      }\n      setCurrentStep(prev => prev + 1);\n    }\n  };\n\n  const handlePrevious = () => {\n    setCurrentStep(prev => prev - 1);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validate only mandatory step (1 - First Name only)\n    const isValid = validateStep(1);\n    if (!isValid) {\n      setCurrentStep(1);\n      return;\n    }\n\n    if (isValid) {\n      // Ensure UHID is generated before submission\n      if (!previewUHID) {\n        const uhidGenerated = await generatePreviewUHID();\n        if (!uhidGenerated) {\n          return;\n        }\n      }\n      await onSubmit(formData, previewUHID);\n    }\n  };\n\n  const renderPersonalInfoStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"p-2 bg-orange-100 rounded-lg\">\n          <User className=\"h-5 w-5 text-orange-600\" />\n        </div>\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">Personal Information</h3>\n          <p className=\"text-sm text-gray-500\">Basic patient details <span className=\"text-red-500\">* All fields mandatory</span></p>\n        </div>\n      </div>\n\n      {/* UHID Preview Section */}\n      {previewUHID && (\n        <div className=\"bg-green-50 p-4 rounded-lg border border-green-200 mb-6\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className=\"p-2 bg-green-100 rounded-lg\">\n              <Hash className=\"h-4 w-4 text-green-600\" />\n            </div>\n            <div>\n              <h4 className=\"font-semibold text-green-900\">Generated Patient UHID</h4>\n              <p className=\"text-sm text-green-700\">This will be the patient's unique hospital ID</p>\n            </div>\n            <CheckCircle className=\"h-5 w-5 text-green-600 ml-auto\" />\n          </div>\n          <div className=\"bg-white px-4 py-3 rounded-lg border border-green-300\">\n            <p className=\"font-mono text-xl font-bold text-green-900 text-center tracking-wider\">\n              {previewUHID}\n            </p>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <div>\n          <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            First Name <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"firstName\"\n            value={formData.firstName}\n            onChange={(e) => handleInputChange('firstName', e.target.value)}\n            className={`input-field ${errors.firstName ? 'border-red-300' : ''}`}\n            placeholder=\"Enter first name\"\n          />\n          {errors.firstName && <p className=\"text-red-500 text-xs mt-1\">{errors.firstName}</p>}\n        </div>\n\n        <div>\n          <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Last Name <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"lastName\"\n            value={formData.lastName}\n            onChange={(e) => handleInputChange('lastName', e.target.value)}\n            className={`input-field ${errors.lastName ? 'border-red-300' : ''}`}\n            placeholder=\"Enter last name\"\n          />\n          {errors.lastName && <p className=\"text-red-500 text-xs mt-1\">{errors.lastName}</p>}\n        </div>\n\n        <div>\n          <label htmlFor=\"dateOfBirth\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Date of Birth <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"date\"\n            id=\"dateOfBirth\"\n            value={formData.dateOfBirth}\n            onChange={(e) => handleInputChange('dateOfBirth', e.target.value)}\n            className={`input-field ${errors.dateOfBirth ? 'border-red-300' : ''}`}\n          />\n          {errors.dateOfBirth && <p className=\"text-red-500 text-xs mt-1\">{errors.dateOfBirth}</p>}\n        </div>\n\n        <div>\n          <label htmlFor=\"gender\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Gender <span className=\"text-red-500\">*</span>\n          </label>\n          <select\n            id=\"gender\"\n            value={formData.gender}\n            onChange={(e) => handleInputChange('gender', e.target.value)}\n            className={`input-field ${errors.gender ? 'border-red-300' : ''}`}\n          >\n            <option value=\"\">Select Gender</option>\n            <option value=\"male\">Male</option>\n            <option value=\"female\">Female</option>\n            <option value=\"other\">Other</option>\n          </select>\n          {errors.gender && <p className=\"text-red-500 text-xs mt-1\">{errors.gender}</p>}\n        </div>\n\n        <div>\n          <label htmlFor=\"maritalStatus\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Marital Status <span className=\"text-gray-400\">(Optional)</span>\n          </label>\n          <select\n            id=\"maritalStatus\"\n            value={formData.maritalStatus}\n            onChange={(e) => handleInputChange('maritalStatus', e.target.value)}\n            className=\"input-field\"\n          >\n            <option value=\"\">Select Marital Status</option>\n            <option value=\"single\">Single</option>\n            <option value=\"married\">Married</option>\n            <option value=\"divorced\">Divorced</option>\n            <option value=\"widowed\">Widowed</option>\n            <option value=\"separated\">Separated</option>\n          </select>\n        </div>\n\n        <div>\n          <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Phone Number <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"tel\"\n            id=\"phone\"\n            value={formData.phone}\n            onChange={(e) => handleInputChange('phone', e.target.value)}\n            className={`input-field ${errors.phone ? 'border-red-300' : ''}`}\n            placeholder=\"+91-9876543210\"\n          />\n          {errors.phone && <p className=\"text-red-500 text-xs mt-1\">{errors.phone}</p>}\n        </div>\n\n        <div>\n          <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Email Address <span className=\"text-gray-400\">(Optional)</span>\n          </label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            value={formData.email}\n            onChange={(e) => handleInputChange('email', e.target.value)}\n            className=\"input-field\"\n            placeholder=\"Enter email address\"\n          />\n        </div>\n      </div>\n\n      <div>\n        <label htmlFor=\"address\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n          Complete Address <span className=\"text-red-500\">*</span>\n        </label>\n        <textarea\n          id=\"address\"\n          rows={3}\n          value={formData.address}\n          onChange={(e) => handleInputChange('address', e.target.value)}\n          className={`input-field ${errors.address ? 'border-red-300' : ''}`}\n          placeholder=\"Enter complete address with city, state, and pincode\"\n        />\n        {errors.address && <p className=\"text-red-500 text-xs mt-1\">{errors.address}</p>}\n      </div>\n    </div>\n  );\n\n  const renderMedicalAdmissionStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"p-2 bg-blue-100 rounded-lg\">\n          <Stethoscope className=\"h-5 w-5 text-blue-600\" />\n        </div>\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\"> Medical & Admission Information</h3>\n          <p className=\"text-sm text-gray-500\">Comprehensive medical details and admission information</p>\n        </div>\n      </div>\n\n      {/* Show UHID Info */}\n      {previewUHID && (\n        <div className=\"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-gray-100 rounded-lg\">\n                <Hash className=\"h-4 w-4 text-gray-600\" />\n              </div>\n              <div>\n                <h4 className=\"font-medium text-gray-900\">Patient UHID: {previewUHID}</h4>\n                <p className=\"text-sm text-gray-600\">Unique Hospital ID assigned to this patient</p>\n              </div>\n            </div>\n            <button\n              type=\"button\"\n              onClick={generatePreviewUHID}\n              disabled={isGeneratingUHID}\n              className=\"text-sm text-blue-600 hover:text-blue-800 font-medium\"\n            >\n              {isGeneratingUHID ? 'Regenerating...' : 'Regenerate'}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Admission Information */}\n      <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\n        <h4 className=\"font-medium text-purple-900 mb-4 flex items-center gap-2\">\n          <Building className=\"h-4 w-4\" />\n          Admission Information\n        </h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label htmlFor=\"admissionDate\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Date of Admission <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"date\"\n              id=\"admissionDate\"\n              value={formData.admissionDate}\n              onChange={(e) => handleInputChange('admissionDate', e.target.value)}\n              className=\"input-field\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"admissionTime\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Time of Admission <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"time\"\n              id=\"admissionTime\"\n              value={formData.admissionTime}\n              onChange={(e) => handleInputChange('admissionTime', e.target.value)}\n              className=\"input-field\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"admissionType\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Type of Admission <span className=\"text-red-500\">*</span>\n            </label>\n            <select\n              id=\"admissionType\"\n              value={formData.admissionType}\n              onChange={(e) => handleInputChange('admissionType', e.target.value)}\n              className={`input-field ${errors.admissionType ? 'border-red-300' : ''}`}\n            >\n              <option value=\"\">Select Admission Type</option>\n              <option value=\"emergency\">Emergency</option>\n              <option value=\"elective\">Elective</option>\n              <option value=\"referred\">Referred</option>\n            </select>\n            {errors.admissionType && <p className=\"text-red-500 text-xs mt-1\">{errors.admissionType}</p>}\n          </div>\n\n          <div>\n            <label htmlFor=\"departmentWard\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Department / Ward <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"departmentWard\"\n              value={formData.departmentWard}\n              onChange={(e) => handleInputChange('departmentWard', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"e.g., Cardiology, ICU, General Ward\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"roomNumber\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Room Number <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"roomNumber\"\n              value={formData.roomNumber}\n              onChange={(e) => handleInputChange('roomNumber', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"e.g., ICU-04, Room 201\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"referringDoctorFacility\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Referring Doctor/Facility <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"referringDoctorFacility\"\n              value={formData.referringDoctorFacility}\n              onChange={(e) => handleInputChange('referringDoctorFacility', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Doctor name or facility name\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"consultingDoctorName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Consulting Doctor's Name <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"consultingDoctorName\"\n              value={formData.consultingDoctorName}\n              onChange={(e) => handleInputChange('consultingDoctorName', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Name of the consulting doctor\"\n            />\n          </div>\n        </div>\n\n        <div className=\"mt-4\">\n          <label htmlFor=\"primaryComplaint\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Primary Complaint / Reason for Visit <span className=\"text-red-500\">*</span>\n          </label>\n          <textarea\n            id=\"primaryComplaint\"\n            rows={3}\n            value={formData.primaryComplaint}\n            onChange={(e) => handleInputChange('primaryComplaint', e.target.value)}\n            className={`input-field ${errors.primaryComplaint ? 'border-red-300' : ''}`}\n            placeholder=\"Describe the main reason for this visit or admission\"\n          />\n          {errors.primaryComplaint && <p className=\"text-red-500 text-xs mt-1\">{errors.primaryComplaint}</p>}\n        </div>\n      </div>\n\n      {/* Medical History */}\n      <div className=\"bg-green-50 p-4 rounded-lg border border-green-200\">\n        <h4 className=\"font-medium text-green-900 mb-4 flex items-center gap-2\">\n          <Heart className=\"h-4 w-4\" />\n           Medical History (Short Summary at Admission)\n        </h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label htmlFor=\"bloodGroup\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Blood Group <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <select\n              id=\"bloodGroup\"\n              value={formData.bloodGroup}\n              onChange={(e) => handleInputChange('bloodGroup', e.target.value)}\n              className=\"input-field\"\n            >\n              <option value=\"\">Select Blood Group</option>\n              <option value=\"A+\">A+</option>\n              <option value=\"A-\">A-</option>\n              <option value=\"B+\">B+</option>\n              <option value=\"B-\">B-</option>\n              <option value=\"AB+\">AB+</option>\n              <option value=\"AB-\">AB-</option>\n              <option value=\"O+\">O+</option>\n              <option value=\"O-\">O-</option>\n            </select>\n          </div>\n\n          <div>\n            <label htmlFor=\"initialSymptoms\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Current Symptoms <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"initialSymptoms\"\n              value={formData.initialSymptoms}\n              onChange={(e) => handleInputChange('initialSymptoms', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Current symptoms being experienced\"\n            />\n          </div>\n        </div>\n\n        <div className=\"mt-4 space-y-4\">\n          <div>\n            <label htmlFor=\"allergies\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Allergies <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <textarea\n              id=\"allergies\"\n              rows={2}\n              value={formData.allergies}\n              onChange={(e) => handleInputChange('allergies', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"List any known allergies (e.g., Penicillin, Peanuts, etc.)\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"currentMedications\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Current Medications <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <textarea\n              id=\"currentMedications\"\n              rows={2}\n              value={formData.currentMedications}\n              onChange={(e) => handleInputChange('currentMedications', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"List current medications with dosages\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"chronicConditions\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Chronic Conditions <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <input\n              type=\"text\"\n              id=\"chronicConditions\"\n              value={formData.chronicConditions}\n              onChange={(e) => handleInputChange('chronicConditions', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"e.g., Diabetes, Hypertension, Heart Disease\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"previousSurgeries\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Previous Surgeries or Hospitalizations <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <textarea\n              id=\"previousSurgeries\"\n              rows={2}\n              value={formData.previousSurgeries}\n              onChange={(e) => handleInputChange('previousSurgeries', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Previous surgeries, hospitalizations, and significant medical events\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"medicalHistory\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Additional Medical History <span className=\"text-gray-400\">(Optional)</span>\n            </label>\n            <textarea\n              id=\"medicalHistory\"\n              rows={3}\n              value={formData.medicalHistory}\n              onChange={(e) => handleInputChange('medicalHistory', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Any other relevant medical history or family medical history\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderGuardianStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"p-2 bg-purple-100 rounded-lg\">\n          <UserCheck className=\"h-5 w-5 text-purple-600\" />\n        </div>\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\"> Guardian / Attendant / Next of Kin Details</h3>\n          <p className=\"text-sm text-gray-500\">Optional information for guardian or attendant <span className=\"text-gray-400\">* All fields optional</span></p>\n        </div>\n      </div>\n\n      <div className=\"bg-purple-50 p-4 rounded-lg border border-purple-200\">\n        <h4 className=\"font-medium text-purple-900 mb-4 flex items-center gap-2\">\n          <Users className=\"h-4 w-4\" />\n          Guardian / Attendant Information (Optional)\n        </h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label htmlFor=\"guardianName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Name of Guardian / Attendant\n            </label>\n            <input\n              type=\"text\"\n              id=\"guardianName\"\n              value={formData.guardianName}\n              onChange={(e) => handleInputChange('guardianName', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Full name of guardian or attendant\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"guardianRelationship\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Relationship with Patient\n            </label>\n            <select\n              id=\"guardianRelationship\"\n              value={formData.guardianRelationship}\n              onChange={(e) => handleInputChange('guardianRelationship', e.target.value)}\n              className=\"input-field\"\n            >\n              <option value=\"\">Select Relationship</option>\n              <option value=\"spouse\">Spouse</option>\n              <option value=\"parent\">Parent</option>\n              <option value=\"child\">Child</option>\n              <option value=\"sibling\">Sibling</option>\n              <option value=\"relative\">Relative</option>\n              <option value=\"guardian\">Legal Guardian</option>\n              <option value=\"attendant\">Attendant</option>\n              <option value=\"friend\">Friend</option>\n              <option value=\"other\">Other</option>\n            </select>\n          </div>\n\n          <div>\n            <label htmlFor=\"guardianPhone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Mobile Number\n            </label>\n            <input\n              type=\"tel\"\n              id=\"guardianPhone\"\n              value={formData.guardianPhone}\n              onChange={(e) => handleInputChange('guardianPhone', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"+91-9876543210\"\n            />\n          </div>\n\n          <div className=\"md:col-span-2\">\n            <label htmlFor=\"guardianAddress\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Address (if different from patient)\n            </label>\n            <textarea\n              id=\"guardianAddress\"\n              rows={2}\n              value={formData.guardianAddress}\n              onChange={(e) => handleInputChange('guardianAddress', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Complete address of guardian/attendant if different from patient\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderEmergencyContactStep = () => (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"p-2 bg-green-100 rounded-lg\">\n          <ClipboardList className=\"h-5 w-5 text-green-600\" />\n        </div>\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">Emergency Contact & Insurance</h3>\n          <p className=\"text-sm text-gray-500\">Emergency contact and insurance details <span className=\"text-gray-400\">* All fields optional</span></p>\n        </div>\n      </div>\n\n      {/* Final UHID Confirmation */}\n      {previewUHID && (\n        <div className=\"bg-orange-50 p-4 rounded-lg border border-orange-200 mb-6\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <div className=\"p-2 bg-orange-100 rounded-lg\">\n              <Hash className=\"h-4 w-4 text-orange-600\" />\n            </div>\n            <div>\n              <h4 className=\"font-semibold text-orange-900\">Final Confirmation - Patient UHID</h4>\n              <p className=\"text-sm text-orange-700\">This UHID will be assigned to the patient</p>\n            </div>\n          </div>\n          <div className=\"bg-white px-4 py-3 rounded-lg border border-orange-300\">\n            <p className=\"font-mono text-xl font-bold text-orange-900 text-center tracking-wider\">\n              {previewUHID}\n            </p>\n          </div>\n        </div>\n      )}\n\n      {/* Emergency Contact */}\n      <div className=\"bg-red-50 p-4 rounded-lg border border-red-200\">\n        <h4 className=\"font-medium text-red-900 mb-4 flex items-center gap-2\">\n          <AlertTriangle className=\"h-4 w-4\" />\n          Emergency Contact Information (Optional)\n        </h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label htmlFor=\"emergencyContactName\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Contact Name\n            </label>\n            <input\n              type=\"text\"\n              id=\"emergencyContactName\"\n              value={formData.emergencyContactName}\n              onChange={(e) => handleInputChange('emergencyContactName', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Full name\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"emergencyContactPhone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Contact Phone\n            </label>\n            <input\n              type=\"tel\"\n              id=\"emergencyContactPhone\"\n              value={formData.emergencyContactPhone}\n              onChange={(e) => handleInputChange('emergencyContactPhone', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"+91-9876543210\"\n            />\n          </div>\n\n          <div className=\"md:col-span-2\">\n            <label htmlFor=\"emergencyContactRelationship\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Relationship\n            </label>\n            <select\n              id=\"emergencyContactRelationship\"\n              value={formData.emergencyContactRelationship}\n              onChange={(e) => handleInputChange('emergencyContactRelationship', e.target.value)}\n              className=\"input-field\"\n            >\n              <option value=\"\">Select Relationship</option>\n              <option value=\"spouse\">Spouse</option>\n              <option value=\"parent\">Parent</option>\n              <option value=\"child\">Child</option>\n              <option value=\"sibling\">Sibling</option>\n              <option value=\"relative\">Relative</option>\n              <option value=\"friend\">Friend</option>\n              <option value=\"other\">Other</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Insurance Information */}\n      <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n        <h4 className=\"font-medium text-blue-900 mb-4 flex items-center gap-2\">\n          <Shield className=\"h-4 w-4\" />\n          Insurance Information (Optional)\n        </h4>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          <div>\n            <label htmlFor=\"insuranceProvider\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Insurance Provider\n            </label>\n            <input\n              type=\"text\"\n              id=\"insuranceProvider\"\n              value={formData.insuranceProvider}\n              onChange={(e) => handleInputChange('insuranceProvider', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Insurance company name\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"insuranceNumber\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n              Policy Number\n            </label>\n            <input\n              type=\"text\"\n              id=\"insuranceNumber\"\n              value={formData.insuranceNumber}\n              onChange={(e) => handleInputChange('insuranceNumber', e.target.value)}\n              className=\"input-field\"\n              placeholder=\"Policy/Member ID\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderStepIndicator = () => (\n    <div className=\"flex items-center justify-center mb-8\">\n      {[1, 2, 3, 4].map((step) => (\n        <React.Fragment key={step}>\n          <div className={`flex items-center justify-center w-8 h-8 rounded-full border-2 ${\n            step <= currentStep \n              ? 'bg-orange-500 border-orange-500 text-white' \n              : 'border-gray-300 text-gray-400'\n          }`}>\n            {step}\n          </div>\n          {step < 4 && (\n            <div className={`w-12 h-0.5 mx-2 ${\n              step < currentStep ? 'bg-orange-500' : 'bg-gray-300'\n            }`} />\n          )}\n        </React.Fragment>\n      ))}\n    </div>\n  );\n\n  return (\n    <div className=\"max-w-4xl mx-auto bg-white rounded-xl shadow-lg border border-gray-200\">\n      <div className=\"p-6 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-orange-100 rounded-lg\">\n              <UserPlus className=\"h-6 w-6 text-orange-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-gray-900\">New Patient Registration</h2>\n              <p className=\"text-sm text-gray-500\">Comprehensive patient registration with medical and admission details</p>\n            </div>\n          </div>\n          <button\n            onClick={onCancel}\n            className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"h-5 w-5 text-gray-500\" />\n          </button>\n        </div>\n      </div>\n\n      <form onSubmit={handleSubmit} className=\"p-6\">\n        {renderStepIndicator()}\n\n        {currentStep === 1 && renderPersonalInfoStep()}\n        {currentStep === 2 && renderMedicalAdmissionStep()}\n        {currentStep === 3 && renderGuardianStep()}\n        {currentStep === 4 && renderEmergencyContactStep()}\n\n        {/* Navigation Buttons */}\n        <div className=\"flex justify-between mt-8 pt-6 border-t border-gray-200\">\n          <div>\n            {currentStep > 1 && (\n              <button\n                type=\"button\"\n                onClick={handlePrevious}\n                className=\"btn-secondary\"\n                disabled={isLoading}\n              >\n                Previous\n              </button>\n            )}\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button\n              type=\"button\"\n              onClick={onCancel}\n              className=\"btn-secondary\"\n              disabled={isLoading}\n            >\n              Cancel\n            </button>\n            \n            {currentStep < 4 ? (\n              <button\n                type=\"button\"\n                onClick={handleNext}\n                className=\"btn-primary flex items-center gap-2\"\n                disabled={isLoading || isGeneratingUHID}\n              >\n                {isGeneratingUHID ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                    Generating UHID...\n                  </>\n                ) : (\n                  'Next'\n                )}\n              </button>\n            ) : (\n              <button\n                type=\"submit\"\n                className=\"btn-primary flex items-center gap-2\"\n                disabled={isLoading}\n              >\n                {isLoading ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                    Registering...\n                  </>\n                ) : (\n                  <>\n                    <Save className=\"h-4 w-4\" />\n                    Register Patient\n                  </>\n                )}\n              </button>\n            )}\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3295, "column": 0}, "map": {"version":3,"sources":["file:///Users/nisha/Desktop/hms/untitled%20folder/project/app/patients/register/page.tsx"],"sourcesContent":["'use client';\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport PatientRegistrationForm from '../../../components/PatientRegistrationForm';\nimport { registerNewPatient, PatientRegistrationData } from '../../../src/lib/patientService';\nimport { CheckCircle, AlertCircle, Copy, Eye, EyeOff } from 'lucide-react';\n\nexport default function PatientRegisterPage() {\n  const router = useRouter();\n  const [isLoading, setIsLoading] = useState(false);\n  const [registrationResult, setRegistrationResult] = useState<{\n    success: boolean;\n    uhid?: string;\n    credentials?: { email: string; password: string };\n    error?: string;\n  } | null>(null);\n  const [showPassword, setShowPassword] = useState(false);\n\n  const handleRegistrationSubmit = async (data: PatientRegistrationData, previewUHID?: string) => {\n    setIsLoading(true);\n    \n    try {\n      const result = await registerNewPatient(data, previewUHID);\n      setRegistrationResult(result);\n      \n      if (result.success) {\n        // Auto-hide success message after 10 seconds and redirect\n        setTimeout(() => {\n          router.push('/patients');\n        }, 10000);\n      }\n    } catch (error) {\n      console.error('Registration error:', error);\n      setRegistrationResult({\n        success: false,\n        error: 'An unexpected error occurred during registration'\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    router.push('/patients');\n  };\n\n  const copyToClipboard = (text: string) => {\n    navigator.clipboard.writeText(text);\n  };\n\n  const renderSuccessResult = () => {\n    if (!registrationResult?.success || !registrationResult.uhid || !registrationResult.credentials) {\n      return null;\n    }\n\n    return (\n      <div className=\"max-w-2xl mx-auto bg-white rounded-xl shadow-lg border border-gray-200\">\n        <div className=\"p-6 border-b border-gray-200 bg-green-50\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-green-100 rounded-lg\">\n              <CheckCircle className=\"h-6 w-6 text-green-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-green-900\">Patient Registration Successful!</h2>\n              <p className=\"text-sm text-green-700\">New patient has been registered successfully</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* UHID Information */}\n          <div className=\"bg-orange-50 p-4 rounded-lg border border-orange-200\">\n            <h3 className=\"font-semibold text-orange-900 mb-3\">Patient UHID (Unique Hospital ID)</h3>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"bg-white px-4 py-2 rounded-lg border border-orange-300 font-mono text-lg font-bold text-orange-900 flex-1\">\n                {registrationResult.uhid}\n              </div>\n              <button\n                onClick={() => copyToClipboard(registrationResult.uhid!)}\n                className=\"p-2 bg-orange-100 hover:bg-orange-200 rounded-lg transition-colors\"\n                title=\"Copy UHID\"\n              >\n                <Copy className=\"h-4 w-4 text-orange-600\" />\n              </button>\n            </div>\n            <p className=\"text-sm text-orange-700 mt-2\">\n              This UHID will be used for all future appointments and medical records.\n            </p>\n          </div>\n\n          {/* Login Credentials */}\n          <div className=\"bg-blue-50 p-4 rounded-lg border border-blue-200\">\n            <h3 className=\"font-semibold text-blue-900 mb-3\">Patient Portal Login Credentials</h3>\n            \n            <div className=\"space-y-3\">\n              <div>\n                <label className=\"block text-sm font-medium text-blue-700 mb-1\">Email Address</label>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"bg-white px-3 py-2 rounded-lg border border-blue-300 font-mono text-sm flex-1\">\n                    {registrationResult.credentials.email}\n                  </div>\n                  <button\n                    onClick={() => copyToClipboard(registrationResult.credentials!.email)}\n                    className=\"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors\"\n                    title=\"Copy Email\"\n                  >\n                    <Copy className=\"h-4 w-4 text-blue-600\" />\n                  </button>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-blue-700 mb-1\">Password</label>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"bg-white px-3 py-2 rounded-lg border border-blue-300 font-mono text-sm flex-1\">\n                    {showPassword ? registrationResult.credentials.password : ''}\n                  </div>\n                  <button\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors\"\n                    title={showPassword ? \"Hide Password\" : \"Show Password\"}\n                  >\n                    {showPassword ? \n                      <EyeOff className=\"h-4 w-4 text-blue-600\" /> : \n                      <Eye className=\"h-4 w-4 text-blue-600\" />\n                    }\n                  </button>\n                  <button\n                    onClick={() => copyToClipboard(registrationResult.credentials!.password)}\n                    className=\"p-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors\"\n                    title=\"Copy Password\"\n                  >\n                    <Copy className=\"h-4 w-4 text-blue-600\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n            \n            <p className=\"text-sm text-blue-700 mt-3\">\n              Please provide these credentials to the patient for accessing their patient portal.\n            </p>\n          </div>\n\n          {/* Important Notes */}\n          <div className=\"bg-yellow-50 p-4 rounded-lg border border-yellow-200\">\n            <h3 className=\"font-semibold text-yellow-900 mb-2\">Important Notes</h3>\n            <ul className=\"text-sm text-yellow-800 space-y-1\">\n              <li> The patient can now log in to the patient portal using the credentials above</li>\n              <li> The UHID will be used for all medical records and appointments</li>\n              <li> Please advise the patient to keep their login credentials secure</li>\n              <li> The patient can change their password after first login if needed</li>\n            </ul>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"flex gap-3 pt-4 border-t border-gray-200\">\n            <button\n              onClick={() => router.push('/patients')}\n              className=\"btn-primary flex-1\"\n            >\n              View All Patients\n            </button>\n            <button\n              onClick={() => router.push(`/patients/${registrationResult.uhid}`)}\n              className=\"btn-secondary\"\n            >\n              View Patient Record\n            </button>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"btn-secondary\"\n            >\n              Register Another Patient\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderErrorResult = () => {\n    if (!registrationResult?.error) return null;\n\n    return (\n      <div className=\"max-w-2xl mx-auto bg-white rounded-xl shadow-lg border border-red-200\">\n        <div className=\"p-6 border-b border-gray-200 bg-red-50\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"p-2 bg-red-100 rounded-lg\">\n              <AlertCircle className=\"h-6 w-6 text-red-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-xl font-semibold text-red-900\">Registration Failed</h2>\n              <p className=\"text-sm text-red-700\">There was an error registering the patient</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-6\">\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-red-800\">{registrationResult.error}</p>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <button\n              onClick={() => setRegistrationResult(null)}\n              className=\"btn-primary\"\n            >\n              Try Again\n            </button>\n            <button\n              onClick={() => router.push('/patients')}\n              className=\"btn-secondary\"\n            >\n              Back to Patients\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8 px-4\">\n      {registrationResult ? (\n        registrationResult.success ? renderSuccessResult() : renderErrorResult()\n      ) : (\n        <PatientRegistrationForm\n          onSubmit={handleRegistrationSubmit}\n          onCancel={handleCancel}\n          isLoading={isLoading}\n        />\n      )}\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}