(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2991],{252:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(5155),r=s(2115),l=s(5339),i=s(4616),d=s(7580),n=s(3109),c=s(646),x=s(5670),m=s(4186),h=s(9074),o=s(2099);function u(){let[e,t]=(0,r.useState)([]),[s,u]=(0,r.useState)({totalStaff:0,activeStaff:0,onLeave:0,nightShift:0}),[f,p]=(0,r.useState)(!0),[g,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{y()},[]);let y=async()=>{try{p(!0);let{data:e,error:s}=await o.ND.from("staff").select("\n          *,\n          users!staff_user_id_fkey (\n            name,\n            email,\n            phone,\n            role,\n            department,\n            status\n          )\n        ");if(s)throw s;let a=(null==e?void 0:e.map(e=>{var t,s,a,r,l,i;return{...e,name:(null==(t=e.users)?void 0:t.name)||"Unknown",email:(null==(s=e.users)?void 0:s.email)||"",phone:(null==(a=e.users)?void 0:a.phone)||"",role:(null==(r=e.users)?void 0:r.role)||"",department:(null==(l=e.users)?void 0:l.department)||"",user_status:(null==(i=e.users)?void 0:i.status)||"inactive"}}))||[];t(a);let r=a.length,l=a.filter(e=>"active"===e.status&&"active"===e.user_status).length,i=a.filter(e=>"on_leave"===e.status).length,d=a.filter(e=>"night"===e.shift_timing&&"active"===e.status).length;u({totalStaff:r,activeStaff:l,onLeave:i,nightShift:d})}catch(e){console.error("Error fetching staff data:",e),j("Failed to load staff data")}finally{p(!1)}};return f?(0,a.jsx)("div",{className:"space-y-6 p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/3 mb-6"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsx)("div",{className:"h-20 bg-gray-200 rounded"})},t))})]})}):g?(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage hospital staff and their schedules"})]})}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.A,{className:"h-5 w-5 text-red-400 mr-2"}),(0,a.jsx)("p",{className:"text-red-700",children:g})]})})]}):0===e.length?(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage hospital staff and their schedules"})]}),(0,a.jsxs)("button",{className:"flex items-center bg-orange-500 hover:bg-orange-600 text-white px-4 py-2.5 rounded-xl font-medium text-sm transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,a.jsx)(i.A,{size:16,className:"mr-2"}),"Add Staff"]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-8 text-center",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"No Staff Data Available"}),(0,a.jsx)("p",{className:"text-blue-700",children:"There are currently no staff members in the system. Add staff members to get started."})]})]}):(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage hospital staff and their schedules"})]}),(0,a.jsxs)("button",{className:"flex items-center bg-orange-500 hover:bg-orange-600 text-white px-4 py-2.5 rounded-xl font-medium text-sm transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,a.jsx)(i.A,{size:16,className:"mr-2"}),"Add Staff"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Total Staff"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.totalStaff}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(n.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-600",children:"Active members"})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(d.A,{className:"text-white",size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"On Duty"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.activeStaff}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(c.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-600",children:[s.totalStaff>0?Math.round(s.activeStaff/s.totalStaff*100):0,"% present"]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(x.A,{className:"text-white",size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Night Shift"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.nightShift}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(m.A,{className:"h-3 w-3 text-blue-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"8 PM - 8 AM"})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"text-white",size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Active Staff"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.activeStaff}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(c.A,{className:"h-3 w-3 text-green-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-600",children:[s.totalStaff>0?Math.round(s.activeStaff/s.totalStaff*100):0,"% active"]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(x.A,{className:"text-white",size:20})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 shadow-sm border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"On Leave"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s.onLeave}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(l.A,{className:"h-3 w-3 text-orange-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium text-orange-600",children:"Medical & Annual"})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"text-white",size:20})})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Staff Members"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-white",children:e.name.split(" ").map(e=>e[0]).join("").toUpperCase()})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 capitalize",children:e.role.replace("_"," ")})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.department||"Not assigned"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ".concat("active"===e.status?"bg-green-100 text-green-800":"on_leave"===e.status?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.phone||"Not provided"})]},e.id))})]})})]})]})}},646:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2099:(e,t,s)=>{"use strict";s.d(t,{HW:()=>l,ND:()=>a,Ru:()=>r,sh:()=>i});let a=(0,s(5647).UU)("https://zusheijhebsmjiyyeiqq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp1c2hlaWpoZWJzbWppeXllaXFxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MjI0NDAsImV4cCI6MjA2NzM5ODQ0MH0.iwGPaOJPa6OvwX_iA1xvRt5cM72DWfd8Br1pwRTemRc"),r=async(e,t)=>{let{data:s,error:r}=await a.auth.signInWithPassword({email:e,password:t});return{data:s,error:r}},l=async()=>{let{data:{user:e}}=await a.auth.getUser();return e},i=async()=>{let{data:{user:e}}=await a.auth.getUser();if(console.log("Auth user:",e),!e)return console.log("No authenticated user found"),null;let{data:t,error:s}=await a.from("users").select("*").eq("auth_id",e.id).single();return(console.log("User profile query result:",{userProfile:t,error:s}),s)?(console.error("Error fetching user profile:",s),null):(console.log("Returning user profile:",t),t)}},3109:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},4186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},4616:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5339:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},5670:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},7528:(e,t,s)=>{Promise.resolve().then(s.bind(s,252))},7580:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},9074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[8800,8441,1684,7358],()=>t(7528)),_N_E=e.O()}]);